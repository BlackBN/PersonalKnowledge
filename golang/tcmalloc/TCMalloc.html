<!DOCTYPE html>
<!-- saved from url=(0040)https://wallenwang.com/2018/11/tcmalloc/ -->
<html lang="zh-CN" class="no-js no-svg"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="profile" href="http://gmpg.org/xfn/11">
		<title>TCMalloc解密 – Wallen's Blog</title>
<meta name="description" content="写在前面 本文首先简单介绍TCMalloc及其使用方法，然后解释TCMalloc替代系统的内存分配函数的原理， […]">
<meta name="keywords" content="TCMalloc,内存管理">
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net/">
<link rel="dns-prefetch" href="https://kit.fontawesome.com/">
<link rel="dns-prefetch" href="https://zz.bdstatic.com/">
<link rel="dns-prefetch" href="https://fonts.geekzu.org/">
<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="Wallen&#39;s Blog » Feed" href="https://wallenwang.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Wallen&#39;s Blog » 评论Feed" href="https://wallenwang.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Wallen&#39;s Blog » TCMalloc解密评论Feed" href="https://wallenwang.com/2018/11/tcmalloc/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/wallenwang.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.8.4"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./TCMalloc_files/wp-emoji-release.min.js" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="wp-block-library-css" href="./TCMalloc_files/style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="extendify-utilities-css" href="./TCMalloc_files/extendify-utilities.css" type="text/css" media="all">
<link rel="stylesheet" id="cwp-style-css" href="./TCMalloc_files/cwp.css" type="text/css" media="all">
<link rel="stylesheet" id="mks_shortcodes_simple_line_icons-css" href="./TCMalloc_files/simple-line-icons.css" type="text/css" media="screen">
<link rel="stylesheet" id="mks_shortcodes_css-css" href="./TCMalloc_files/style.css" type="text/css" media="screen">
<link rel="stylesheet" id="dashicons-css" href="./TCMalloc_files/dashicons.min.css" type="text/css" media="all">
<link rel="stylesheet" id="to-top-css" href="./TCMalloc_files/to-top-public.css" type="text/css" media="all">
<link rel="stylesheet" id="wpdiscuz-frontend-css-css" href="./TCMalloc_files/style(1).css" type="text/css" media="all">
<style id="wpdiscuz-frontend-css-inline-css" type="text/css">
 #wpdcom .wpd-blog-administrator .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-administrator .wpd-comment-author, #wpdcom .wpd-blog-administrator .wpd-comment-author a{color:#00B38F}#wpdcom.wpd-layout-1 .wpd-comment .wpd-blog-administrator .wpd-avatar img{border-color:#00B38F}#wpdcom.wpd-layout-2 .wpd-comment.wpd-reply .wpd-comment-wrap.wpd-blog-administrator{border-left:3px solid #00B38F}#wpdcom.wpd-layout-2 .wpd-comment .wpd-blog-administrator .wpd-avatar img{border-bottom-color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-administrator .wpd-comment-subheader{border-top:1px dashed #00B38F}#wpdcom.wpd-layout-3 .wpd-reply .wpd-blog-administrator .wpd-comment-right{border-left:1px solid #00B38F}#wpdcom .wpd-blog-editor .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-editor .wpd-comment-author, #wpdcom .wpd-blog-editor .wpd-comment-author a{color:#00B38F}#wpdcom.wpd-layout-1 .wpd-comment .wpd-blog-editor .wpd-avatar img{border-color:#00B38F}#wpdcom.wpd-layout-2 .wpd-comment.wpd-reply .wpd-comment-wrap.wpd-blog-editor{border-left:3px solid #00B38F}#wpdcom.wpd-layout-2 .wpd-comment .wpd-blog-editor .wpd-avatar img{border-bottom-color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-editor .wpd-comment-subheader{border-top:1px dashed #00B38F}#wpdcom.wpd-layout-3 .wpd-reply .wpd-blog-editor .wpd-comment-right{border-left:1px solid #00B38F}#wpdcom .wpd-blog-author .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-author .wpd-comment-author, #wpdcom .wpd-blog-author .wpd-comment-author a{color:#00B38F}#wpdcom.wpd-layout-1 .wpd-comment .wpd-blog-author .wpd-avatar img{border-color:#00B38F}#wpdcom.wpd-layout-2 .wpd-comment .wpd-blog-author .wpd-avatar img{border-bottom-color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-author .wpd-comment-subheader{border-top:1px dashed #00B38F}#wpdcom.wpd-layout-3 .wpd-reply .wpd-blog-author .wpd-comment-right{border-left:1px solid #00B38F}#wpdcom .wpd-blog-contributor .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-contributor .wpd-comment-author, #wpdcom .wpd-blog-contributor .wpd-comment-author a{color:#00B38F}#wpdcom.wpd-layout-1 .wpd-comment .wpd-blog-contributor .wpd-avatar img{border-color:#00B38F}#wpdcom.wpd-layout-2 .wpd-comment .wpd-blog-contributor .wpd-avatar img{border-bottom-color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-contributor .wpd-comment-subheader{border-top:1px dashed #00B38F}#wpdcom.wpd-layout-3 .wpd-reply .wpd-blog-contributor .wpd-comment-right{border-left:1px solid #00B38F}#wpdcom .wpd-blog-subscriber .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-subscriber .wpd-comment-author, #wpdcom .wpd-blog-subscriber .wpd-comment-author a{color:#00B38F}#wpdcom.wpd-layout-2 .wpd-comment .wpd-blog-subscriber .wpd-avatar img{border-bottom-color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-subscriber .wpd-comment-subheader{border-top:1px dashed #00B38F}#wpdcom .wpd-blog-customer .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-customer .wpd-comment-author, #wpdcom .wpd-blog-customer .wpd-comment-author a{color:#00B38F}#wpdcom.wpd-layout-1 .wpd-comment .wpd-blog-customer .wpd-avatar img{border-color:#00B38F}#wpdcom.wpd-layout-2 .wpd-comment .wpd-blog-customer .wpd-avatar img{border-bottom-color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-customer .wpd-comment-subheader{border-top:1px dashed #00B38F}#wpdcom.wpd-layout-3 .wpd-reply .wpd-blog-customer .wpd-comment-right{border-left:1px solid #00B38F}#wpdcom .wpd-blog-shop_manager .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-shop_manager .wpd-comment-author, #wpdcom .wpd-blog-shop_manager .wpd-comment-author a{color:#00B38F}#wpdcom.wpd-layout-1 .wpd-comment .wpd-blog-shop_manager .wpd-avatar img{border-color:#00B38F}#wpdcom.wpd-layout-2 .wpd-comment .wpd-blog-shop_manager .wpd-avatar img{border-bottom-color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-shop_manager .wpd-comment-subheader{border-top:1px dashed #00B38F}#wpdcom.wpd-layout-3 .wpd-reply .wpd-blog-shop_manager .wpd-comment-right{border-left:1px solid #00B38F}#wpdcom .wpd-blog-post_author .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-post_author .wpd-comment-author, #wpdcom .wpd-blog-post_author .wpd-comment-author a{color:#00B38F}#wpdcom .wpd-blog-post_author .wpd-avatar img{border-color:#00B38F}#wpdcom.wpd-layout-1 .wpd-comment .wpd-blog-post_author .wpd-avatar img{border-color:#00B38F}#wpdcom.wpd-layout-2 .wpd-comment.wpd-reply .wpd-comment-wrap.wpd-blog-post_author{border-left:3px solid #00B38F}#wpdcom.wpd-layout-2 .wpd-comment .wpd-blog-post_author .wpd-avatar img{border-bottom-color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-post_author .wpd-comment-subheader{border-top:1px dashed #00B38F}#wpdcom.wpd-layout-3 .wpd-reply .wpd-blog-post_author .wpd-comment-right{border-left:1px solid #00B38F}#wpdcom .wpd-blog-guest .wpd-comment-label{color:#ffffff;background-color:#00B38F;border:none}#wpdcom .wpd-blog-guest .wpd-comment-author, #wpdcom .wpd-blog-guest .wpd-comment-author a{color:#00B38F}#wpdcom.wpd-layout-3 .wpd-blog-guest .wpd-comment-subheader{border-top:1px dashed #00B38F}#comments, #respond, .comments-area, #wpdcom{}#wpdcom .ql-editor > *{color:#777777}#wpdcom .ql-editor::before{}#wpdcom .ql-toolbar{border:1px solid #DDDDDD;border-top:none}#wpdcom .ql-container{border:1px solid #DDDDDD;border-bottom:none}#wpdcom .wpd-form-row .wpdiscuz-item input[type="text"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="email"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="url"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="color"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="date"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="datetime"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="datetime-local"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="month"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="number"], #wpdcom .wpd-form-row .wpdiscuz-item input[type="time"], #wpdcom textarea, #wpdcom select{border:1px solid #DDDDDD;color:#777777}#wpdcom .wpd-form-row .wpdiscuz-item textarea{border:1px solid #DDDDDD}#wpdcom input::placeholder, #wpdcom textarea::placeholder, #wpdcom input::-moz-placeholder, #wpdcom textarea::-webkit-input-placeholder{}#wpdcom .wpd-comment-text{color:#777777}#wpdcom .wpd-thread-head .wpd-thread-info{border-bottom:2px solid #00B38F}#wpdcom .wpd-thread-head .wpd-thread-info.wpd-reviews-tab svg{fill:#00B38F}#wpdcom .wpd-thread-head .wpdiscuz-user-settings{border-bottom:2px solid #00B38F}#wpdcom .wpd-thread-head .wpdiscuz-user-settings:hover{color:#00B38F}#wpdcom .wpd-comment .wpd-follow-link:hover{color:#00B38F}#wpdcom .wpd-comment-status .wpd-sticky{color:#00B38F}#wpdcom .wpd-thread-filter .wpdf-active{color:#00B38F;border-bottom-color:#00B38F}#wpdcom .wpd-comment-info-bar{border:1px dashed #33c3a6;background:#e6f8f4}#wpdcom .wpd-comment-info-bar .wpd-current-view i{color:#00B38F}#wpdcom .wpd-filter-view-all:hover{background:#00B38F}#wpdcom .wpdiscuz-item .wpdiscuz-rating > label{color:#DDDDDD}#wpdcom .wpdiscuz-item .wpdiscuz-rating:not(:checked) > label:hover, .wpdiscuz-rating:not(:checked) > label:hover ~ label{}#wpdcom .wpdiscuz-item .wpdiscuz-rating > input ~ label:hover, #wpdcom .wpdiscuz-item .wpdiscuz-rating > input:not(:checked) ~ label:hover ~ label, #wpdcom .wpdiscuz-item .wpdiscuz-rating > input:not(:checked) ~ label:hover ~ label{color:#FFED85}#wpdcom .wpdiscuz-item .wpdiscuz-rating > input:checked ~ label:hover, #wpdcom .wpdiscuz-item .wpdiscuz-rating > input:checked ~ label:hover, #wpdcom .wpdiscuz-item .wpdiscuz-rating > label:hover ~ input:checked ~ label, #wpdcom .wpdiscuz-item .wpdiscuz-rating > input:checked + label:hover ~ label, #wpdcom .wpdiscuz-item .wpdiscuz-rating > input:checked ~ label:hover ~ label, .wpd-custom-field .wcf-active-star, #wpdcom .wpdiscuz-item .wpdiscuz-rating > input:checked ~ label{color:#FFD700}#wpd-post-rating .wpd-rating-wrap .wpd-rating-stars svg .wpd-star{fill:#DDDDDD}#wpd-post-rating .wpd-rating-wrap .wpd-rating-stars svg .wpd-active{fill:#FFD700}#wpd-post-rating .wpd-rating-wrap .wpd-rate-starts svg .wpd-star{fill:#DDDDDD}#wpd-post-rating .wpd-rating-wrap .wpd-rate-starts:hover svg .wpd-star{fill:#FFED85}#wpd-post-rating.wpd-not-rated .wpd-rating-wrap .wpd-rate-starts svg:hover ~ svg .wpd-star{fill:#DDDDDD}.wpdiscuz-post-rating-wrap .wpd-rating .wpd-rating-wrap .wpd-rating-stars svg .wpd-star{fill:#DDDDDD}.wpdiscuz-post-rating-wrap .wpd-rating .wpd-rating-wrap .wpd-rating-stars svg .wpd-active{fill:#FFD700}#wpdcom .wpd-comment .wpd-follow-active{color:#ff7a00}#wpdcom .page-numbers{color:#555;border:#555 1px solid}#wpdcom span.current{background:#555}#wpdcom.wpd-layout-1 .wpd-new-loaded-comment > .wpd-comment-wrap > .wpd-comment-right{background:#FFFAD6}#wpdcom.wpd-layout-2 .wpd-new-loaded-comment.wpd-comment > .wpd-comment-wrap > .wpd-comment-right{background:#FFFAD6}#wpdcom.wpd-layout-2 .wpd-new-loaded-comment.wpd-comment.wpd-reply > .wpd-comment-wrap > .wpd-comment-right{background:transparent}#wpdcom.wpd-layout-2 .wpd-new-loaded-comment.wpd-comment.wpd-reply > .wpd-comment-wrap{background:#FFFAD6}#wpdcom.wpd-layout-3 .wpd-new-loaded-comment.wpd-comment > .wpd-comment-wrap > .wpd-comment-right{background:#FFFAD6}#wpdcom .wpd-follow:hover i, #wpdcom .wpd-unfollow:hover i, #wpdcom .wpd-comment .wpd-follow-active:hover i{color:#00B38F}#wpdcom .wpdiscuz-readmore{cursor:pointer;color:#00B38F}.wpd-custom-field .wcf-pasiv-star, #wpcomm .wpdiscuz-item .wpdiscuz-rating > label{color:#DDDDDD}.wpd-wrapper .wpd-list-item.wpd-active{border-top:3px solid #00B38F}#wpdcom.wpd-layout-2 .wpd-comment.wpd-reply.wpd-unapproved-comment .wpd-comment-wrap{border-left:3px solid #FFFAD6}#wpdcom.wpd-layout-3 .wpd-comment.wpd-reply.wpd-unapproved-comment .wpd-comment-right{border-left:1px solid #FFFAD6}#wpdcom .wpd-prim-button{background-color:#07B290;color:#FFFFFF}#wpdcom .wpd_label__check i.wpdicon-on{color:#07B290;border:1px solid #83d9c8}#wpd-bubble-wrapper #wpd-bubble-all-comments-count{color:#1DB99A}#wpd-bubble-wrapper > div{background-color:#1DB99A}#wpd-bubble-wrapper > #wpd-bubble #wpd-bubble-add-message{background-color:#1DB99A}#wpd-bubble-wrapper > #wpd-bubble #wpd-bubble-add-message::before{border-left-color:#1DB99A;border-right-color:#1DB99A}#wpd-bubble-wrapper.wpd-right-corner > #wpd-bubble #wpd-bubble-add-message::before{border-left-color:#1DB99A;border-right-color:#1DB99A}.wpd-inline-icon-wrapper path.wpd-inline-icon-first{fill:#1DB99A}.wpd-inline-icon-count{background-color:#1DB99A}.wpd-inline-icon-count::before{border-right-color:#1DB99A}.wpd-inline-form-wrapper::before{border-bottom-color:#1DB99A}.wpd-inline-form-question{background-color:#1DB99A}.wpd-inline-form{background-color:#1DB99A}.wpd-last-inline-comments-wrapper{border-color:#1DB99A}.wpd-last-inline-comments-wrapper::before{border-bottom-color:#1DB99A}.wpd-last-inline-comments-wrapper .wpd-view-all-inline-comments{background:#1DB99A}.wpd-last-inline-comments-wrapper .wpd-view-all-inline-comments:hover,.wpd-last-inline-comments-wrapper .wpd-view-all-inline-comments:active,.wpd-last-inline-comments-wrapper .wpd-view-all-inline-comments:focus{background-color:#1DB99A}#wpdcom .ql-snow .ql-tooltip[data-mode="link"]::before{content:"输入链接："}#wpdcom .ql-snow .ql-tooltip.ql-editing a.ql-action::after{content:"保存"}.comments-area{width:auto}
</style>
<link rel="stylesheet" id="wpdiscuz-fa-css" href="./TCMalloc_files/fa.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wpdiscuz-combo-css-css" href="./TCMalloc_files/wpdiscuz-combo.min.css" type="text/css" media="all">
<link rel="stylesheet" id="typology-fonts-css" href="./TCMalloc_files/css" type="text/css" media="all">
<link rel="stylesheet" id="typology-main-css" href="./TCMalloc_files/min.css" type="text/css" media="all">
<style id="typology-main-inline-css" type="text/css">
body,blockquote:before, q:before{font-family: '';font-weight: ;}body,.typology-action-button .sub-menu{color:#444444;}body{background:#f8f8f8;font-size: 1.6rem;}.typology-fake-bg{background:#f8f8f8;}.typology-sidebar,.typology-section{background:#ffffff;}h1, h2, h3, h4, h5, h6,.h1, .h2, .h3, .h4, .h5, .h6,.submit,.mks_read_more a,input[type="submit"],input[type="button"],a.mks_button,.cover-letter,.post-letter,.woocommerce nav.woocommerce-pagination ul li span,.woocommerce nav.woocommerce-pagination ul li a,.woocommerce div.product .woocommerce-tabs ul.tabs li,.typology-pagination a,.typology-pagination span,.comment-author .fn,.post-date-month,.typology-button-social,.meks-instagram-follow-link a,.mks_autor_link_wrap a,.entry-pre-title,.typology-button,button,.wp-block-cover .wp-block-cover-image-text, .wp-block-cover .wp-block-cover-text, .wp-block-cover h2, .wp-block-cover-image .wp-block-cover-image-text, .wp-block-cover-image .wp-block-cover-text, .wp-block-cover-image h2,.wp-block-button__link,body div.wpforms-container-full .wpforms-form input[type=submit], body div.wpforms-container-full .wpforms-form button[type=submit], body div.wpforms-container-full .wpforms-form .wpforms-page-button {font-family: '';font-weight: ;}.typology-header .typology-nav{font-family: '';font-weight: ;}.typology-cover .entry-title,.typology-cover h1 { font-size: 6.4rem;}h1, .h1 {font-size: 3.6rem;}h2, .h2 {font-size: 3.0rem;}h3, .h3 {font-size: 2.5rem;}h4, .h4 {font-size: 2.0rem;}h5, .h5,.typology-layout-c.post-image-on .entry-title,blockquote, q {font-size: 1.6rem;}h6, .h6 {font-size: 1.4rem;}.widget{font-size: 1.4rem;}.typology-header .typology-nav a{font-size: 1.1rem;}.typology-layout-b .post-date-hidden,.meta-item{font-size: 1.3rem;}.post-letter {font-size: 26.0rem;}.typology-layout-c .post-letter{height: 26.0rem;}.cover-letter {font-size: 60.0rem;}h1, h2, h3, h4, h5, h6,.h1, .h2, .h3, .h4, .h5, .h6,h1 a,h2 a,h3 a,h4 a,h5 a,h6 a,.post-date-month{color:#333333;}.typology-single-sticky a{color:#444444;}.entry-title a:hover,.typology-single-sticky a:hover{color:#c62641;}.bypostauthor .comment-author:before,#cancel-comment-reply-link:after{background:#c62641;}a,.widget .textwidget a,.typology-layout-b .post-date-hidden{color: #c62641;}.single .typology-section:first-child .section-content, .section-content-page, .section-content.section-content-a{max-width: 800px;}.typology-header{height:110px;}.typology-header-sticky-on .typology-header{background:#c62641;}.cover-letter{padding-top: 110px;}.site-title a,.typology-site-description{color: #ffffff;}.typology-header .typology-nav,.typology-header .typology-nav > li > a{color: #ffffff;}.typology-header .typology-nav .sub-menu a{ color:#444444;}.typology-header .typology-nav .sub-menu a:hover{color: #c62641;}.typology-action-button .sub-menu ul a:before{background: #c62641;}.sub-menu .current-menu-item a{color:#c62641;}.dot,.typology-header .typology-nav .sub-menu{background:#ffffff;}.typology-header .typology-main-navigation .sub-menu .current-menu-ancestor > a,.typology-header .typology-main-navigation .sub-menu .current-menu-item > a{color: #c62641;}.typology-header-wide .slot-l{left: 35px;}.typology-header-wide .slot-r{right: 20px;}.meta-item,.meta-item span,.meta-item a,.comment-metadata a{color: #888888;}.comment-meta .url,.meta-item a:hover{color:#333333;}.typology-post:after,.section-title:after,.typology-pagination:before{background:rgba(51,51,51,0.2);}.typology-layout-b .post-date-day,.typology-outline-nav li a:hover,.style-timeline .post-date-day{color:#c62641;}.typology-layout-b .post-date:after,blockquote:before,q:before{background:#c62641;}.typology-sticky-c,.typology-sticky-to-top span,.sticky-author-date{color: #888888;}.typology-outline-nav li a{color: #444444;}.typology-post.typology-layout-b:before, .section-content-b .typology-ad-between-posts:before{background:rgba(68,68,68,0.1);}.submit,.mks_read_more a,input[type="submit"],input[type="button"],a.mks_button,.typology-button,.submit,.typology-button-social,.page-template-template-authors .typology-author .typology-button-social,.widget .mks_autor_link_wrap a,.widget .meks-instagram-follow-link a,.widget .mks_read_more a,button,body div.wpforms-container-full .wpforms-form input[type=submit], body div.wpforms-container-full .wpforms-form button[type=submit], body div.wpforms-container-full .wpforms-form .wpforms-page-button {color:#ffffff;background: #c62641;border:1px solid #c62641;}body div.wpforms-container-full .wpforms-form input[type=submit]:hover, body div.wpforms-container-full .wpforms-form input[type=submit]:focus, body div.wpforms-container-full .wpforms-form input[type=submit]:active, body div.wpforms-container-full .wpforms-form button[type=submit]:hover, body div.wpforms-container-full .wpforms-form button[type=submit]:focus, body div.wpforms-container-full .wpforms-form button[type=submit]:active, body div.wpforms-container-full .wpforms-form .wpforms-page-button:hover, body div.wpforms-container-full .wpforms-form .wpforms-page-button:active, body div.wpforms-container-full .wpforms-form .wpforms-page-button:focus {color:#ffffff;background: #c62641;border:1px solid #c62641;}.page-template-template-authors .typology-author .typology-icon-social:hover {border:1px solid #c62641;}.button-invert{color:#c62641;background:transparent;}.widget .mks_autor_link_wrap a:hover,.widget .meks-instagram-follow-link a:hover,.widget .mks_read_more a:hover{color:#ffffff;}.typology-cover{min-height: 240px;}.typology-cover-empty{height:209px;min-height:209px;}.typology-fake-bg .typology-section:first-child {top: -99px;}.typology-flat .typology-cover-empty{height:110px;}.typology-flat .typology-cover{min-height:110px;}.typology-cover-empty,.typology-cover,.typology-header-sticky{background: #c62641;;}.typology-cover-overlay:after{background: rgba(198,38,65,0.9);}.typology-sidebar-header{background:#c62641;}.typology-cover,.typology-cover .entry-title,.typology-cover .entry-title a,.typology-cover .meta-item,.typology-cover .meta-item span,.typology-cover .meta-item a,.typology-cover h1,.typology-cover h2,.typology-cover h3{color: #ffffff;}.typology-cover .typology-button{color: #c62641;background:#ffffff;border:1px solid #ffffff;}.typology-cover .button-invert{color: #ffffff;background: transparent;}.typology-cover-slider .owl-dots .owl-dot span{background:#ffffff;}.typology-outline-nav li:before,.widget ul li:before{background:#c62641;}.widget a{color:#444444;}.widget a:hover,.widget_calendar table tbody td a,.entry-tags a:hover,.wp-block-tag-cloud a:hover{color:#c62641;}.widget_calendar table tbody td a:hover,.widget table td,.entry-tags a,.wp-block-tag-cloud a{color:#444444;}.widget table,.widget table td,.widget_calendar table thead th,table,td, th{border-color: rgba(68,68,68,0.3);}.widget ul li,.widget .recentcomments{color:#444444;}.widget .post-date{color:#888888;}#today{background:rgba(68,68,68,0.1);}.typology-pagination .current, .typology-pagination .infinite-scroll a, .typology-pagination .load-more a, .typology-pagination .nav-links .next, .typology-pagination .nav-links .prev, .typology-pagination .next a, .typology-pagination .prev a{color: #ffffff;background:#333333;}.typology-pagination a, .typology-pagination span{color: #333333;border:1px solid #333333;}.typology-footer{background:#f8f8f8;color:#aaaaaa;}.typology-footer h1,.typology-footer h2,.typology-footer h3,.typology-footer h4,.typology-footer h5,.typology-footer h6,.typology-footer .post-date-month{color:#aaaaaa;}.typology-count{background: #c62641;}.typology-footer a, .typology-footer .widget .textwidget a{color: #888888;}input[type="text"], input[type="email"],input[type=search], input[type="url"], input[type="tel"], input[type="number"], input[type="date"], input[type="password"], textarea, select{border-color:rgba(68,68,68,0.2);}blockquote:after, blockquote:before, q:after, q:before{-webkit-box-shadow: 0 0 0 10px #ffffff;box-shadow: 0 0 0 10px #ffffff;}pre,.entry-content #mc_embed_signup{background: rgba(68,68,68,0.1);}.wp-block-button__link{background: #c62641;color: #ffffff; }.wp-block-image figcaption,.wp-block-audio figcaption{color: #444444;}.wp-block-pullquote:not(.is-style-solid-color) blockquote{border-top:2px solid #444444;border-bottom:2px solid #444444;}.wp-block-pullquote.is-style-solid-color{background: #c62641;color: #ffffff; }.wp-block-separator{border-color: rgba(68,68,68,0.3);}body.wp-editor{background:#ffffff;}.has-small-font-size{ font-size: 1.3rem;}.has-large-font-size{ font-size: 1.9rem;}.has-huge-font-size{ font-size: 2.2rem;}@media(min-width: 801px){.has-small-font-size{ font-size: 1.3rem;}.has-normal-font-size{ font-size: 1.6rem;}.has-large-font-size{ font-size: 2.2rem;}.has-huge-font-size{ font-size: 2.9rem;}}.has-typology-acc-background-color{ background-color: #c62641;}.has-typology-acc-color{ color: #c62641;}.has-typology-txt-background-color{ background-color: #444444;}.has-typology-txt-color{ color: #444444;}.has-typology-meta-background-color{ background-color: #888888;}.has-typology-meta-color{ color: #888888;}.has-typology-bg-background-color{ background-color: #ffffff;}.has-typology-bg-color{ color: #ffffff;}.site-title{text-transform: none;}.typology-site-description{text-transform: none;}.typology-nav{text-transform: none;}h1, h2, h3, h4, h5, h6, .wp-block-cover-text, .wp-block-cover-image-text{text-transform: none;}.section-title{text-transform: none;}.widget-title{text-transform: none;}.meta-item{text-transform: none;}.typology-button{text-transform: none;}
</style>
<link rel="stylesheet" id="typology_child_style-css" href="./TCMalloc_files/style(2).css" type="text/css" media="screen">
<link rel="stylesheet" id="meks-author-widget-css" href="./TCMalloc_files/style(3).css" type="text/css" media="all">
<link rel="stylesheet" id="meks-social-widget-css" href="./TCMalloc_files/style(4).css" type="text/css" media="all">
<link rel="stylesheet" id="meks-themeforest-widget-css" href="./TCMalloc_files/style(5).css" type="text/css" media="all">
<link rel="stylesheet" id="katex-css" href="./TCMalloc_files/katex.min.css" type="text/css" media="all">
<link rel="stylesheet" id="fixedtoc-style-css" href="./TCMalloc_files/ftoc.min.css" type="text/css" media="all">
<style id="fixedtoc-style-inline-css" type="text/css">
#ftwp-container.ftwp-wrap #ftwp-contents { width: auto; height: auto; } #ftwp-container.ftwp-wrap #ftwp-trigger { width: 45px; height: 45px; font-size: 27px; } #ftwp-container #ftwp-trigger.ftwp-border-thin { font-size: 26.5px; } #ftwp-container.ftwp-wrap #ftwp-header { font-size: 22px; font-family: inherit; } #ftwp-container.ftwp-wrap #ftwp-header-title { font-weight: bold; } #ftwp-container.ftwp-wrap #ftwp-list { font-size: 14px; font-family: inherit; } #ftwp-container #ftwp-list.ftwp-liststyle-decimal .ftwp-anchor::before { font-size: 14px; } #ftwp-container #ftwp-list.ftwp-strong-first>.ftwp-item>.ftwp-anchor .ftwp-text { font-size: 15.4px; } #ftwp-container #ftwp-list.ftwp-strong-first.ftwp-liststyle-decimal>.ftwp-item>.ftwp-anchor::before { font-size: 15.4px; } #ftwp-container.ftwp-wrap #ftwp-trigger { color: #333; background: rgba(243,243,243,0.95); } #ftwp-container.ftwp-wrap #ftwp-trigger { border-color: rgba(51,51,51,0.95); } #ftwp-container.ftwp-wrap #ftwp-header { color: #333; background: rgba(243,243,243,0.95); } #ftwp-container.ftwp-wrap #ftwp-contents:hover #ftwp-header { background: #f3f3f3; } #ftwp-container.ftwp-wrap #ftwp-list { color: #333; background: rgba(243,243,243,0.95); } #ftwp-container.ftwp-wrap #ftwp-contents:hover #ftwp-list { background: #f3f3f3; } #ftwp-container.ftwp-wrap #ftwp-list .ftwp-anchor:hover { color: #00a368; } #ftwp-container.ftwp-wrap #ftwp-list .ftwp-anchor:focus, #ftwp-container.ftwp-wrap #ftwp-list .ftwp-active, #ftwp-container.ftwp-wrap #ftwp-list .ftwp-active:hover { color: #fff; } #ftwp-container.ftwp-wrap #ftwp-list .ftwp-text::before { background: rgba(221,51,51,0.95); } .ftwp-heading-target::before { background: rgba(221,51,51,0.95); } #ftwp-container #ftwp-list.ftwp-effect-fade .ftwp-anchor.ftwp-active, #ftwp-container #ftwp-list.ftwp-effect-fade .ftwp-anchor:focus { background: rgba(221,51,51,0.95); }
#ftwp-container.ftwp-fixed-to-post { z-index: 9001; } #ftwp-trigger { min-width: 50px; width:50px; height:50px; }
</style>
<link rel="stylesheet" id="wbui-css-css" href="./TCMalloc_files/wbui.css" type="text/css" media="all">
<link rel="stylesheet" id="wbs-dwqr-css-css" href="./TCMalloc_files/wbp_donate.css" type="text/css" media="all">
<link rel="stylesheet" id="enlighterjs-css" href="./TCMalloc_files/enlighterjs.min.css" type="text/css" media="all">
<script type="text/javascript" src="./TCMalloc_files/jquery.min.js" id="jquery-core-js"></script>
<script type="text/javascript" src="./TCMalloc_files/jquery-migrate.min.js" id="jquery-migrate-js"></script>
<script type="text/javascript" id="to-top-js-extra">
/* <![CDATA[ */
var to_top_options = {"scroll_offset":"100","icon_opacity":"50","style":"icon","icon_type":"dashicons-arrow-up-alt2","icon_color":"#ffffff","icon_bg_color":"#000000","icon_size":"32","border_radius":"5","image":"https:\/\/wallenwang.com\/wp-content\/plugins\/to-top\/admin\/images\/default.png","image_width":"65","image_alt":"","location":"bottom-right","margin_x":"20","margin_y":"20","show_on_admin":"0","enable_autohide":"0","autohide_time":"2","enable_hide_small_device":"0","small_device_max_width":"640","reset":"0"};
/* ]]> */
</script>
<script async="" type="text/javascript" src="./TCMalloc_files/to-top-public.js" id="to-top-js"></script>
<script crossorigin="anonymous" type="text/javascript" src="./TCMalloc_files/35d38f6dc8.js" id="font-awesome-official-js"></script><style media="all" id="fa-v4-font-face">/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */@font-face{font-family:"FontAwesome";font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.svg#fontawesome) format("svg")}@font-face{font-family:"FontAwesome";font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.svg#fontawesome) format("svg")}@font-face{font-family:"FontAwesome";font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.svg#fontawesome) format("svg");unicode-range:U+f004-f005,U+f007,U+f017,U+f022,U+f024,U+f02e,U+f03e,U+f044,U+f057-f059,U+f06e,U+f070,U+f075,U+f07b-f07c,U+f080,U+f086,U+f089,U+f094,U+f09d,U+f0a0,U+f0a4-f0a7,U+f0c5,U+f0c7-f0c8,U+f0e0,U+f0eb,U+f0f3,U+f0f8,U+f0fe,U+f111,U+f118-f11a,U+f11c,U+f133,U+f144,U+f146,U+f14a,U+f14d-f14e,U+f150-f152,U+f15b-f15c,U+f164-f165,U+f185-f186,U+f191-f192,U+f1ad,U+f1c1-f1c9,U+f1cd,U+f1d8,U+f1e3,U+f1ea,U+f1f6,U+f1f9,U+f20a,U+f247-f249,U+f24d,U+f254-f25b,U+f25d,U+f271-f274,U+f279,U+f28b,U+f28d,U+f2b5-f2b6,U+f2b9,U+f2bb,U+f2bd,U+f2c1-f2c2,U+f2d0,U+f2d2,U+f2dc,U+f2ed,U+f3a5,U+f3d1,U+f410}@font-face{font-family:"FontAwesome";font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-v4deprecations.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-v4deprecations.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-v4deprecations.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-v4deprecations.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-v4deprecations.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-v4deprecations.svg#fontawesome) format("svg");unicode-range:U+f003,U+f006,U+f014,U+f016,U+f01a-f01b,U+f01d,U+f040,U+f045-f047,U+f05c-f05d,U+f07d-f07e,U+f087-f088,U+f08a-f08b,U+f08e,U+f090,U+f096-f097,U+f0a2,U+f0e4-f0e6,U+f0ec-f0ee,U+f0f5-f0f7,U+f10c,U+f112,U+f114-f115,U+f11d,U+f123,U+f132,U+f145,U+f147-f149,U+f14c,U+f166,U+f16a,U+f172,U+f175-f178,U+f18e,U+f190,U+f196,U+f1b1,U+f1d9,U+f1db,U+f1f7,U+f20c,U+f219,U+f230,U+f24a,U+f250,U+f278,U+f27b,U+f283,U+f28c,U+f28e,U+f29b-f29c,U+f2b7,U+f2ba,U+f2bc,U+f2be,U+f2c0,U+f2c3,U+f2d3-f2d4}</style><style media="all" id="fa-v4-shims">/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */.fa.fa-glass:before{content:"\f000"}.fa.fa-meetup{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-star-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-star-o:before{content:"\f005"}.fa.fa-close:before,.fa.fa-remove:before{content:"\f00d"}.fa.fa-gear:before{content:"\f013"}.fa.fa-trash-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-trash-o:before{content:"\f2ed"}.fa.fa-file-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-o:before{content:"\f15b"}.fa.fa-clock-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-clock-o:before{content:"\f017"}.fa.fa-arrow-circle-o-down{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-arrow-circle-o-down:before{content:"\f358"}.fa.fa-arrow-circle-o-up{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-arrow-circle-o-up:before{content:"\f35b"}.fa.fa-play-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-play-circle-o:before{content:"\f144"}.fa.fa-repeat:before,.fa.fa-rotate-right:before{content:"\f01e"}.fa.fa-refresh:before{content:"\f021"}.fa.fa-list-alt{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-dedent:before{content:"\f03b"}.fa.fa-video-camera:before{content:"\f03d"}.fa.fa-picture-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-picture-o:before{content:"\f03e"}.fa.fa-photo{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-photo:before{content:"\f03e"}.fa.fa-image{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-image:before{content:"\f03e"}.fa.fa-pencil:before{content:"\f303"}.fa.fa-map-marker:before{content:"\f3c5"}.fa.fa-pencil-square-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-pencil-square-o:before{content:"\f044"}.fa.fa-share-square-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-share-square-o:before{content:"\f14d"}.fa.fa-check-square-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-check-square-o:before{content:"\f14a"}.fa.fa-arrows:before{content:"\f0b2"}.fa.fa-times-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-times-circle-o:before{content:"\f057"}.fa.fa-check-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-check-circle-o:before{content:"\f058"}.fa.fa-mail-forward:before{content:"\f064"}.fa.fa-expand:before{content:"\f424"}.fa.fa-compress:before{content:"\f422"}.fa.fa-eye,.fa.fa-eye-slash{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-warning:before{content:"\f071"}.fa.fa-calendar:before{content:"\f073"}.fa.fa-arrows-v:before{content:"\f338"}.fa.fa-arrows-h:before{content:"\f337"}.fa.fa-bar-chart{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-bar-chart:before{content:"\f080"}.fa.fa-bar-chart-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-bar-chart-o:before{content:"\f080"}.fa.fa-facebook-square,.fa.fa-twitter-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-gears:before{content:"\f085"}.fa.fa-thumbs-o-up{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-thumbs-o-up:before{content:"\f164"}.fa.fa-thumbs-o-down{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-thumbs-o-down:before{content:"\f165"}.fa.fa-heart-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-heart-o:before{content:"\f004"}.fa.fa-sign-out:before{content:"\f2f5"}.fa.fa-linkedin-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-linkedin-square:before{content:"\f08c"}.fa.fa-thumb-tack:before{content:"\f08d"}.fa.fa-external-link:before{content:"\f35d"}.fa.fa-sign-in:before{content:"\f2f6"}.fa.fa-github-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-lemon-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-lemon-o:before{content:"\f094"}.fa.fa-square-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-square-o:before{content:"\f0c8"}.fa.fa-bookmark-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-bookmark-o:before{content:"\f02e"}.fa.fa-facebook,.fa.fa-twitter{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-facebook:before{content:"\f39e"}.fa.fa-facebook-f{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-facebook-f:before{content:"\f39e"}.fa.fa-github{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-credit-card{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-feed:before{content:"\f09e"}.fa.fa-hdd-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hdd-o:before{content:"\f0a0"}.fa.fa-hand-o-right{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-o-right:before{content:"\f0a4"}.fa.fa-hand-o-left{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-o-left:before{content:"\f0a5"}.fa.fa-hand-o-up{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-o-up:before{content:"\f0a6"}.fa.fa-hand-o-down{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-o-down:before{content:"\f0a7"}.fa.fa-arrows-alt:before{content:"\f31e"}.fa.fa-group:before{content:"\f0c0"}.fa.fa-chain:before{content:"\f0c1"}.fa.fa-scissors:before{content:"\f0c4"}.fa.fa-files-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-files-o:before{content:"\f0c5"}.fa.fa-floppy-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-floppy-o:before{content:"\f0c7"}.fa.fa-navicon:before,.fa.fa-reorder:before{content:"\f0c9"}.fa.fa-google-plus,.fa.fa-google-plus-square,.fa.fa-pinterest,.fa.fa-pinterest-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-google-plus:before{content:"\f0d5"}.fa.fa-money{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-money:before{content:"\f3d1"}.fa.fa-unsorted:before{content:"\f0dc"}.fa.fa-sort-desc:before{content:"\f0dd"}.fa.fa-sort-asc:before{content:"\f0de"}.fa.fa-linkedin{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-linkedin:before{content:"\f0e1"}.fa.fa-rotate-left:before{content:"\f0e2"}.fa.fa-legal:before{content:"\f0e3"}.fa.fa-dashboard:before,.fa.fa-tachometer:before{content:"\f3fd"}.fa.fa-comment-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-comment-o:before{content:"\f075"}.fa.fa-comments-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-comments-o:before{content:"\f086"}.fa.fa-flash:before{content:"\f0e7"}.fa.fa-clipboard,.fa.fa-paste{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-paste:before{content:"\f328"}.fa.fa-lightbulb-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-lightbulb-o:before{content:"\f0eb"}.fa.fa-exchange:before{content:"\f362"}.fa.fa-cloud-download:before{content:"\f381"}.fa.fa-cloud-upload:before{content:"\f382"}.fa.fa-bell-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-bell-o:before{content:"\f0f3"}.fa.fa-cutlery:before{content:"\f2e7"}.fa.fa-file-text-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-text-o:before{content:"\f15c"}.fa.fa-building-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-building-o:before{content:"\f1ad"}.fa.fa-hospital-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hospital-o:before{content:"\f0f8"}.fa.fa-tablet:before{content:"\f3fa"}.fa.fa-mobile-phone:before,.fa.fa-mobile:before{content:"\f3cd"}.fa.fa-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-circle-o:before{content:"\f111"}.fa.fa-mail-reply:before{content:"\f3e5"}.fa.fa-github-alt{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-folder-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-folder-o:before{content:"\f07b"}.fa.fa-folder-open-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-folder-open-o:before{content:"\f07c"}.fa.fa-smile-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-smile-o:before{content:"\f118"}.fa.fa-frown-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-frown-o:before{content:"\f119"}.fa.fa-meh-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-meh-o:before{content:"\f11a"}.fa.fa-keyboard-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-keyboard-o:before{content:"\f11c"}.fa.fa-flag-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-flag-o:before{content:"\f024"}.fa.fa-mail-reply-all:before{content:"\f122"}.fa.fa-star-half-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-star-half-o:before{content:"\f089"}.fa.fa-star-half-empty{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-star-half-empty:before{content:"\f089"}.fa.fa-star-half-full{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-star-half-full:before{content:"\f089"}.fa.fa-code-fork:before{content:"\f126"}.fa.fa-chain-broken:before{content:"\f127"}.fa.fa-shield:before{content:"\f3ed"}.fa.fa-calendar-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-calendar-o:before{content:"\f133"}.fa.fa-css3,.fa.fa-html5,.fa.fa-maxcdn{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-ticket:before{content:"\f3ff"}.fa.fa-minus-square-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-minus-square-o:before{content:"\f146"}.fa.fa-level-up:before{content:"\f3bf"}.fa.fa-level-down:before{content:"\f3be"}.fa.fa-pencil-square:before{content:"\f14b"}.fa.fa-external-link-square:before{content:"\f360"}.fa.fa-compass{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-caret-square-o-down{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-caret-square-o-down:before{content:"\f150"}.fa.fa-toggle-down{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-toggle-down:before{content:"\f150"}.fa.fa-caret-square-o-up{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-caret-square-o-up:before{content:"\f151"}.fa.fa-toggle-up{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-toggle-up:before{content:"\f151"}.fa.fa-caret-square-o-right{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-caret-square-o-right:before{content:"\f152"}.fa.fa-toggle-right{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-toggle-right:before{content:"\f152"}.fa.fa-eur:before,.fa.fa-euro:before{content:"\f153"}.fa.fa-gbp:before{content:"\f154"}.fa.fa-dollar:before,.fa.fa-usd:before{content:"\f155"}.fa.fa-inr:before,.fa.fa-rupee:before{content:"\f156"}.fa.fa-cny:before,.fa.fa-jpy:before,.fa.fa-rmb:before,.fa.fa-yen:before{content:"\f157"}.fa.fa-rouble:before,.fa.fa-rub:before,.fa.fa-ruble:before{content:"\f158"}.fa.fa-krw:before,.fa.fa-won:before{content:"\f159"}.fa.fa-bitcoin,.fa.fa-btc{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-bitcoin:before{content:"\f15a"}.fa.fa-file-text:before{content:"\f15c"}.fa.fa-sort-alpha-asc:before{content:"\f15d"}.fa.fa-sort-alpha-desc:before{content:"\f881"}.fa.fa-sort-amount-asc:before{content:"\f160"}.fa.fa-sort-amount-desc:before{content:"\f884"}.fa.fa-sort-numeric-asc:before{content:"\f162"}.fa.fa-sort-numeric-desc:before{content:"\f886"}.fa.fa-xing,.fa.fa-xing-square,.fa.fa-youtube,.fa.fa-youtube-play,.fa.fa-youtube-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-youtube-play:before{content:"\f167"}.fa.fa-adn,.fa.fa-bitbucket,.fa.fa-bitbucket-square,.fa.fa-dropbox,.fa.fa-flickr,.fa.fa-instagram,.fa.fa-stack-overflow{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-bitbucket-square:before{content:"\f171"}.fa.fa-tumblr,.fa.fa-tumblr-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-long-arrow-down:before{content:"\f309"}.fa.fa-long-arrow-up:before{content:"\f30c"}.fa.fa-long-arrow-left:before{content:"\f30a"}.fa.fa-long-arrow-right:before{content:"\f30b"}.fa.fa-android,.fa.fa-apple,.fa.fa-dribbble,.fa.fa-foursquare,.fa.fa-gittip,.fa.fa-gratipay,.fa.fa-linux,.fa.fa-skype,.fa.fa-trello,.fa.fa-windows{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-gittip:before{content:"\f184"}.fa.fa-sun-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-sun-o:before{content:"\f185"}.fa.fa-moon-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-moon-o:before{content:"\f186"}.fa.fa-pagelines,.fa.fa-renren,.fa.fa-stack-exchange,.fa.fa-vk,.fa.fa-weibo{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-arrow-circle-o-right{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-arrow-circle-o-right:before{content:"\f35a"}.fa.fa-arrow-circle-o-left{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-arrow-circle-o-left:before{content:"\f359"}.fa.fa-caret-square-o-left{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-caret-square-o-left:before{content:"\f191"}.fa.fa-toggle-left{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-toggle-left:before{content:"\f191"}.fa.fa-dot-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-dot-circle-o:before{content:"\f192"}.fa.fa-vimeo-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-try:before,.fa.fa-turkish-lira:before{content:"\f195"}.fa.fa-plus-square-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-plus-square-o:before{content:"\f0fe"}.fa.fa-openid,.fa.fa-slack,.fa.fa-wordpress{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-bank:before,.fa.fa-institution:before{content:"\f19c"}.fa.fa-mortar-board:before{content:"\f19d"}.fa.fa-delicious,.fa.fa-digg,.fa.fa-drupal,.fa.fa-google,.fa.fa-joomla,.fa.fa-pied-piper-alt,.fa.fa-pied-piper-pp,.fa.fa-reddit,.fa.fa-reddit-square,.fa.fa-stumbleupon,.fa.fa-stumbleupon-circle,.fa.fa-yahoo{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-spoon:before{content:"\f2e5"}.fa.fa-behance,.fa.fa-behance-square,.fa.fa-steam,.fa.fa-steam-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-automobile:before{content:"\f1b9"}.fa.fa-envelope-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-envelope-o:before{content:"\f0e0"}.fa.fa-deviantart,.fa.fa-soundcloud,.fa.fa-spotify{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-file-pdf-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-pdf-o:before{content:"\f1c1"}.fa.fa-file-word-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-word-o:before{content:"\f1c2"}.fa.fa-file-excel-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-excel-o:before{content:"\f1c3"}.fa.fa-file-powerpoint-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-powerpoint-o:before{content:"\f1c4"}.fa.fa-file-image-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-image-o:before{content:"\f1c5"}.fa.fa-file-photo-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-photo-o:before{content:"\f1c5"}.fa.fa-file-picture-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-picture-o:before{content:"\f1c5"}.fa.fa-file-archive-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-archive-o:before{content:"\f1c6"}.fa.fa-file-zip-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-zip-o:before{content:"\f1c6"}.fa.fa-file-audio-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-audio-o:before{content:"\f1c7"}.fa.fa-file-sound-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-sound-o:before{content:"\f1c7"}.fa.fa-file-video-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-video-o:before{content:"\f1c8"}.fa.fa-file-movie-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-movie-o:before{content:"\f1c8"}.fa.fa-file-code-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-file-code-o:before{content:"\f1c9"}.fa.fa-codepen,.fa.fa-jsfiddle,.fa.fa-vine{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-life-bouy,.fa.fa-life-ring{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-life-bouy:before{content:"\f1cd"}.fa.fa-life-buoy{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-life-buoy:before{content:"\f1cd"}.fa.fa-life-saver{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-life-saver:before{content:"\f1cd"}.fa.fa-support{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-support:before{content:"\f1cd"}.fa.fa-circle-o-notch:before{content:"\f1ce"}.fa.fa-ra,.fa.fa-rebel{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-ra:before{content:"\f1d0"}.fa.fa-resistance{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-resistance:before{content:"\f1d0"}.fa.fa-empire,.fa.fa-ge{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-ge:before{content:"\f1d1"}.fa.fa-git,.fa.fa-git-square,.fa.fa-hacker-news,.fa.fa-y-combinator-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-y-combinator-square:before{content:"\f1d4"}.fa.fa-yc-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-yc-square:before{content:"\f1d4"}.fa.fa-qq,.fa.fa-tencent-weibo,.fa.fa-wechat,.fa.fa-weixin{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-wechat:before{content:"\f1d7"}.fa.fa-send:before{content:"\f1d8"}.fa.fa-paper-plane-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-paper-plane-o:before{content:"\f1d8"}.fa.fa-send-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-send-o:before{content:"\f1d8"}.fa.fa-circle-thin{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-circle-thin:before{content:"\f111"}.fa.fa-header:before{content:"\f1dc"}.fa.fa-sliders:before{content:"\f1de"}.fa.fa-futbol-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-futbol-o:before{content:"\f1e3"}.fa.fa-soccer-ball-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-soccer-ball-o:before{content:"\f1e3"}.fa.fa-slideshare,.fa.fa-twitch,.fa.fa-yelp{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-newspaper-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-newspaper-o:before{content:"\f1ea"}.fa.fa-cc-amex,.fa.fa-cc-discover,.fa.fa-cc-mastercard,.fa.fa-cc-paypal,.fa.fa-cc-stripe,.fa.fa-cc-visa,.fa.fa-google-wallet,.fa.fa-paypal{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-bell-slash-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-bell-slash-o:before{content:"\f1f6"}.fa.fa-trash:before{content:"\f2ed"}.fa.fa-copyright{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-eyedropper:before{content:"\f1fb"}.fa.fa-area-chart:before{content:"\f1fe"}.fa.fa-pie-chart:before{content:"\f200"}.fa.fa-line-chart:before{content:"\f201"}.fa.fa-angellist,.fa.fa-ioxhost,.fa.fa-lastfm,.fa.fa-lastfm-square{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-cc{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-cc:before{content:"\f20a"}.fa.fa-ils:before,.fa.fa-shekel:before,.fa.fa-sheqel:before{content:"\f20b"}.fa.fa-meanpath{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-meanpath:before{content:"\f2b4"}.fa.fa-buysellads,.fa.fa-connectdevelop,.fa.fa-dashcube,.fa.fa-forumbee,.fa.fa-leanpub,.fa.fa-sellsy,.fa.fa-shirtsinbulk,.fa.fa-simplybuilt,.fa.fa-skyatlas{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-diamond{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-diamond:before{content:"\f3a5"}.fa.fa-intersex:before{content:"\f224"}.fa.fa-facebook-official{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-facebook-official:before{content:"\f09a"}.fa.fa-pinterest-p,.fa.fa-whatsapp{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-hotel:before{content:"\f236"}.fa.fa-medium,.fa.fa-viacoin,.fa.fa-y-combinator,.fa.fa-yc{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-yc:before{content:"\f23b"}.fa.fa-expeditedssl,.fa.fa-opencart,.fa.fa-optin-monster{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-battery-4:before,.fa.fa-battery:before{content:"\f240"}.fa.fa-battery-3:before{content:"\f241"}.fa.fa-battery-2:before{content:"\f242"}.fa.fa-battery-1:before{content:"\f243"}.fa.fa-battery-0:before{content:"\f244"}.fa.fa-object-group,.fa.fa-object-ungroup,.fa.fa-sticky-note-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-sticky-note-o:before{content:"\f249"}.fa.fa-cc-diners-club,.fa.fa-cc-jcb{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-clone,.fa.fa-hourglass-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hourglass-o:before{content:"\f254"}.fa.fa-hourglass-1:before{content:"\f251"}.fa.fa-hourglass-2:before{content:"\f252"}.fa.fa-hourglass-3:before{content:"\f253"}.fa.fa-hand-rock-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-rock-o:before{content:"\f255"}.fa.fa-hand-grab-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-grab-o:before{content:"\f255"}.fa.fa-hand-paper-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-paper-o:before{content:"\f256"}.fa.fa-hand-stop-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-stop-o:before{content:"\f256"}.fa.fa-hand-scissors-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-scissors-o:before{content:"\f257"}.fa.fa-hand-lizard-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-lizard-o:before{content:"\f258"}.fa.fa-hand-spock-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-spock-o:before{content:"\f259"}.fa.fa-hand-pointer-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-pointer-o:before{content:"\f25a"}.fa.fa-hand-peace-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-hand-peace-o:before{content:"\f25b"}.fa.fa-registered{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-chrome,.fa.fa-creative-commons,.fa.fa-firefox,.fa.fa-get-pocket,.fa.fa-gg,.fa.fa-gg-circle,.fa.fa-internet-explorer,.fa.fa-odnoklassniki,.fa.fa-odnoklassniki-square,.fa.fa-opera,.fa.fa-safari,.fa.fa-wikipedia-w{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-television:before{content:"\f26c"}.fa.fa-500px,.fa.fa-amazon,.fa.fa-contao{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-calendar-plus-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-calendar-plus-o:before{content:"\f271"}.fa.fa-calendar-minus-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-calendar-minus-o:before{content:"\f272"}.fa.fa-calendar-times-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-calendar-times-o:before{content:"\f273"}.fa.fa-calendar-check-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-calendar-check-o:before{content:"\f274"}.fa.fa-map-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-map-o:before{content:"\f279"}.fa.fa-commenting:before{content:"\f4ad"}.fa.fa-commenting-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-commenting-o:before{content:"\f4ad"}.fa.fa-houzz,.fa.fa-vimeo{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-vimeo:before{content:"\f27d"}.fa.fa-black-tie,.fa.fa-edge,.fa.fa-fonticons,.fa.fa-reddit-alien{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-credit-card-alt:before{content:"\f09d"}.fa.fa-codiepie,.fa.fa-fort-awesome,.fa.fa-mixcloud,.fa.fa-modx,.fa.fa-product-hunt,.fa.fa-scribd,.fa.fa-usb{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-pause-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-pause-circle-o:before{content:"\f28b"}.fa.fa-stop-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-stop-circle-o:before{content:"\f28d"}.fa.fa-bluetooth,.fa.fa-bluetooth-b,.fa.fa-envira,.fa.fa-gitlab,.fa.fa-wheelchair-alt,.fa.fa-wpbeginner,.fa.fa-wpforms{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-wheelchair-alt:before{content:"\f368"}.fa.fa-question-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-question-circle-o:before{content:"\f059"}.fa.fa-volume-control-phone:before{content:"\f2a0"}.fa.fa-asl-interpreting:before{content:"\f2a3"}.fa.fa-deafness:before,.fa.fa-hard-of-hearing:before{content:"\f2a4"}.fa.fa-glide,.fa.fa-glide-g{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-signing:before{content:"\f2a7"}.fa.fa-first-order,.fa.fa-google-plus-official,.fa.fa-pied-piper,.fa.fa-snapchat,.fa.fa-snapchat-ghost,.fa.fa-snapchat-square,.fa.fa-themeisle,.fa.fa-viadeo,.fa.fa-viadeo-square,.fa.fa-yoast{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-google-plus-official:before{content:"\f2b3"}.fa.fa-google-plus-circle{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-google-plus-circle:before{content:"\f2b3"}.fa.fa-fa,.fa.fa-font-awesome{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-fa:before{content:"\f2b4"}.fa.fa-handshake-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-handshake-o:before{content:"\f2b5"}.fa.fa-envelope-open-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-envelope-open-o:before{content:"\f2b6"}.fa.fa-linode{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-address-book-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-address-book-o:before{content:"\f2b9"}.fa.fa-vcard:before{content:"\f2bb"}.fa.fa-address-card-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-address-card-o:before{content:"\f2bb"}.fa.fa-vcard-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-vcard-o:before{content:"\f2bb"}.fa.fa-user-circle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-user-circle-o:before{content:"\f2bd"}.fa.fa-user-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-user-o:before{content:"\f007"}.fa.fa-id-badge{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-drivers-license:before{content:"\f2c2"}.fa.fa-id-card-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-id-card-o:before{content:"\f2c2"}.fa.fa-drivers-license-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-drivers-license-o:before{content:"\f2c2"}.fa.fa-free-code-camp,.fa.fa-quora,.fa.fa-telegram{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-thermometer-4:before,.fa.fa-thermometer:before{content:"\f2c7"}.fa.fa-thermometer-3:before{content:"\f2c8"}.fa.fa-thermometer-2:before{content:"\f2c9"}.fa.fa-thermometer-1:before{content:"\f2ca"}.fa.fa-thermometer-0:before{content:"\f2cb"}.fa.fa-bathtub:before,.fa.fa-s15:before{content:"\f2cd"}.fa.fa-window-maximize,.fa.fa-window-restore{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-times-rectangle:before{content:"\f410"}.fa.fa-window-close-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-window-close-o:before{content:"\f410"}.fa.fa-times-rectangle-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-times-rectangle-o:before{content:"\f410"}.fa.fa-bandcamp,.fa.fa-eercast,.fa.fa-etsy,.fa.fa-grav,.fa.fa-imdb,.fa.fa-ravelry{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-eercast:before{content:"\f2da"}.fa.fa-snowflake-o{font-family:"Font Awesome 5 Free";font-weight:400}.fa.fa-snowflake-o:before{content:"\f2dc"}.fa.fa-superpowers,.fa.fa-wpexplorer{font-family:"Font Awesome 5 Brands";font-weight:400}.fa.fa-cab:before{content:"\f1ba"}</style><style media="all" id="fa-main">/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */.fa,.fab,.fad,.fal,.far,.fas{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s linear infinite;animation:fa-spin 2s linear infinite}.fa-pulse{-webkit-animation:fa-spin 1s steps(8) infinite;animation:fa-spin 1s steps(8) infinite}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical,.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1);transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;line-height:2em;position:relative;vertical-align:middle;width:2.5em}.fa-stack-1x,.fa-stack-2x{left:0;position:absolute;text-align:center;width:100%}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-500px:before{content:"\f26e"}.fa-accessible-icon:before{content:"\f368"}.fa-accusoft:before{content:"\f369"}.fa-acquisitions-incorporated:before{content:"\f6af"}.fa-ad:before{content:"\f641"}.fa-address-book:before{content:"\f2b9"}.fa-address-card:before{content:"\f2bb"}.fa-adjust:before{content:"\f042"}.fa-adn:before{content:"\f170"}.fa-adversal:before{content:"\f36a"}.fa-affiliatetheme:before{content:"\f36b"}.fa-air-freshener:before{content:"\f5d0"}.fa-airbnb:before{content:"\f834"}.fa-algolia:before{content:"\f36c"}.fa-align-center:before{content:"\f037"}.fa-align-justify:before{content:"\f039"}.fa-align-left:before{content:"\f036"}.fa-align-right:before{content:"\f038"}.fa-alipay:before{content:"\f642"}.fa-allergies:before{content:"\f461"}.fa-amazon:before{content:"\f270"}.fa-amazon-pay:before{content:"\f42c"}.fa-ambulance:before{content:"\f0f9"}.fa-american-sign-language-interpreting:before{content:"\f2a3"}.fa-amilia:before{content:"\f36d"}.fa-anchor:before{content:"\f13d"}.fa-android:before{content:"\f17b"}.fa-angellist:before{content:"\f209"}.fa-angle-double-down:before{content:"\f103"}.fa-angle-double-left:before{content:"\f100"}.fa-angle-double-right:before{content:"\f101"}.fa-angle-double-up:before{content:"\f102"}.fa-angle-down:before{content:"\f107"}.fa-angle-left:before{content:"\f104"}.fa-angle-right:before{content:"\f105"}.fa-angle-up:before{content:"\f106"}.fa-angry:before{content:"\f556"}.fa-angrycreative:before{content:"\f36e"}.fa-angular:before{content:"\f420"}.fa-ankh:before{content:"\f644"}.fa-app-store:before{content:"\f36f"}.fa-app-store-ios:before{content:"\f370"}.fa-apper:before{content:"\f371"}.fa-apple:before{content:"\f179"}.fa-apple-alt:before{content:"\f5d1"}.fa-apple-pay:before{content:"\f415"}.fa-archive:before{content:"\f187"}.fa-archway:before{content:"\f557"}.fa-arrow-alt-circle-down:before{content:"\f358"}.fa-arrow-alt-circle-left:before{content:"\f359"}.fa-arrow-alt-circle-right:before{content:"\f35a"}.fa-arrow-alt-circle-up:before{content:"\f35b"}.fa-arrow-circle-down:before{content:"\f0ab"}.fa-arrow-circle-left:before{content:"\f0a8"}.fa-arrow-circle-right:before{content:"\f0a9"}.fa-arrow-circle-up:before{content:"\f0aa"}.fa-arrow-down:before{content:"\f063"}.fa-arrow-left:before{content:"\f060"}.fa-arrow-right:before{content:"\f061"}.fa-arrow-up:before{content:"\f062"}.fa-arrows-alt:before{content:"\f0b2"}.fa-arrows-alt-h:before{content:"\f337"}.fa-arrows-alt-v:before{content:"\f338"}.fa-artstation:before{content:"\f77a"}.fa-assistive-listening-systems:before{content:"\f2a2"}.fa-asterisk:before{content:"\f069"}.fa-asymmetrik:before{content:"\f372"}.fa-at:before{content:"\f1fa"}.fa-atlas:before{content:"\f558"}.fa-atlassian:before{content:"\f77b"}.fa-atom:before{content:"\f5d2"}.fa-audible:before{content:"\f373"}.fa-audio-description:before{content:"\f29e"}.fa-autoprefixer:before{content:"\f41c"}.fa-avianex:before{content:"\f374"}.fa-aviato:before{content:"\f421"}.fa-award:before{content:"\f559"}.fa-aws:before{content:"\f375"}.fa-baby:before{content:"\f77c"}.fa-baby-carriage:before{content:"\f77d"}.fa-backspace:before{content:"\f55a"}.fa-backward:before{content:"\f04a"}.fa-bacon:before{content:"\f7e5"}.fa-bacteria:before{content:"\e059"}.fa-bacterium:before{content:"\e05a"}.fa-bahai:before{content:"\f666"}.fa-balance-scale:before{content:"\f24e"}.fa-balance-scale-left:before{content:"\f515"}.fa-balance-scale-right:before{content:"\f516"}.fa-ban:before{content:"\f05e"}.fa-band-aid:before{content:"\f462"}.fa-bandcamp:before{content:"\f2d5"}.fa-barcode:before{content:"\f02a"}.fa-bars:before{content:"\f0c9"}.fa-baseball-ball:before{content:"\f433"}.fa-basketball-ball:before{content:"\f434"}.fa-bath:before{content:"\f2cd"}.fa-battery-empty:before{content:"\f244"}.fa-battery-full:before{content:"\f240"}.fa-battery-half:before{content:"\f242"}.fa-battery-quarter:before{content:"\f243"}.fa-battery-three-quarters:before{content:"\f241"}.fa-battle-net:before{content:"\f835"}.fa-bed:before{content:"\f236"}.fa-beer:before{content:"\f0fc"}.fa-behance:before{content:"\f1b4"}.fa-behance-square:before{content:"\f1b5"}.fa-bell:before{content:"\f0f3"}.fa-bell-slash:before{content:"\f1f6"}.fa-bezier-curve:before{content:"\f55b"}.fa-bible:before{content:"\f647"}.fa-bicycle:before{content:"\f206"}.fa-biking:before{content:"\f84a"}.fa-bimobject:before{content:"\f378"}.fa-binoculars:before{content:"\f1e5"}.fa-biohazard:before{content:"\f780"}.fa-birthday-cake:before{content:"\f1fd"}.fa-bitbucket:before{content:"\f171"}.fa-bitcoin:before{content:"\f379"}.fa-bity:before{content:"\f37a"}.fa-black-tie:before{content:"\f27e"}.fa-blackberry:before{content:"\f37b"}.fa-blender:before{content:"\f517"}.fa-blender-phone:before{content:"\f6b6"}.fa-blind:before{content:"\f29d"}.fa-blog:before{content:"\f781"}.fa-blogger:before{content:"\f37c"}.fa-blogger-b:before{content:"\f37d"}.fa-bluetooth:before{content:"\f293"}.fa-bluetooth-b:before{content:"\f294"}.fa-bold:before{content:"\f032"}.fa-bolt:before{content:"\f0e7"}.fa-bomb:before{content:"\f1e2"}.fa-bone:before{content:"\f5d7"}.fa-bong:before{content:"\f55c"}.fa-book:before{content:"\f02d"}.fa-book-dead:before{content:"\f6b7"}.fa-book-medical:before{content:"\f7e6"}.fa-book-open:before{content:"\f518"}.fa-book-reader:before{content:"\f5da"}.fa-bookmark:before{content:"\f02e"}.fa-bootstrap:before{content:"\f836"}.fa-border-all:before{content:"\f84c"}.fa-border-none:before{content:"\f850"}.fa-border-style:before{content:"\f853"}.fa-bowling-ball:before{content:"\f436"}.fa-box:before{content:"\f466"}.fa-box-open:before{content:"\f49e"}.fa-box-tissue:before{content:"\e05b"}.fa-boxes:before{content:"\f468"}.fa-braille:before{content:"\f2a1"}.fa-brain:before{content:"\f5dc"}.fa-bread-slice:before{content:"\f7ec"}.fa-briefcase:before{content:"\f0b1"}.fa-briefcase-medical:before{content:"\f469"}.fa-broadcast-tower:before{content:"\f519"}.fa-broom:before{content:"\f51a"}.fa-brush:before{content:"\f55d"}.fa-btc:before{content:"\f15a"}.fa-buffer:before{content:"\f837"}.fa-bug:before{content:"\f188"}.fa-building:before{content:"\f1ad"}.fa-bullhorn:before{content:"\f0a1"}.fa-bullseye:before{content:"\f140"}.fa-burn:before{content:"\f46a"}.fa-buromobelexperte:before{content:"\f37f"}.fa-bus:before{content:"\f207"}.fa-bus-alt:before{content:"\f55e"}.fa-business-time:before{content:"\f64a"}.fa-buy-n-large:before{content:"\f8a6"}.fa-buysellads:before{content:"\f20d"}.fa-calculator:before{content:"\f1ec"}.fa-calendar:before{content:"\f133"}.fa-calendar-alt:before{content:"\f073"}.fa-calendar-check:before{content:"\f274"}.fa-calendar-day:before{content:"\f783"}.fa-calendar-minus:before{content:"\f272"}.fa-calendar-plus:before{content:"\f271"}.fa-calendar-times:before{content:"\f273"}.fa-calendar-week:before{content:"\f784"}.fa-camera:before{content:"\f030"}.fa-camera-retro:before{content:"\f083"}.fa-campground:before{content:"\f6bb"}.fa-canadian-maple-leaf:before{content:"\f785"}.fa-candy-cane:before{content:"\f786"}.fa-cannabis:before{content:"\f55f"}.fa-capsules:before{content:"\f46b"}.fa-car:before{content:"\f1b9"}.fa-car-alt:before{content:"\f5de"}.fa-car-battery:before{content:"\f5df"}.fa-car-crash:before{content:"\f5e1"}.fa-car-side:before{content:"\f5e4"}.fa-caravan:before{content:"\f8ff"}.fa-caret-down:before{content:"\f0d7"}.fa-caret-left:before{content:"\f0d9"}.fa-caret-right:before{content:"\f0da"}.fa-caret-square-down:before{content:"\f150"}.fa-caret-square-left:before{content:"\f191"}.fa-caret-square-right:before{content:"\f152"}.fa-caret-square-up:before{content:"\f151"}.fa-caret-up:before{content:"\f0d8"}.fa-carrot:before{content:"\f787"}.fa-cart-arrow-down:before{content:"\f218"}.fa-cart-plus:before{content:"\f217"}.fa-cash-register:before{content:"\f788"}.fa-cat:before{content:"\f6be"}.fa-cc-amazon-pay:before{content:"\f42d"}.fa-cc-amex:before{content:"\f1f3"}.fa-cc-apple-pay:before{content:"\f416"}.fa-cc-diners-club:before{content:"\f24c"}.fa-cc-discover:before{content:"\f1f2"}.fa-cc-jcb:before{content:"\f24b"}.fa-cc-mastercard:before{content:"\f1f1"}.fa-cc-paypal:before{content:"\f1f4"}.fa-cc-stripe:before{content:"\f1f5"}.fa-cc-visa:before{content:"\f1f0"}.fa-centercode:before{content:"\f380"}.fa-centos:before{content:"\f789"}.fa-certificate:before{content:"\f0a3"}.fa-chair:before{content:"\f6c0"}.fa-chalkboard:before{content:"\f51b"}.fa-chalkboard-teacher:before{content:"\f51c"}.fa-charging-station:before{content:"\f5e7"}.fa-chart-area:before{content:"\f1fe"}.fa-chart-bar:before{content:"\f080"}.fa-chart-line:before{content:"\f201"}.fa-chart-pie:before{content:"\f200"}.fa-check:before{content:"\f00c"}.fa-check-circle:before{content:"\f058"}.fa-check-double:before{content:"\f560"}.fa-check-square:before{content:"\f14a"}.fa-cheese:before{content:"\f7ef"}.fa-chess:before{content:"\f439"}.fa-chess-bishop:before{content:"\f43a"}.fa-chess-board:before{content:"\f43c"}.fa-chess-king:before{content:"\f43f"}.fa-chess-knight:before{content:"\f441"}.fa-chess-pawn:before{content:"\f443"}.fa-chess-queen:before{content:"\f445"}.fa-chess-rook:before{content:"\f447"}.fa-chevron-circle-down:before{content:"\f13a"}.fa-chevron-circle-left:before{content:"\f137"}.fa-chevron-circle-right:before{content:"\f138"}.fa-chevron-circle-up:before{content:"\f139"}.fa-chevron-down:before{content:"\f078"}.fa-chevron-left:before{content:"\f053"}.fa-chevron-right:before{content:"\f054"}.fa-chevron-up:before{content:"\f077"}.fa-child:before{content:"\f1ae"}.fa-chrome:before{content:"\f268"}.fa-chromecast:before{content:"\f838"}.fa-church:before{content:"\f51d"}.fa-circle:before{content:"\f111"}.fa-circle-notch:before{content:"\f1ce"}.fa-city:before{content:"\f64f"}.fa-clinic-medical:before{content:"\f7f2"}.fa-clipboard:before{content:"\f328"}.fa-clipboard-check:before{content:"\f46c"}.fa-clipboard-list:before{content:"\f46d"}.fa-clock:before{content:"\f017"}.fa-clone:before{content:"\f24d"}.fa-closed-captioning:before{content:"\f20a"}.fa-cloud:before{content:"\f0c2"}.fa-cloud-download-alt:before{content:"\f381"}.fa-cloud-meatball:before{content:"\f73b"}.fa-cloud-moon:before{content:"\f6c3"}.fa-cloud-moon-rain:before{content:"\f73c"}.fa-cloud-rain:before{content:"\f73d"}.fa-cloud-showers-heavy:before{content:"\f740"}.fa-cloud-sun:before{content:"\f6c4"}.fa-cloud-sun-rain:before{content:"\f743"}.fa-cloud-upload-alt:before{content:"\f382"}.fa-cloudflare:before{content:"\e07d"}.fa-cloudscale:before{content:"\f383"}.fa-cloudsmith:before{content:"\f384"}.fa-cloudversify:before{content:"\f385"}.fa-cocktail:before{content:"\f561"}.fa-code:before{content:"\f121"}.fa-code-branch:before{content:"\f126"}.fa-codepen:before{content:"\f1cb"}.fa-codiepie:before{content:"\f284"}.fa-coffee:before{content:"\f0f4"}.fa-cog:before{content:"\f013"}.fa-cogs:before{content:"\f085"}.fa-coins:before{content:"\f51e"}.fa-columns:before{content:"\f0db"}.fa-comment:before{content:"\f075"}.fa-comment-alt:before{content:"\f27a"}.fa-comment-dollar:before{content:"\f651"}.fa-comment-dots:before{content:"\f4ad"}.fa-comment-medical:before{content:"\f7f5"}.fa-comment-slash:before{content:"\f4b3"}.fa-comments:before{content:"\f086"}.fa-comments-dollar:before{content:"\f653"}.fa-compact-disc:before{content:"\f51f"}.fa-compass:before{content:"\f14e"}.fa-compress:before{content:"\f066"}.fa-compress-alt:before{content:"\f422"}.fa-compress-arrows-alt:before{content:"\f78c"}.fa-concierge-bell:before{content:"\f562"}.fa-confluence:before{content:"\f78d"}.fa-connectdevelop:before{content:"\f20e"}.fa-contao:before{content:"\f26d"}.fa-cookie:before{content:"\f563"}.fa-cookie-bite:before{content:"\f564"}.fa-copy:before{content:"\f0c5"}.fa-copyright:before{content:"\f1f9"}.fa-cotton-bureau:before{content:"\f89e"}.fa-couch:before{content:"\f4b8"}.fa-cpanel:before{content:"\f388"}.fa-creative-commons:before{content:"\f25e"}.fa-creative-commons-by:before{content:"\f4e7"}.fa-creative-commons-nc:before{content:"\f4e8"}.fa-creative-commons-nc-eu:before{content:"\f4e9"}.fa-creative-commons-nc-jp:before{content:"\f4ea"}.fa-creative-commons-nd:before{content:"\f4eb"}.fa-creative-commons-pd:before{content:"\f4ec"}.fa-creative-commons-pd-alt:before{content:"\f4ed"}.fa-creative-commons-remix:before{content:"\f4ee"}.fa-creative-commons-sa:before{content:"\f4ef"}.fa-creative-commons-sampling:before{content:"\f4f0"}.fa-creative-commons-sampling-plus:before{content:"\f4f1"}.fa-creative-commons-share:before{content:"\f4f2"}.fa-creative-commons-zero:before{content:"\f4f3"}.fa-credit-card:before{content:"\f09d"}.fa-critical-role:before{content:"\f6c9"}.fa-crop:before{content:"\f125"}.fa-crop-alt:before{content:"\f565"}.fa-cross:before{content:"\f654"}.fa-crosshairs:before{content:"\f05b"}.fa-crow:before{content:"\f520"}.fa-crown:before{content:"\f521"}.fa-crutch:before{content:"\f7f7"}.fa-css3:before{content:"\f13c"}.fa-css3-alt:before{content:"\f38b"}.fa-cube:before{content:"\f1b2"}.fa-cubes:before{content:"\f1b3"}.fa-cut:before{content:"\f0c4"}.fa-cuttlefish:before{content:"\f38c"}.fa-d-and-d:before{content:"\f38d"}.fa-d-and-d-beyond:before{content:"\f6ca"}.fa-dailymotion:before{content:"\e052"}.fa-dashcube:before{content:"\f210"}.fa-database:before{content:"\f1c0"}.fa-deaf:before{content:"\f2a4"}.fa-deezer:before{content:"\e077"}.fa-delicious:before{content:"\f1a5"}.fa-democrat:before{content:"\f747"}.fa-deploydog:before{content:"\f38e"}.fa-deskpro:before{content:"\f38f"}.fa-desktop:before{content:"\f108"}.fa-dev:before{content:"\f6cc"}.fa-deviantart:before{content:"\f1bd"}.fa-dharmachakra:before{content:"\f655"}.fa-dhl:before{content:"\f790"}.fa-diagnoses:before{content:"\f470"}.fa-diaspora:before{content:"\f791"}.fa-dice:before{content:"\f522"}.fa-dice-d20:before{content:"\f6cf"}.fa-dice-d6:before{content:"\f6d1"}.fa-dice-five:before{content:"\f523"}.fa-dice-four:before{content:"\f524"}.fa-dice-one:before{content:"\f525"}.fa-dice-six:before{content:"\f526"}.fa-dice-three:before{content:"\f527"}.fa-dice-two:before{content:"\f528"}.fa-digg:before{content:"\f1a6"}.fa-digital-ocean:before{content:"\f391"}.fa-digital-tachograph:before{content:"\f566"}.fa-directions:before{content:"\f5eb"}.fa-discord:before{content:"\f392"}.fa-discourse:before{content:"\f393"}.fa-disease:before{content:"\f7fa"}.fa-divide:before{content:"\f529"}.fa-dizzy:before{content:"\f567"}.fa-dna:before{content:"\f471"}.fa-dochub:before{content:"\f394"}.fa-docker:before{content:"\f395"}.fa-dog:before{content:"\f6d3"}.fa-dollar-sign:before{content:"\f155"}.fa-dolly:before{content:"\f472"}.fa-dolly-flatbed:before{content:"\f474"}.fa-donate:before{content:"\f4b9"}.fa-door-closed:before{content:"\f52a"}.fa-door-open:before{content:"\f52b"}.fa-dot-circle:before{content:"\f192"}.fa-dove:before{content:"\f4ba"}.fa-download:before{content:"\f019"}.fa-draft2digital:before{content:"\f396"}.fa-drafting-compass:before{content:"\f568"}.fa-dragon:before{content:"\f6d5"}.fa-draw-polygon:before{content:"\f5ee"}.fa-dribbble:before{content:"\f17d"}.fa-dribbble-square:before{content:"\f397"}.fa-dropbox:before{content:"\f16b"}.fa-drum:before{content:"\f569"}.fa-drum-steelpan:before{content:"\f56a"}.fa-drumstick-bite:before{content:"\f6d7"}.fa-drupal:before{content:"\f1a9"}.fa-dumbbell:before{content:"\f44b"}.fa-dumpster:before{content:"\f793"}.fa-dumpster-fire:before{content:"\f794"}.fa-dungeon:before{content:"\f6d9"}.fa-dyalog:before{content:"\f399"}.fa-earlybirds:before{content:"\f39a"}.fa-ebay:before{content:"\f4f4"}.fa-edge:before{content:"\f282"}.fa-edge-legacy:before{content:"\e078"}.fa-edit:before{content:"\f044"}.fa-egg:before{content:"\f7fb"}.fa-eject:before{content:"\f052"}.fa-elementor:before{content:"\f430"}.fa-ellipsis-h:before{content:"\f141"}.fa-ellipsis-v:before{content:"\f142"}.fa-ello:before{content:"\f5f1"}.fa-ember:before{content:"\f423"}.fa-empire:before{content:"\f1d1"}.fa-envelope:before{content:"\f0e0"}.fa-envelope-open:before{content:"\f2b6"}.fa-envelope-open-text:before{content:"\f658"}.fa-envelope-square:before{content:"\f199"}.fa-envira:before{content:"\f299"}.fa-equals:before{content:"\f52c"}.fa-eraser:before{content:"\f12d"}.fa-erlang:before{content:"\f39d"}.fa-ethereum:before{content:"\f42e"}.fa-ethernet:before{content:"\f796"}.fa-etsy:before{content:"\f2d7"}.fa-euro-sign:before{content:"\f153"}.fa-evernote:before{content:"\f839"}.fa-exchange-alt:before{content:"\f362"}.fa-exclamation:before{content:"\f12a"}.fa-exclamation-circle:before{content:"\f06a"}.fa-exclamation-triangle:before{content:"\f071"}.fa-expand:before{content:"\f065"}.fa-expand-alt:before{content:"\f424"}.fa-expand-arrows-alt:before{content:"\f31e"}.fa-expeditedssl:before{content:"\f23e"}.fa-external-link-alt:before{content:"\f35d"}.fa-external-link-square-alt:before{content:"\f360"}.fa-eye:before{content:"\f06e"}.fa-eye-dropper:before{content:"\f1fb"}.fa-eye-slash:before{content:"\f070"}.fa-facebook:before{content:"\f09a"}.fa-facebook-f:before{content:"\f39e"}.fa-facebook-messenger:before{content:"\f39f"}.fa-facebook-square:before{content:"\f082"}.fa-fan:before{content:"\f863"}.fa-fantasy-flight-games:before{content:"\f6dc"}.fa-fast-backward:before{content:"\f049"}.fa-fast-forward:before{content:"\f050"}.fa-faucet:before{content:"\e005"}.fa-fax:before{content:"\f1ac"}.fa-feather:before{content:"\f52d"}.fa-feather-alt:before{content:"\f56b"}.fa-fedex:before{content:"\f797"}.fa-fedora:before{content:"\f798"}.fa-female:before{content:"\f182"}.fa-fighter-jet:before{content:"\f0fb"}.fa-figma:before{content:"\f799"}.fa-file:before{content:"\f15b"}.fa-file-alt:before{content:"\f15c"}.fa-file-archive:before{content:"\f1c6"}.fa-file-audio:before{content:"\f1c7"}.fa-file-code:before{content:"\f1c9"}.fa-file-contract:before{content:"\f56c"}.fa-file-csv:before{content:"\f6dd"}.fa-file-download:before{content:"\f56d"}.fa-file-excel:before{content:"\f1c3"}.fa-file-export:before{content:"\f56e"}.fa-file-image:before{content:"\f1c5"}.fa-file-import:before{content:"\f56f"}.fa-file-invoice:before{content:"\f570"}.fa-file-invoice-dollar:before{content:"\f571"}.fa-file-medical:before{content:"\f477"}.fa-file-medical-alt:before{content:"\f478"}.fa-file-pdf:before{content:"\f1c1"}.fa-file-powerpoint:before{content:"\f1c4"}.fa-file-prescription:before{content:"\f572"}.fa-file-signature:before{content:"\f573"}.fa-file-upload:before{content:"\f574"}.fa-file-video:before{content:"\f1c8"}.fa-file-word:before{content:"\f1c2"}.fa-fill:before{content:"\f575"}.fa-fill-drip:before{content:"\f576"}.fa-film:before{content:"\f008"}.fa-filter:before{content:"\f0b0"}.fa-fingerprint:before{content:"\f577"}.fa-fire:before{content:"\f06d"}.fa-fire-alt:before{content:"\f7e4"}.fa-fire-extinguisher:before{content:"\f134"}.fa-firefox:before{content:"\f269"}.fa-firefox-browser:before{content:"\e007"}.fa-first-aid:before{content:"\f479"}.fa-first-order:before{content:"\f2b0"}.fa-first-order-alt:before{content:"\f50a"}.fa-firstdraft:before{content:"\f3a1"}.fa-fish:before{content:"\f578"}.fa-fist-raised:before{content:"\f6de"}.fa-flag:before{content:"\f024"}.fa-flag-checkered:before{content:"\f11e"}.fa-flag-usa:before{content:"\f74d"}.fa-flask:before{content:"\f0c3"}.fa-flickr:before{content:"\f16e"}.fa-flipboard:before{content:"\f44d"}.fa-flushed:before{content:"\f579"}.fa-fly:before{content:"\f417"}.fa-folder:before{content:"\f07b"}.fa-folder-minus:before{content:"\f65d"}.fa-folder-open:before{content:"\f07c"}.fa-folder-plus:before{content:"\f65e"}.fa-font:before{content:"\f031"}.fa-font-awesome:before{content:"\f2b4"}.fa-font-awesome-alt:before{content:"\f35c"}.fa-font-awesome-flag:before{content:"\f425"}.fa-font-awesome-logo-full:before{content:"\f4e6"}.fa-fonticons:before{content:"\f280"}.fa-fonticons-fi:before{content:"\f3a2"}.fa-football-ball:before{content:"\f44e"}.fa-fort-awesome:before{content:"\f286"}.fa-fort-awesome-alt:before{content:"\f3a3"}.fa-forumbee:before{content:"\f211"}.fa-forward:before{content:"\f04e"}.fa-foursquare:before{content:"\f180"}.fa-free-code-camp:before{content:"\f2c5"}.fa-freebsd:before{content:"\f3a4"}.fa-frog:before{content:"\f52e"}.fa-frown:before{content:"\f119"}.fa-frown-open:before{content:"\f57a"}.fa-fulcrum:before{content:"\f50b"}.fa-funnel-dollar:before{content:"\f662"}.fa-futbol:before{content:"\f1e3"}.fa-galactic-republic:before{content:"\f50c"}.fa-galactic-senate:before{content:"\f50d"}.fa-gamepad:before{content:"\f11b"}.fa-gas-pump:before{content:"\f52f"}.fa-gavel:before{content:"\f0e3"}.fa-gem:before{content:"\f3a5"}.fa-genderless:before{content:"\f22d"}.fa-get-pocket:before{content:"\f265"}.fa-gg:before{content:"\f260"}.fa-gg-circle:before{content:"\f261"}.fa-ghost:before{content:"\f6e2"}.fa-gift:before{content:"\f06b"}.fa-gifts:before{content:"\f79c"}.fa-git:before{content:"\f1d3"}.fa-git-alt:before{content:"\f841"}.fa-git-square:before{content:"\f1d2"}.fa-github:before{content:"\f09b"}.fa-github-alt:before{content:"\f113"}.fa-github-square:before{content:"\f092"}.fa-gitkraken:before{content:"\f3a6"}.fa-gitlab:before{content:"\f296"}.fa-gitter:before{content:"\f426"}.fa-glass-cheers:before{content:"\f79f"}.fa-glass-martini:before{content:"\f000"}.fa-glass-martini-alt:before{content:"\f57b"}.fa-glass-whiskey:before{content:"\f7a0"}.fa-glasses:before{content:"\f530"}.fa-glide:before{content:"\f2a5"}.fa-glide-g:before{content:"\f2a6"}.fa-globe:before{content:"\f0ac"}.fa-globe-africa:before{content:"\f57c"}.fa-globe-americas:before{content:"\f57d"}.fa-globe-asia:before{content:"\f57e"}.fa-globe-europe:before{content:"\f7a2"}.fa-gofore:before{content:"\f3a7"}.fa-golf-ball:before{content:"\f450"}.fa-goodreads:before{content:"\f3a8"}.fa-goodreads-g:before{content:"\f3a9"}.fa-google:before{content:"\f1a0"}.fa-google-drive:before{content:"\f3aa"}.fa-google-pay:before{content:"\e079"}.fa-google-play:before{content:"\f3ab"}.fa-google-plus:before{content:"\f2b3"}.fa-google-plus-g:before{content:"\f0d5"}.fa-google-plus-square:before{content:"\f0d4"}.fa-google-wallet:before{content:"\f1ee"}.fa-gopuram:before{content:"\f664"}.fa-graduation-cap:before{content:"\f19d"}.fa-gratipay:before{content:"\f184"}.fa-grav:before{content:"\f2d6"}.fa-greater-than:before{content:"\f531"}.fa-greater-than-equal:before{content:"\f532"}.fa-grimace:before{content:"\f57f"}.fa-grin:before{content:"\f580"}.fa-grin-alt:before{content:"\f581"}.fa-grin-beam:before{content:"\f582"}.fa-grin-beam-sweat:before{content:"\f583"}.fa-grin-hearts:before{content:"\f584"}.fa-grin-squint:before{content:"\f585"}.fa-grin-squint-tears:before{content:"\f586"}.fa-grin-stars:before{content:"\f587"}.fa-grin-tears:before{content:"\f588"}.fa-grin-tongue:before{content:"\f589"}.fa-grin-tongue-squint:before{content:"\f58a"}.fa-grin-tongue-wink:before{content:"\f58b"}.fa-grin-wink:before{content:"\f58c"}.fa-grip-horizontal:before{content:"\f58d"}.fa-grip-lines:before{content:"\f7a4"}.fa-grip-lines-vertical:before{content:"\f7a5"}.fa-grip-vertical:before{content:"\f58e"}.fa-gripfire:before{content:"\f3ac"}.fa-grunt:before{content:"\f3ad"}.fa-guilded:before{content:"\e07e"}.fa-guitar:before{content:"\f7a6"}.fa-gulp:before{content:"\f3ae"}.fa-h-square:before{content:"\f0fd"}.fa-hacker-news:before{content:"\f1d4"}.fa-hacker-news-square:before{content:"\f3af"}.fa-hackerrank:before{content:"\f5f7"}.fa-hamburger:before{content:"\f805"}.fa-hammer:before{content:"\f6e3"}.fa-hamsa:before{content:"\f665"}.fa-hand-holding:before{content:"\f4bd"}.fa-hand-holding-heart:before{content:"\f4be"}.fa-hand-holding-medical:before{content:"\e05c"}.fa-hand-holding-usd:before{content:"\f4c0"}.fa-hand-holding-water:before{content:"\f4c1"}.fa-hand-lizard:before{content:"\f258"}.fa-hand-middle-finger:before{content:"\f806"}.fa-hand-paper:before{content:"\f256"}.fa-hand-peace:before{content:"\f25b"}.fa-hand-point-down:before{content:"\f0a7"}.fa-hand-point-left:before{content:"\f0a5"}.fa-hand-point-right:before{content:"\f0a4"}.fa-hand-point-up:before{content:"\f0a6"}.fa-hand-pointer:before{content:"\f25a"}.fa-hand-rock:before{content:"\f255"}.fa-hand-scissors:before{content:"\f257"}.fa-hand-sparkles:before{content:"\e05d"}.fa-hand-spock:before{content:"\f259"}.fa-hands:before{content:"\f4c2"}.fa-hands-helping:before{content:"\f4c4"}.fa-hands-wash:before{content:"\e05e"}.fa-handshake:before{content:"\f2b5"}.fa-handshake-alt-slash:before{content:"\e05f"}.fa-handshake-slash:before{content:"\e060"}.fa-hanukiah:before{content:"\f6e6"}.fa-hard-hat:before{content:"\f807"}.fa-hashtag:before{content:"\f292"}.fa-hat-cowboy:before{content:"\f8c0"}.fa-hat-cowboy-side:before{content:"\f8c1"}.fa-hat-wizard:before{content:"\f6e8"}.fa-hdd:before{content:"\f0a0"}.fa-head-side-cough:before{content:"\e061"}.fa-head-side-cough-slash:before{content:"\e062"}.fa-head-side-mask:before{content:"\e063"}.fa-head-side-virus:before{content:"\e064"}.fa-heading:before{content:"\f1dc"}.fa-headphones:before{content:"\f025"}.fa-headphones-alt:before{content:"\f58f"}.fa-headset:before{content:"\f590"}.fa-heart:before{content:"\f004"}.fa-heart-broken:before{content:"\f7a9"}.fa-heartbeat:before{content:"\f21e"}.fa-helicopter:before{content:"\f533"}.fa-highlighter:before{content:"\f591"}.fa-hiking:before{content:"\f6ec"}.fa-hippo:before{content:"\f6ed"}.fa-hips:before{content:"\f452"}.fa-hire-a-helper:before{content:"\f3b0"}.fa-history:before{content:"\f1da"}.fa-hive:before{content:"\e07f"}.fa-hockey-puck:before{content:"\f453"}.fa-holly-berry:before{content:"\f7aa"}.fa-home:before{content:"\f015"}.fa-hooli:before{content:"\f427"}.fa-hornbill:before{content:"\f592"}.fa-horse:before{content:"\f6f0"}.fa-horse-head:before{content:"\f7ab"}.fa-hospital:before{content:"\f0f8"}.fa-hospital-alt:before{content:"\f47d"}.fa-hospital-symbol:before{content:"\f47e"}.fa-hospital-user:before{content:"\f80d"}.fa-hot-tub:before{content:"\f593"}.fa-hotdog:before{content:"\f80f"}.fa-hotel:before{content:"\f594"}.fa-hotjar:before{content:"\f3b1"}.fa-hourglass:before{content:"\f254"}.fa-hourglass-end:before{content:"\f253"}.fa-hourglass-half:before{content:"\f252"}.fa-hourglass-start:before{content:"\f251"}.fa-house-damage:before{content:"\f6f1"}.fa-house-user:before{content:"\e065"}.fa-houzz:before{content:"\f27c"}.fa-hryvnia:before{content:"\f6f2"}.fa-html5:before{content:"\f13b"}.fa-hubspot:before{content:"\f3b2"}.fa-i-cursor:before{content:"\f246"}.fa-ice-cream:before{content:"\f810"}.fa-icicles:before{content:"\f7ad"}.fa-icons:before{content:"\f86d"}.fa-id-badge:before{content:"\f2c1"}.fa-id-card:before{content:"\f2c2"}.fa-id-card-alt:before{content:"\f47f"}.fa-ideal:before{content:"\e013"}.fa-igloo:before{content:"\f7ae"}.fa-image:before{content:"\f03e"}.fa-images:before{content:"\f302"}.fa-imdb:before{content:"\f2d8"}.fa-inbox:before{content:"\f01c"}.fa-indent:before{content:"\f03c"}.fa-industry:before{content:"\f275"}.fa-infinity:before{content:"\f534"}.fa-info:before{content:"\f129"}.fa-info-circle:before{content:"\f05a"}.fa-innosoft:before{content:"\e080"}.fa-instagram:before{content:"\f16d"}.fa-instagram-square:before{content:"\e055"}.fa-instalod:before{content:"\e081"}.fa-intercom:before{content:"\f7af"}.fa-internet-explorer:before{content:"\f26b"}.fa-invision:before{content:"\f7b0"}.fa-ioxhost:before{content:"\f208"}.fa-italic:before{content:"\f033"}.fa-itch-io:before{content:"\f83a"}.fa-itunes:before{content:"\f3b4"}.fa-itunes-note:before{content:"\f3b5"}.fa-java:before{content:"\f4e4"}.fa-jedi:before{content:"\f669"}.fa-jedi-order:before{content:"\f50e"}.fa-jenkins:before{content:"\f3b6"}.fa-jira:before{content:"\f7b1"}.fa-joget:before{content:"\f3b7"}.fa-joint:before{content:"\f595"}.fa-joomla:before{content:"\f1aa"}.fa-journal-whills:before{content:"\f66a"}.fa-js:before{content:"\f3b8"}.fa-js-square:before{content:"\f3b9"}.fa-jsfiddle:before{content:"\f1cc"}.fa-kaaba:before{content:"\f66b"}.fa-kaggle:before{content:"\f5fa"}.fa-key:before{content:"\f084"}.fa-keybase:before{content:"\f4f5"}.fa-keyboard:before{content:"\f11c"}.fa-keycdn:before{content:"\f3ba"}.fa-khanda:before{content:"\f66d"}.fa-kickstarter:before{content:"\f3bb"}.fa-kickstarter-k:before{content:"\f3bc"}.fa-kiss:before{content:"\f596"}.fa-kiss-beam:before{content:"\f597"}.fa-kiss-wink-heart:before{content:"\f598"}.fa-kiwi-bird:before{content:"\f535"}.fa-korvue:before{content:"\f42f"}.fa-landmark:before{content:"\f66f"}.fa-language:before{content:"\f1ab"}.fa-laptop:before{content:"\f109"}.fa-laptop-code:before{content:"\f5fc"}.fa-laptop-house:before{content:"\e066"}.fa-laptop-medical:before{content:"\f812"}.fa-laravel:before{content:"\f3bd"}.fa-lastfm:before{content:"\f202"}.fa-lastfm-square:before{content:"\f203"}.fa-laugh:before{content:"\f599"}.fa-laugh-beam:before{content:"\f59a"}.fa-laugh-squint:before{content:"\f59b"}.fa-laugh-wink:before{content:"\f59c"}.fa-layer-group:before{content:"\f5fd"}.fa-leaf:before{content:"\f06c"}.fa-leanpub:before{content:"\f212"}.fa-lemon:before{content:"\f094"}.fa-less:before{content:"\f41d"}.fa-less-than:before{content:"\f536"}.fa-less-than-equal:before{content:"\f537"}.fa-level-down-alt:before{content:"\f3be"}.fa-level-up-alt:before{content:"\f3bf"}.fa-life-ring:before{content:"\f1cd"}.fa-lightbulb:before{content:"\f0eb"}.fa-line:before{content:"\f3c0"}.fa-link:before{content:"\f0c1"}.fa-linkedin:before{content:"\f08c"}.fa-linkedin-in:before{content:"\f0e1"}.fa-linode:before{content:"\f2b8"}.fa-linux:before{content:"\f17c"}.fa-lira-sign:before{content:"\f195"}.fa-list:before{content:"\f03a"}.fa-list-alt:before{content:"\f022"}.fa-list-ol:before{content:"\f0cb"}.fa-list-ul:before{content:"\f0ca"}.fa-location-arrow:before{content:"\f124"}.fa-lock:before{content:"\f023"}.fa-lock-open:before{content:"\f3c1"}.fa-long-arrow-alt-down:before{content:"\f309"}.fa-long-arrow-alt-left:before{content:"\f30a"}.fa-long-arrow-alt-right:before{content:"\f30b"}.fa-long-arrow-alt-up:before{content:"\f30c"}.fa-low-vision:before{content:"\f2a8"}.fa-luggage-cart:before{content:"\f59d"}.fa-lungs:before{content:"\f604"}.fa-lungs-virus:before{content:"\e067"}.fa-lyft:before{content:"\f3c3"}.fa-magento:before{content:"\f3c4"}.fa-magic:before{content:"\f0d0"}.fa-magnet:before{content:"\f076"}.fa-mail-bulk:before{content:"\f674"}.fa-mailchimp:before{content:"\f59e"}.fa-male:before{content:"\f183"}.fa-mandalorian:before{content:"\f50f"}.fa-map:before{content:"\f279"}.fa-map-marked:before{content:"\f59f"}.fa-map-marked-alt:before{content:"\f5a0"}.fa-map-marker:before{content:"\f041"}.fa-map-marker-alt:before{content:"\f3c5"}.fa-map-pin:before{content:"\f276"}.fa-map-signs:before{content:"\f277"}.fa-markdown:before{content:"\f60f"}.fa-marker:before{content:"\f5a1"}.fa-mars:before{content:"\f222"}.fa-mars-double:before{content:"\f227"}.fa-mars-stroke:before{content:"\f229"}.fa-mars-stroke-h:before{content:"\f22b"}.fa-mars-stroke-v:before{content:"\f22a"}.fa-mask:before{content:"\f6fa"}.fa-mastodon:before{content:"\f4f6"}.fa-maxcdn:before{content:"\f136"}.fa-mdb:before{content:"\f8ca"}.fa-medal:before{content:"\f5a2"}.fa-medapps:before{content:"\f3c6"}.fa-medium:before{content:"\f23a"}.fa-medium-m:before{content:"\f3c7"}.fa-medkit:before{content:"\f0fa"}.fa-medrt:before{content:"\f3c8"}.fa-meetup:before{content:"\f2e0"}.fa-megaport:before{content:"\f5a3"}.fa-meh:before{content:"\f11a"}.fa-meh-blank:before{content:"\f5a4"}.fa-meh-rolling-eyes:before{content:"\f5a5"}.fa-memory:before{content:"\f538"}.fa-mendeley:before{content:"\f7b3"}.fa-menorah:before{content:"\f676"}.fa-mercury:before{content:"\f223"}.fa-meteor:before{content:"\f753"}.fa-microblog:before{content:"\e01a"}.fa-microchip:before{content:"\f2db"}.fa-microphone:before{content:"\f130"}.fa-microphone-alt:before{content:"\f3c9"}.fa-microphone-alt-slash:before{content:"\f539"}.fa-microphone-slash:before{content:"\f131"}.fa-microscope:before{content:"\f610"}.fa-microsoft:before{content:"\f3ca"}.fa-minus:before{content:"\f068"}.fa-minus-circle:before{content:"\f056"}.fa-minus-square:before{content:"\f146"}.fa-mitten:before{content:"\f7b5"}.fa-mix:before{content:"\f3cb"}.fa-mixcloud:before{content:"\f289"}.fa-mixer:before{content:"\e056"}.fa-mizuni:before{content:"\f3cc"}.fa-mobile:before{content:"\f10b"}.fa-mobile-alt:before{content:"\f3cd"}.fa-modx:before{content:"\f285"}.fa-monero:before{content:"\f3d0"}.fa-money-bill:before{content:"\f0d6"}.fa-money-bill-alt:before{content:"\f3d1"}.fa-money-bill-wave:before{content:"\f53a"}.fa-money-bill-wave-alt:before{content:"\f53b"}.fa-money-check:before{content:"\f53c"}.fa-money-check-alt:before{content:"\f53d"}.fa-monument:before{content:"\f5a6"}.fa-moon:before{content:"\f186"}.fa-mortar-pestle:before{content:"\f5a7"}.fa-mosque:before{content:"\f678"}.fa-motorcycle:before{content:"\f21c"}.fa-mountain:before{content:"\f6fc"}.fa-mouse:before{content:"\f8cc"}.fa-mouse-pointer:before{content:"\f245"}.fa-mug-hot:before{content:"\f7b6"}.fa-music:before{content:"\f001"}.fa-napster:before{content:"\f3d2"}.fa-neos:before{content:"\f612"}.fa-network-wired:before{content:"\f6ff"}.fa-neuter:before{content:"\f22c"}.fa-newspaper:before{content:"\f1ea"}.fa-nimblr:before{content:"\f5a8"}.fa-node:before{content:"\f419"}.fa-node-js:before{content:"\f3d3"}.fa-not-equal:before{content:"\f53e"}.fa-notes-medical:before{content:"\f481"}.fa-npm:before{content:"\f3d4"}.fa-ns8:before{content:"\f3d5"}.fa-nutritionix:before{content:"\f3d6"}.fa-object-group:before{content:"\f247"}.fa-object-ungroup:before{content:"\f248"}.fa-octopus-deploy:before{content:"\e082"}.fa-odnoklassniki:before{content:"\f263"}.fa-odnoklassniki-square:before{content:"\f264"}.fa-oil-can:before{content:"\f613"}.fa-old-republic:before{content:"\f510"}.fa-om:before{content:"\f679"}.fa-opencart:before{content:"\f23d"}.fa-openid:before{content:"\f19b"}.fa-opera:before{content:"\f26a"}.fa-optin-monster:before{content:"\f23c"}.fa-orcid:before{content:"\f8d2"}.fa-osi:before{content:"\f41a"}.fa-otter:before{content:"\f700"}.fa-outdent:before{content:"\f03b"}.fa-page4:before{content:"\f3d7"}.fa-pagelines:before{content:"\f18c"}.fa-pager:before{content:"\f815"}.fa-paint-brush:before{content:"\f1fc"}.fa-paint-roller:before{content:"\f5aa"}.fa-palette:before{content:"\f53f"}.fa-palfed:before{content:"\f3d8"}.fa-pallet:before{content:"\f482"}.fa-paper-plane:before{content:"\f1d8"}.fa-paperclip:before{content:"\f0c6"}.fa-parachute-box:before{content:"\f4cd"}.fa-paragraph:before{content:"\f1dd"}.fa-parking:before{content:"\f540"}.fa-passport:before{content:"\f5ab"}.fa-pastafarianism:before{content:"\f67b"}.fa-paste:before{content:"\f0ea"}.fa-patreon:before{content:"\f3d9"}.fa-pause:before{content:"\f04c"}.fa-pause-circle:before{content:"\f28b"}.fa-paw:before{content:"\f1b0"}.fa-paypal:before{content:"\f1ed"}.fa-peace:before{content:"\f67c"}.fa-pen:before{content:"\f304"}.fa-pen-alt:before{content:"\f305"}.fa-pen-fancy:before{content:"\f5ac"}.fa-pen-nib:before{content:"\f5ad"}.fa-pen-square:before{content:"\f14b"}.fa-pencil-alt:before{content:"\f303"}.fa-pencil-ruler:before{content:"\f5ae"}.fa-penny-arcade:before{content:"\f704"}.fa-people-arrows:before{content:"\e068"}.fa-people-carry:before{content:"\f4ce"}.fa-pepper-hot:before{content:"\f816"}.fa-perbyte:before{content:"\e083"}.fa-percent:before{content:"\f295"}.fa-percentage:before{content:"\f541"}.fa-periscope:before{content:"\f3da"}.fa-person-booth:before{content:"\f756"}.fa-phabricator:before{content:"\f3db"}.fa-phoenix-framework:before{content:"\f3dc"}.fa-phoenix-squadron:before{content:"\f511"}.fa-phone:before{content:"\f095"}.fa-phone-alt:before{content:"\f879"}.fa-phone-slash:before{content:"\f3dd"}.fa-phone-square:before{content:"\f098"}.fa-phone-square-alt:before{content:"\f87b"}.fa-phone-volume:before{content:"\f2a0"}.fa-photo-video:before{content:"\f87c"}.fa-php:before{content:"\f457"}.fa-pied-piper:before{content:"\f2ae"}.fa-pied-piper-alt:before{content:"\f1a8"}.fa-pied-piper-hat:before{content:"\f4e5"}.fa-pied-piper-pp:before{content:"\f1a7"}.fa-pied-piper-square:before{content:"\e01e"}.fa-piggy-bank:before{content:"\f4d3"}.fa-pills:before{content:"\f484"}.fa-pinterest:before{content:"\f0d2"}.fa-pinterest-p:before{content:"\f231"}.fa-pinterest-square:before{content:"\f0d3"}.fa-pizza-slice:before{content:"\f818"}.fa-place-of-worship:before{content:"\f67f"}.fa-plane:before{content:"\f072"}.fa-plane-arrival:before{content:"\f5af"}.fa-plane-departure:before{content:"\f5b0"}.fa-plane-slash:before{content:"\e069"}.fa-play:before{content:"\f04b"}.fa-play-circle:before{content:"\f144"}.fa-playstation:before{content:"\f3df"}.fa-plug:before{content:"\f1e6"}.fa-plus:before{content:"\f067"}.fa-plus-circle:before{content:"\f055"}.fa-plus-square:before{content:"\f0fe"}.fa-podcast:before{content:"\f2ce"}.fa-poll:before{content:"\f681"}.fa-poll-h:before{content:"\f682"}.fa-poo:before{content:"\f2fe"}.fa-poo-storm:before{content:"\f75a"}.fa-poop:before{content:"\f619"}.fa-portrait:before{content:"\f3e0"}.fa-pound-sign:before{content:"\f154"}.fa-power-off:before{content:"\f011"}.fa-pray:before{content:"\f683"}.fa-praying-hands:before{content:"\f684"}.fa-prescription:before{content:"\f5b1"}.fa-prescription-bottle:before{content:"\f485"}.fa-prescription-bottle-alt:before{content:"\f486"}.fa-print:before{content:"\f02f"}.fa-procedures:before{content:"\f487"}.fa-product-hunt:before{content:"\f288"}.fa-project-diagram:before{content:"\f542"}.fa-pump-medical:before{content:"\e06a"}.fa-pump-soap:before{content:"\e06b"}.fa-pushed:before{content:"\f3e1"}.fa-puzzle-piece:before{content:"\f12e"}.fa-python:before{content:"\f3e2"}.fa-qq:before{content:"\f1d6"}.fa-qrcode:before{content:"\f029"}.fa-question:before{content:"\f128"}.fa-question-circle:before{content:"\f059"}.fa-quidditch:before{content:"\f458"}.fa-quinscape:before{content:"\f459"}.fa-quora:before{content:"\f2c4"}.fa-quote-left:before{content:"\f10d"}.fa-quote-right:before{content:"\f10e"}.fa-quran:before{content:"\f687"}.fa-r-project:before{content:"\f4f7"}.fa-radiation:before{content:"\f7b9"}.fa-radiation-alt:before{content:"\f7ba"}.fa-rainbow:before{content:"\f75b"}.fa-random:before{content:"\f074"}.fa-raspberry-pi:before{content:"\f7bb"}.fa-ravelry:before{content:"\f2d9"}.fa-react:before{content:"\f41b"}.fa-reacteurope:before{content:"\f75d"}.fa-readme:before{content:"\f4d5"}.fa-rebel:before{content:"\f1d0"}.fa-receipt:before{content:"\f543"}.fa-record-vinyl:before{content:"\f8d9"}.fa-recycle:before{content:"\f1b8"}.fa-red-river:before{content:"\f3e3"}.fa-reddit:before{content:"\f1a1"}.fa-reddit-alien:before{content:"\f281"}.fa-reddit-square:before{content:"\f1a2"}.fa-redhat:before{content:"\f7bc"}.fa-redo:before{content:"\f01e"}.fa-redo-alt:before{content:"\f2f9"}.fa-registered:before{content:"\f25d"}.fa-remove-format:before{content:"\f87d"}.fa-renren:before{content:"\f18b"}.fa-reply:before{content:"\f3e5"}.fa-reply-all:before{content:"\f122"}.fa-replyd:before{content:"\f3e6"}.fa-republican:before{content:"\f75e"}.fa-researchgate:before{content:"\f4f8"}.fa-resolving:before{content:"\f3e7"}.fa-restroom:before{content:"\f7bd"}.fa-retweet:before{content:"\f079"}.fa-rev:before{content:"\f5b2"}.fa-ribbon:before{content:"\f4d6"}.fa-ring:before{content:"\f70b"}.fa-road:before{content:"\f018"}.fa-robot:before{content:"\f544"}.fa-rocket:before{content:"\f135"}.fa-rocketchat:before{content:"\f3e8"}.fa-rockrms:before{content:"\f3e9"}.fa-route:before{content:"\f4d7"}.fa-rss:before{content:"\f09e"}.fa-rss-square:before{content:"\f143"}.fa-ruble-sign:before{content:"\f158"}.fa-ruler:before{content:"\f545"}.fa-ruler-combined:before{content:"\f546"}.fa-ruler-horizontal:before{content:"\f547"}.fa-ruler-vertical:before{content:"\f548"}.fa-running:before{content:"\f70c"}.fa-rupee-sign:before{content:"\f156"}.fa-rust:before{content:"\e07a"}.fa-sad-cry:before{content:"\f5b3"}.fa-sad-tear:before{content:"\f5b4"}.fa-safari:before{content:"\f267"}.fa-salesforce:before{content:"\f83b"}.fa-sass:before{content:"\f41e"}.fa-satellite:before{content:"\f7bf"}.fa-satellite-dish:before{content:"\f7c0"}.fa-save:before{content:"\f0c7"}.fa-schlix:before{content:"\f3ea"}.fa-school:before{content:"\f549"}.fa-screwdriver:before{content:"\f54a"}.fa-scribd:before{content:"\f28a"}.fa-scroll:before{content:"\f70e"}.fa-sd-card:before{content:"\f7c2"}.fa-search:before{content:"\f002"}.fa-search-dollar:before{content:"\f688"}.fa-search-location:before{content:"\f689"}.fa-search-minus:before{content:"\f010"}.fa-search-plus:before{content:"\f00e"}.fa-searchengin:before{content:"\f3eb"}.fa-seedling:before{content:"\f4d8"}.fa-sellcast:before{content:"\f2da"}.fa-sellsy:before{content:"\f213"}.fa-server:before{content:"\f233"}.fa-servicestack:before{content:"\f3ec"}.fa-shapes:before{content:"\f61f"}.fa-share:before{content:"\f064"}.fa-share-alt:before{content:"\f1e0"}.fa-share-alt-square:before{content:"\f1e1"}.fa-share-square:before{content:"\f14d"}.fa-shekel-sign:before{content:"\f20b"}.fa-shield-alt:before{content:"\f3ed"}.fa-shield-virus:before{content:"\e06c"}.fa-ship:before{content:"\f21a"}.fa-shipping-fast:before{content:"\f48b"}.fa-shirtsinbulk:before{content:"\f214"}.fa-shoe-prints:before{content:"\f54b"}.fa-shopify:before{content:"\e057"}.fa-shopping-bag:before{content:"\f290"}.fa-shopping-basket:before{content:"\f291"}.fa-shopping-cart:before{content:"\f07a"}.fa-shopware:before{content:"\f5b5"}.fa-shower:before{content:"\f2cc"}.fa-shuttle-van:before{content:"\f5b6"}.fa-sign:before{content:"\f4d9"}.fa-sign-in-alt:before{content:"\f2f6"}.fa-sign-language:before{content:"\f2a7"}.fa-sign-out-alt:before{content:"\f2f5"}.fa-signal:before{content:"\f012"}.fa-signature:before{content:"\f5b7"}.fa-sim-card:before{content:"\f7c4"}.fa-simplybuilt:before{content:"\f215"}.fa-sink:before{content:"\e06d"}.fa-sistrix:before{content:"\f3ee"}.fa-sitemap:before{content:"\f0e8"}.fa-sith:before{content:"\f512"}.fa-skating:before{content:"\f7c5"}.fa-sketch:before{content:"\f7c6"}.fa-skiing:before{content:"\f7c9"}.fa-skiing-nordic:before{content:"\f7ca"}.fa-skull:before{content:"\f54c"}.fa-skull-crossbones:before{content:"\f714"}.fa-skyatlas:before{content:"\f216"}.fa-skype:before{content:"\f17e"}.fa-slack:before{content:"\f198"}.fa-slack-hash:before{content:"\f3ef"}.fa-slash:before{content:"\f715"}.fa-sleigh:before{content:"\f7cc"}.fa-sliders-h:before{content:"\f1de"}.fa-slideshare:before{content:"\f1e7"}.fa-smile:before{content:"\f118"}.fa-smile-beam:before{content:"\f5b8"}.fa-smile-wink:before{content:"\f4da"}.fa-smog:before{content:"\f75f"}.fa-smoking:before{content:"\f48d"}.fa-smoking-ban:before{content:"\f54d"}.fa-sms:before{content:"\f7cd"}.fa-snapchat:before{content:"\f2ab"}.fa-snapchat-ghost:before{content:"\f2ac"}.fa-snapchat-square:before{content:"\f2ad"}.fa-snowboarding:before{content:"\f7ce"}.fa-snowflake:before{content:"\f2dc"}.fa-snowman:before{content:"\f7d0"}.fa-snowplow:before{content:"\f7d2"}.fa-soap:before{content:"\e06e"}.fa-socks:before{content:"\f696"}.fa-solar-panel:before{content:"\f5ba"}.fa-sort:before{content:"\f0dc"}.fa-sort-alpha-down:before{content:"\f15d"}.fa-sort-alpha-down-alt:before{content:"\f881"}.fa-sort-alpha-up:before{content:"\f15e"}.fa-sort-alpha-up-alt:before{content:"\f882"}.fa-sort-amount-down:before{content:"\f160"}.fa-sort-amount-down-alt:before{content:"\f884"}.fa-sort-amount-up:before{content:"\f161"}.fa-sort-amount-up-alt:before{content:"\f885"}.fa-sort-down:before{content:"\f0dd"}.fa-sort-numeric-down:before{content:"\f162"}.fa-sort-numeric-down-alt:before{content:"\f886"}.fa-sort-numeric-up:before{content:"\f163"}.fa-sort-numeric-up-alt:before{content:"\f887"}.fa-sort-up:before{content:"\f0de"}.fa-soundcloud:before{content:"\f1be"}.fa-sourcetree:before{content:"\f7d3"}.fa-spa:before{content:"\f5bb"}.fa-space-shuttle:before{content:"\f197"}.fa-speakap:before{content:"\f3f3"}.fa-speaker-deck:before{content:"\f83c"}.fa-spell-check:before{content:"\f891"}.fa-spider:before{content:"\f717"}.fa-spinner:before{content:"\f110"}.fa-splotch:before{content:"\f5bc"}.fa-spotify:before{content:"\f1bc"}.fa-spray-can:before{content:"\f5bd"}.fa-square:before{content:"\f0c8"}.fa-square-full:before{content:"\f45c"}.fa-square-root-alt:before{content:"\f698"}.fa-squarespace:before{content:"\f5be"}.fa-stack-exchange:before{content:"\f18d"}.fa-stack-overflow:before{content:"\f16c"}.fa-stackpath:before{content:"\f842"}.fa-stamp:before{content:"\f5bf"}.fa-star:before{content:"\f005"}.fa-star-and-crescent:before{content:"\f699"}.fa-star-half:before{content:"\f089"}.fa-star-half-alt:before{content:"\f5c0"}.fa-star-of-david:before{content:"\f69a"}.fa-star-of-life:before{content:"\f621"}.fa-staylinked:before{content:"\f3f5"}.fa-steam:before{content:"\f1b6"}.fa-steam-square:before{content:"\f1b7"}.fa-steam-symbol:before{content:"\f3f6"}.fa-step-backward:before{content:"\f048"}.fa-step-forward:before{content:"\f051"}.fa-stethoscope:before{content:"\f0f1"}.fa-sticker-mule:before{content:"\f3f7"}.fa-sticky-note:before{content:"\f249"}.fa-stop:before{content:"\f04d"}.fa-stop-circle:before{content:"\f28d"}.fa-stopwatch:before{content:"\f2f2"}.fa-stopwatch-20:before{content:"\e06f"}.fa-store:before{content:"\f54e"}.fa-store-alt:before{content:"\f54f"}.fa-store-alt-slash:before{content:"\e070"}.fa-store-slash:before{content:"\e071"}.fa-strava:before{content:"\f428"}.fa-stream:before{content:"\f550"}.fa-street-view:before{content:"\f21d"}.fa-strikethrough:before{content:"\f0cc"}.fa-stripe:before{content:"\f429"}.fa-stripe-s:before{content:"\f42a"}.fa-stroopwafel:before{content:"\f551"}.fa-studiovinari:before{content:"\f3f8"}.fa-stumbleupon:before{content:"\f1a4"}.fa-stumbleupon-circle:before{content:"\f1a3"}.fa-subscript:before{content:"\f12c"}.fa-subway:before{content:"\f239"}.fa-suitcase:before{content:"\f0f2"}.fa-suitcase-rolling:before{content:"\f5c1"}.fa-sun:before{content:"\f185"}.fa-superpowers:before{content:"\f2dd"}.fa-superscript:before{content:"\f12b"}.fa-supple:before{content:"\f3f9"}.fa-surprise:before{content:"\f5c2"}.fa-suse:before{content:"\f7d6"}.fa-swatchbook:before{content:"\f5c3"}.fa-swift:before{content:"\f8e1"}.fa-swimmer:before{content:"\f5c4"}.fa-swimming-pool:before{content:"\f5c5"}.fa-symfony:before{content:"\f83d"}.fa-synagogue:before{content:"\f69b"}.fa-sync:before{content:"\f021"}.fa-sync-alt:before{content:"\f2f1"}.fa-syringe:before{content:"\f48e"}.fa-table:before{content:"\f0ce"}.fa-table-tennis:before{content:"\f45d"}.fa-tablet:before{content:"\f10a"}.fa-tablet-alt:before{content:"\f3fa"}.fa-tablets:before{content:"\f490"}.fa-tachometer-alt:before{content:"\f3fd"}.fa-tag:before{content:"\f02b"}.fa-tags:before{content:"\f02c"}.fa-tape:before{content:"\f4db"}.fa-tasks:before{content:"\f0ae"}.fa-taxi:before{content:"\f1ba"}.fa-teamspeak:before{content:"\f4f9"}.fa-teeth:before{content:"\f62e"}.fa-teeth-open:before{content:"\f62f"}.fa-telegram:before{content:"\f2c6"}.fa-telegram-plane:before{content:"\f3fe"}.fa-temperature-high:before{content:"\f769"}.fa-temperature-low:before{content:"\f76b"}.fa-tencent-weibo:before{content:"\f1d5"}.fa-tenge:before{content:"\f7d7"}.fa-terminal:before{content:"\f120"}.fa-text-height:before{content:"\f034"}.fa-text-width:before{content:"\f035"}.fa-th:before{content:"\f00a"}.fa-th-large:before{content:"\f009"}.fa-th-list:before{content:"\f00b"}.fa-the-red-yeti:before{content:"\f69d"}.fa-theater-masks:before{content:"\f630"}.fa-themeco:before{content:"\f5c6"}.fa-themeisle:before{content:"\f2b2"}.fa-thermometer:before{content:"\f491"}.fa-thermometer-empty:before{content:"\f2cb"}.fa-thermometer-full:before{content:"\f2c7"}.fa-thermometer-half:before{content:"\f2c9"}.fa-thermometer-quarter:before{content:"\f2ca"}.fa-thermometer-three-quarters:before{content:"\f2c8"}.fa-think-peaks:before{content:"\f731"}.fa-thumbs-down:before{content:"\f165"}.fa-thumbs-up:before{content:"\f164"}.fa-thumbtack:before{content:"\f08d"}.fa-ticket-alt:before{content:"\f3ff"}.fa-tiktok:before{content:"\e07b"}.fa-times:before{content:"\f00d"}.fa-times-circle:before{content:"\f057"}.fa-tint:before{content:"\f043"}.fa-tint-slash:before{content:"\f5c7"}.fa-tired:before{content:"\f5c8"}.fa-toggle-off:before{content:"\f204"}.fa-toggle-on:before{content:"\f205"}.fa-toilet:before{content:"\f7d8"}.fa-toilet-paper:before{content:"\f71e"}.fa-toilet-paper-slash:before{content:"\e072"}.fa-toolbox:before{content:"\f552"}.fa-tools:before{content:"\f7d9"}.fa-tooth:before{content:"\f5c9"}.fa-torah:before{content:"\f6a0"}.fa-torii-gate:before{content:"\f6a1"}.fa-tractor:before{content:"\f722"}.fa-trade-federation:before{content:"\f513"}.fa-trademark:before{content:"\f25c"}.fa-traffic-light:before{content:"\f637"}.fa-trailer:before{content:"\e041"}.fa-train:before{content:"\f238"}.fa-tram:before{content:"\f7da"}.fa-transgender:before{content:"\f224"}.fa-transgender-alt:before{content:"\f225"}.fa-trash:before{content:"\f1f8"}.fa-trash-alt:before{content:"\f2ed"}.fa-trash-restore:before{content:"\f829"}.fa-trash-restore-alt:before{content:"\f82a"}.fa-tree:before{content:"\f1bb"}.fa-trello:before{content:"\f181"}.fa-trophy:before{content:"\f091"}.fa-truck:before{content:"\f0d1"}.fa-truck-loading:before{content:"\f4de"}.fa-truck-monster:before{content:"\f63b"}.fa-truck-moving:before{content:"\f4df"}.fa-truck-pickup:before{content:"\f63c"}.fa-tshirt:before{content:"\f553"}.fa-tty:before{content:"\f1e4"}.fa-tumblr:before{content:"\f173"}.fa-tumblr-square:before{content:"\f174"}.fa-tv:before{content:"\f26c"}.fa-twitch:before{content:"\f1e8"}.fa-twitter:before{content:"\f099"}.fa-twitter-square:before{content:"\f081"}.fa-typo3:before{content:"\f42b"}.fa-uber:before{content:"\f402"}.fa-ubuntu:before{content:"\f7df"}.fa-uikit:before{content:"\f403"}.fa-umbraco:before{content:"\f8e8"}.fa-umbrella:before{content:"\f0e9"}.fa-umbrella-beach:before{content:"\f5ca"}.fa-uncharted:before{content:"\e084"}.fa-underline:before{content:"\f0cd"}.fa-undo:before{content:"\f0e2"}.fa-undo-alt:before{content:"\f2ea"}.fa-uniregistry:before{content:"\f404"}.fa-unity:before{content:"\e049"}.fa-universal-access:before{content:"\f29a"}.fa-university:before{content:"\f19c"}.fa-unlink:before{content:"\f127"}.fa-unlock:before{content:"\f09c"}.fa-unlock-alt:before{content:"\f13e"}.fa-unsplash:before{content:"\e07c"}.fa-untappd:before{content:"\f405"}.fa-upload:before{content:"\f093"}.fa-ups:before{content:"\f7e0"}.fa-usb:before{content:"\f287"}.fa-user:before{content:"\f007"}.fa-user-alt:before{content:"\f406"}.fa-user-alt-slash:before{content:"\f4fa"}.fa-user-astronaut:before{content:"\f4fb"}.fa-user-check:before{content:"\f4fc"}.fa-user-circle:before{content:"\f2bd"}.fa-user-clock:before{content:"\f4fd"}.fa-user-cog:before{content:"\f4fe"}.fa-user-edit:before{content:"\f4ff"}.fa-user-friends:before{content:"\f500"}.fa-user-graduate:before{content:"\f501"}.fa-user-injured:before{content:"\f728"}.fa-user-lock:before{content:"\f502"}.fa-user-md:before{content:"\f0f0"}.fa-user-minus:before{content:"\f503"}.fa-user-ninja:before{content:"\f504"}.fa-user-nurse:before{content:"\f82f"}.fa-user-plus:before{content:"\f234"}.fa-user-secret:before{content:"\f21b"}.fa-user-shield:before{content:"\f505"}.fa-user-slash:before{content:"\f506"}.fa-user-tag:before{content:"\f507"}.fa-user-tie:before{content:"\f508"}.fa-user-times:before{content:"\f235"}.fa-users:before{content:"\f0c0"}.fa-users-cog:before{content:"\f509"}.fa-users-slash:before{content:"\e073"}.fa-usps:before{content:"\f7e1"}.fa-ussunnah:before{content:"\f407"}.fa-utensil-spoon:before{content:"\f2e5"}.fa-utensils:before{content:"\f2e7"}.fa-vaadin:before{content:"\f408"}.fa-vector-square:before{content:"\f5cb"}.fa-venus:before{content:"\f221"}.fa-venus-double:before{content:"\f226"}.fa-venus-mars:before{content:"\f228"}.fa-vest:before{content:"\e085"}.fa-vest-patches:before{content:"\e086"}.fa-viacoin:before{content:"\f237"}.fa-viadeo:before{content:"\f2a9"}.fa-viadeo-square:before{content:"\f2aa"}.fa-vial:before{content:"\f492"}.fa-vials:before{content:"\f493"}.fa-viber:before{content:"\f409"}.fa-video:before{content:"\f03d"}.fa-video-slash:before{content:"\f4e2"}.fa-vihara:before{content:"\f6a7"}.fa-vimeo:before{content:"\f40a"}.fa-vimeo-square:before{content:"\f194"}.fa-vimeo-v:before{content:"\f27d"}.fa-vine:before{content:"\f1ca"}.fa-virus:before{content:"\e074"}.fa-virus-slash:before{content:"\e075"}.fa-viruses:before{content:"\e076"}.fa-vk:before{content:"\f189"}.fa-vnv:before{content:"\f40b"}.fa-voicemail:before{content:"\f897"}.fa-volleyball-ball:before{content:"\f45f"}.fa-volume-down:before{content:"\f027"}.fa-volume-mute:before{content:"\f6a9"}.fa-volume-off:before{content:"\f026"}.fa-volume-up:before{content:"\f028"}.fa-vote-yea:before{content:"\f772"}.fa-vr-cardboard:before{content:"\f729"}.fa-vuejs:before{content:"\f41f"}.fa-walking:before{content:"\f554"}.fa-wallet:before{content:"\f555"}.fa-warehouse:before{content:"\f494"}.fa-watchman-monitoring:before{content:"\e087"}.fa-water:before{content:"\f773"}.fa-wave-square:before{content:"\f83e"}.fa-waze:before{content:"\f83f"}.fa-weebly:before{content:"\f5cc"}.fa-weibo:before{content:"\f18a"}.fa-weight:before{content:"\f496"}.fa-weight-hanging:before{content:"\f5cd"}.fa-weixin:before{content:"\f1d7"}.fa-whatsapp:before{content:"\f232"}.fa-whatsapp-square:before{content:"\f40c"}.fa-wheelchair:before{content:"\f193"}.fa-whmcs:before{content:"\f40d"}.fa-wifi:before{content:"\f1eb"}.fa-wikipedia-w:before{content:"\f266"}.fa-wind:before{content:"\f72e"}.fa-window-close:before{content:"\f410"}.fa-window-maximize:before{content:"\f2d0"}.fa-window-minimize:before{content:"\f2d1"}.fa-window-restore:before{content:"\f2d2"}.fa-windows:before{content:"\f17a"}.fa-wine-bottle:before{content:"\f72f"}.fa-wine-glass:before{content:"\f4e3"}.fa-wine-glass-alt:before{content:"\f5ce"}.fa-wix:before{content:"\f5cf"}.fa-wizards-of-the-coast:before{content:"\f730"}.fa-wodu:before{content:"\e088"}.fa-wolf-pack-battalion:before{content:"\f514"}.fa-won-sign:before{content:"\f159"}.fa-wordpress:before{content:"\f19a"}.fa-wordpress-simple:before{content:"\f411"}.fa-wpbeginner:before{content:"\f297"}.fa-wpexplorer:before{content:"\f2de"}.fa-wpforms:before{content:"\f298"}.fa-wpressr:before{content:"\f3e4"}.fa-wrench:before{content:"\f0ad"}.fa-x-ray:before{content:"\f497"}.fa-xbox:before{content:"\f412"}.fa-xing:before{content:"\f168"}.fa-xing-square:before{content:"\f169"}.fa-y-combinator:before{content:"\f23b"}.fa-yahoo:before{content:"\f19e"}.fa-yammer:before{content:"\f840"}.fa-yandex:before{content:"\f413"}.fa-yandex-international:before{content:"\f414"}.fa-yarn:before{content:"\f7e3"}.fa-yelp:before{content:"\f1e9"}.fa-yen-sign:before{content:"\f157"}.fa-yin-yang:before{content:"\f6ad"}.fa-yoast:before{content:"\f2b1"}.fa-youtube:before{content:"\f167"}.fa-youtube-square:before{content:"\f431"}.fa-zhihu:before{content:"\f63f"}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}@font-face{font-family:"Font Awesome 5 Brands";font-style:normal;font-weight:400;font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-brands-400.svg#fontawesome) format("svg")}.fab{font-family:"Font Awesome 5 Brands"}@font-face{font-family:"Font Awesome 5 Free";font-style:normal;font-weight:400;font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.svg#fontawesome) format("svg")}@font-face{font-family:"Font Awesome 5 Pro";font-style:normal;font-weight:400;font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-regular-400.svg#fontawesome) format("svg")}.fab,.far{font-weight:400}@font-face{font-family:"Font Awesome 5 Free";font-style:normal;font-weight:900;font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.svg#fontawesome) format("svg")}@font-face{font-family:"Font Awesome 5 Pro";font-style:normal;font-weight:900;font-display:block;src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.eot);src:url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.eot?#iefix) format("embedded-opentype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.woff2) format("woff2"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.woff) format("woff"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.ttf) format("truetype"),url(https://ka-f.fontawesome.com/releases/v5.15.4/webfonts/free-fa-solid-900.svg#fontawesome) format("svg")}.fa,.far,.fas{font-family:"Font Awesome 5 Free"}.fa,.fas{font-weight:900}</style>
<link rel="https://api.w.org/" href="https://wallenwang.com/wp-json/"><link rel="alternate" type="application/json" href="https://wallenwang.com/wp-json/wp/v2/posts/69"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://wallenwang.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://wallenwang.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 5.8.4">
<link rel="canonical" href="https://wallenwang.com/2018/11/tcmalloc/">
<link rel="shortlink" href="https://wallenwang.com/?p=69">
<link rel="alternate" type="application/json+oembed" href="https://wallenwang.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F">
<link rel="alternate" type="text/xml+oembed" href="https://wallenwang.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F&amp;format=xml">
<meta name="framework" content="Redux 4.3.7"><style>

@media(min-width:768px) {
	.dl-horizontal dt {
		float: left;
		width: 160px;
		overflow: hidden;
		clear: left;
		text-align: right;
		text-overflow: ellipsis;
		white-space: nowrap
	}

	.dl-horizontal dd {
		margin-left: 180px
	}

	.dl-horizontal dd:before,.dl-horizontal dd:after {
		display: table;
		content: " "
	}

	.dl-horizontal dd:after {
		clear: both
	}

	.dl-horizontal dd:before,.dl-horizontal dd:after {
		display: table;
		content: " "
	}

	.dl-horizontal dd:after {
		clear: both
	}
}

</style>
        <style type="text/css">
            .cwp-li {
                overflow: hidden;
            }

            .cwp-avatar {
                float: left;
                margin-top: .2em;
                margin-right: 1em;
            }

            .cwp-avatar.rounded .avatar {
                border-radius: 50%;
            }

            .cwp-avatar.square .avatar {
                border-radius: 0;
            }

            .cwp-comment-excerpt {
                display: block;
                color: #787878;
            }
        </style>
<link rel="icon" href="https://wallenwang.com/wp-content/uploads/cropped-iconfinder_piccoloArtboard_9_1618078-150x150.png" sizes="32x32">
<link rel="icon" href="https://wallenwang.com/wp-content/uploads/cropped-iconfinder_piccoloArtboard_9_1618078-300x300.png" sizes="192x192">
<link rel="apple-touch-icon" href="https://wallenwang.com/wp-content/uploads/cropped-iconfinder_piccoloArtboard_9_1618078-300x300.png">
<meta name="msapplication-TileImage" content="https://wallenwang.com/wp-content/uploads/cropped-iconfinder_piccoloArtboard_9_1618078-300x300.png">
		<style type="text/css" id="wp-custom-css">
			blockquote {
	text-align: left;
}

a {
	word-wrap: break-word;
}

code {
	word-break: break-word;
}

.widget-title {
	font-size: 1.7rem !important;
}

.typology-soc-menu li a[href*="weixin"]::before {
  content: "\f1d7";
}

.typology-actions-button .typology-soc-menu li a[href*="weixin"]:before {
  background-color: #23d96e;
}

.typology-soc-menu li a[href*="qq_ar_code"]::before {
  content: "\f1d6";
}

.typology-actions-button .typology-soc-menu li a[href*="qq_ar_code"]:before {
  background-color: #5294d0;
}

code {
    color: #dd1144;
    background-color: #f7f7f9;
    border: 1px solid #e1e1e8;
    white-space: pre-wrap;
    padding: 0 3px 2px;
    border-radius: 3px;
    font-family: "SFMono-Regular",Consolas,"Liberation Mono",Menlo,Courier,monospace;
}
		</style>
			<style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style><style id="typology-full-fix" type="text/css">.alignfull { max-width: 1170px; width: 100vw; left:-185px; }</style></head>

	<body class="post-template-default single single-post postid-69 single-format-standard wp-embed-responsive typology-v_1_7_2 typology-child has-ftoc wpdiscuz_7.3.10"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" overflow="hidden" style="position:absolute;width:0;height:0"><defs><symbol id="wbsico-dwqr-close" viewBox="0 0 18 18"><path fill-rule="evenodd" d="M17.61.39a1.24 1.24 0 00-1.8 0L9 7.2 2.19.39C1.67-.13.9-.13.39.39s-.52 1.28 0 1.8L7.2 9 .39 15.81a1.24 1.24 0 000 1.8c.25.26.51.39.9.39s.64-.13.9-.39L9 10.8l6.81 6.81c.26.26.65.39.9.39s.65-.13.9-.39c.52-.51.52-1.28 0-1.8L10.8 9l6.81-6.81c.52-.52.52-1.29 0-1.8z"></path></symbol><symbol id="wbsico-dwqr-donate" viewBox="0 0 9 18"><path fill-rule="evenodd" d="M5.63 8.1V4.61c.67.23 1.12.9 1.12 1.58S7.2 7.3 7.88 7.3 9 6.86 9 6.2a3.8 3.8 0 00-3.38-3.83V1.12C5.63.45 5.17 0 4.5 0S3.37.45 3.37 1.12v1.24A3.8 3.8 0 000 6.2c0 2.35 1.8 3.25 3.38 3.7v3.49c-.68-.23-1.13-.9-1.13-1.58S1.8 10.7 1.12 10.7 0 11.14 0 11.8a3.8 3.8 0 003.38 3.83v1.24c0 .67.45 1.12 1.12 1.12s1.13-.45 1.13-1.12v-1.24A3.88 3.88 0 009 11.8c0-2.36-1.8-3.26-3.38-3.7zM2.25 6.19c0-.79.45-1.35 1.13-1.58v2.93c-.8-.34-1.13-.68-1.13-1.35zm3.38 7.2v-2.93c.78.34 1.12.68 1.12 1.35 0 .79-.45 1.35-1.13 1.58z"></path></symbol><symbol id="wbsico-dwqr-like" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M13.3 6H9V2c0-1.5-.8-2-2-2-.3 0-.6.2-.6.5L4 8v8h8.6c1.3 0 2.4-1 2.6-2.3l.8-4.6c.1-.8-.1-1.6-.6-2.1-.5-.7-1.3-1-2.1-1M0 8h2v8H0z"></path></symbol><symbol id="wbsico-dwqr-share" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M11 6a3 3 0 10-3-2.4l-3 2A3 3 0 003 5a3 3 0 000 6 3 3 0 001.9-.7l3.2 2-.1.7a3 3 0 103-3 3 3 0 00-1.9.7L6 8.7a3 3 0 000-1.3l3.2-2A3 3 0 0011 6"></path></symbol><symbol id="wbsico-dwqr-qq" viewBox="0 0 32 32"><path fill="var(--color1, #00b6f7)" d="M16 0C7.163 0 0 7.163 0 16s7.163 16 16 16 16-7.163 16-16S24.837 0 16 0zm7.09 19.908a11.686 11.686 0 01-1.463 2.655l.023-.032a2.17 2.17 0 011.52 2.029v.002s.06 1.636-3.54 1.523c0 0-2.54-.2-3.3-1.269h-.66c-.76 1.072-3.3 1.269-3.3 1.269-3.6.113-3.54-1.523-3.54-1.523a2.168 2.168 0 011.505-2.027l.015-.004a11.565 11.565 0 01-1.412-2.544l-.028-.079c-2.25 3.639-2.02-.508-2.02-.508a7.824 7.824 0 012.189-4.06l.001-.001c-.25-2.229.68-2.624.68-2.624.19-6.893 6.12-6.773 6.24-6.769s6.05-.124 6.24 6.769c0 0 .93.395.68 2.623a7.796 7.796 0 012.181 4.012l.009.05s.23 4.147-2.02.508z"></path></symbol><symbol id="wbsico-dwqr-weibo" viewBox="0 0 32 32"><path fill="var(--color2, #e45c62)" d="M14.54 15.879c-3.18.146-5.75 1.851-5.75 3.977s2.57 3.718 5.75 3.569 5.76-2.137 5.76-4.26-2.58-3.432-5.76-3.286zm2.17 5.346a3.715 3.715 0 01-4.797.848l.017.009a1.663 1.663 0 01-.86-1.432v-.001a3 3 0 012.823-3.371h.007c3.21-.373 3.78 2.689 2.81 3.946zm-3.67-1.594c-.557.062-.99.516-1.02 1.077v.003a.872.872 0 001.086.773l-.006.001a1.16 1.16 0 001.079-1.02l.001-.005a.923.923 0 00-1.147-.828l.006-.001zm1.52-.413a.48.48 0 00-.139.612l-.001-.003a.372.372 0 00.56.051.492.492 0 00.169-.612l.001.003a.385.385 0 00-.59-.052zM16 0C7.163 0 0 7.163 0 16s7.163 16 16 16 16-7.163 16-16S24.837 0 16 0zm7.14 20.574c-1.31 2.786-5.63 4.142-8.84 3.89-3.04-.239-6.96-1.251-7.37-4.937v-.047c0-1.45.534-2.775 1.416-3.789l-.006.007s2.33-3.252 5.04-4.179 3.03.639 3.03 1.562c-.15.784-.42 1.245.6.928 0 0 2.67-1.237 3.77-.14.258.309.415.711.415 1.149 0 .354-.102.685-.279.963l.004-.007s-.36.408.39.554a2.684 2.684 0 011.823 4.058l.007-.011zm-2.63-7.7a.527.527 0 01-.001-1.05h.001a2.362 2.362 0 012.876 2.926l.004-.017v.056a.53.53 0 01-1.05-.083s.52-2.349-1.83-1.83zm5.53 2.81l.001.028a.625.625 0 01-.745.614l.004.001a.7.7 0 01-.76-.684v-.001c.009-.267.064-.518.155-.75l-.005.015a3.38 3.38 0 00-.238-2.551l.009.019a4.027 4.027 0 00-3.796-1.87l.016-.001c-.197.071-.43.129-.67.164l-.02.002a.768.768 0 01-.216-1.499l.005-.001a.502.502 0 01.085-.043l.005-.002a6.58 6.58 0 012.662-.019l-.042-.007c2.02.473 4.8 2.428 3.55 6.59z"></path></symbol><symbol id="wbsico-dwqr-weixin" viewBox="0 0 32 32"><path fill="var(--color3, #68c313)" d="M18.11 15.987a.774.774 0 00-.73.755v.001c.043.374.35.663.729.678h.001a.744.744 0 10-.005-1.433l.005-.001zm-2.4-3.52a.867.867 0 00.941-.864l-.001-.05v.002l.002-.063a.854.854 0 00-.946-.849h.004a.984.984 0 00-1.069.909v.003a1.001 1.001 0 001.073.912h-.003zM16 0C7.163 0 0 7.163 0 16s7.163 16 16 16 16-7.163 16-16S24.837 0 16 0zm-3.02 20.054a8.547 8.547 0 01-2.64-.435l.06.017-2.64 1.33.76-2.242c-1.715-1.031-2.865-2.849-2.95-4.941v-.012c0-3.545 3.34-6.256 7.41-6.256 3.59 0 6.8 2.137 7.43 5.161a3.677 3.677 0 00-.707-.078H19.7a6.06 6.06 0 00-6.28 5.856v.01c.005.558.081 1.096.22 1.608l-.01-.044a5.385 5.385 0 01-.545.027l-.11-.001h.005zm10.87 2.554l.52 1.877-1.98-1.121c-.657.192-1.424.331-2.213.389l-.037.002c-3.49 0-6.25-2.4-6.25-5.37s2.76-5.37 6.25-5.37c3.32 0 6.29 2.4 6.29 5.37a5.531 5.531 0 01-2.557 4.21l-.023.013zm-13.3-11.965a1.027 1.027 0 00-1.12.907v.005a1.045 1.045 0 001.124.911h-.004l.04.001a.9.9 0 00.9-.9v-.014.001l.001-.03a.884.884 0 00-.943-.882h.003zm11.65 5.344a.752.752 0 00-.73.752v.005a.739.739 0 00.73.678.74.74 0 10-.005-1.433l.005-.001z"></path></symbol><symbol id="wbsico-dwqr-qzone" viewBox="0 0 18 18"><path fill="var(--color4, #ebbf00)" d="M12.26 7.09H6.01l4.12.7-4.42 3.6h6.7l-3.96-.86 3.81-3.45zM9 0a9 9 0 109 9 9 9 0 00-9-9zm5.85 7.39l-2.28 1.94.75 4.88a.31.31 0 01-.3.15l-3.97-2.44-3.99 2.44c-.3 0-.33 0-.33-.15l.55-4.88-2.42-2.14-.82-.59h-.23v-.02l.23.03h4.73l.62-1.1L8.9 2.3h.3l1.68 3.22.6 1.09h4.12c.16 0 .16-.1.16.06l-.92.72z"></path></symbol><symbol id="wbsico-dwqr-poster" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14 0a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2C0 .9.9 0 2 0h12zm0 2H2v12h12V2zm-6 9a1 1 0 110 2 1 1 0 010-2zm5-8v7H3V3h10z"></path></symbol></defs></svg>

		
			<header id="typology-header" class="typology-header typology-header-sticky" style="z-index: 9001; top: 0px;">
				<div class="container">
					<div class="slot-l">
	<div class="typology-site-branding">
	
	<span class="site-title h4"><a href="https://wallenwang.com/" rel="home">Wallen's Blog</a></span>	
</div>
	
</div>

<div class="slot-r">
				<ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95" class="typology-nav typology-main-navigation" style="opacity: 1; position: relative;"><li id="menu-item-963" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-963"><a href="https://wallenwang.com/">首页</a></li>
<li id="menu-item-1666" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1666"><a href="https://wallenwang.com/2018/11/tcmalloc/#">NMGen Study</a>
<ul class="sub-menu">
	<li id="menu-item-1665" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1665"><a href="https://wallenwang.com/2021/09/nmgen_study-heightfields/">高度场简介</a></li>
	<li id="menu-item-1664" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1664"><a href="https://wallenwang.com/2021/09/nmgen_study-overview/">处理过程概览</a></li>
	<li id="menu-item-1663" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1663"><a href="https://wallenwang.com/2021/09/nmgen_study-config/">配置参数</a></li>
	<li id="menu-item-1662" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1662"><a href="https://wallenwang.com/2021/09/nmgen_study-voxelization/">体素化过程</a></li>
	<li id="menu-item-1661" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1661"><a href="https://wallenwang.com/2021/09/nmgen_study-regiongen/">区域生成</a></li>
	<li id="menu-item-1743" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1743"><a href="https://wallenwang.com/2021/09/nmgen_study-contourgen/">轮廓生成</a></li>
	<li id="menu-item-1770" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1770"><a href="https://wallenwang.com/2021/09/nmgen_study-polygen/">凸多边形生成</a></li>
	<li id="menu-item-1830" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1830"><a href="https://wallenwang.com/2021/09/nmgen_study-detailgen/">细节网格生成</a></li>
</ul>
</li>
<li id="menu-item-964" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-964"><a href="https://wallenwang.com/about/">关于我</a></li>
</ul>			
	<ul class="typology-nav typology-actions-list">
    <li class="typology-actions-button typology-social-icons">
	<span>
		<i class="fa fa-share-alt" aria-hidden="true"></i>
	</span>
	<ul class="sub-menu">
        <li>
            <ul id="menu-%e7%a4%be%e4%ba%a4%e8%8f%9c%e5%8d%95" class="typology-soc-menu"><li id="menu-item-1458" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1458"><a href="mailto:215796979@qq.com"><span class="typology-social-name">邮件</span></a></li>
<li id="menu-item-1696" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1696"><a href="https://wallenwang.com/wp-content/uploads/weixin_wallen0109.jpeg"><span class="typology-social-name">微信</span></a></li>
<li id="menu-item-1725" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1725"><a href="https://wallenwang.com/wp-content/uploads/qq_ar_code.png"><span class="typology-social-name">QQ</span></a></li>
<li id="menu-item-1292" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1292"><a href="https://github.com/xinghun"><span class="typology-social-name">Github</span></a></li>
<li id="menu-item-1457" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1457"><a href="https://wallenwang.com/feed/"><span class="typology-social-name">RSS</span></a></li>
</ul>        </li>
	</ul>
</li>
<li class="typology-actions-button typology-action-search">
	<span>
		<i class="fa fa-search" aria-hidden="true"></i>
	</span>
	<ul class="sub-menu">
		<li>
			<form class="typology-search-form" action="https://wallenwang.com/" method="get">
	<input name="s" type="text" value="" placeholder="点击这里搜索">
	<button type="submit" class="typology-button typology-button-search typology-icon-button">搜索</button> 
	</form>		</li>
	</ul>
</li><li class="typology-action-button typology-action-sidebar ">
		<span>
			<i class="fa fa-bars" aria-hidden="true"></i>
		</span>
</li>
</ul></div>				</div>
			</header>

		
	
			
        				<div id="typology-cover" class="typology-cover typology-cover-empty">
            		</div>
		<div class="typology-fake-bg">
			<div class="typology-section">
				    
				<div class="section-content">
    <article id="post-69" class="typology-post typology-single-post post-69 post type-post status-publish format-standard has-post-thumbnail hentry category-c-c tag-tcmalloc tag-8 post-ftoc">
	
	            
            <header class="entry-header">

                <h1 class="entry-title entry-title-cover-empty">TCMalloc解密</h1>
                                    <div class="entry-meta"><div class="meta-item meta-author">By <span class="vcard author"><span class="fn"><a href="https://wallenwang.com/author/wallen/">wallen</a></span></span></div><div class="meta-item meta-category">分类 <a href="https://wallenwang.com/category/c-c/" rel="category tag">C/C++</a></div><div class="meta-item meta-date"><span class="updated">2018年11月22日</span></div><div class="meta-item meta-comments"><a href="https://wallenwang.com/2018/11/tcmalloc/#comments">32评论</a></div><div class="meta-item meta-views">13,578 阅读</div></div>
                
                                    <div class="post-letter">T</div>
                
            </header>

                
        <div class="entry-content clearfix">
                        
            
            
<div id="ftwp-postcontent">
<h1 id="ftoc-heading-1" class="ftwp-heading">写在前面</h1>



<p>本文首先简单介绍TCMalloc及其使用方法，然后解释TCMalloc替代系统的内存分配函数的原理，再从宏观上讨论其内存分配的策略，在此之后再深入讨论实现细节。</p>



<p>有几点需要说明：</p>



<ul><li>本文只讨论gperftools中TCMalloc部分的代码，对应版本<a href="https://github.com/gperftools/gperftools/releases/tag/gperftools-2.7">gperftools-2.7</a>。</li><li>本文是根据TCMalloc源码以及简短的<a href="https://gperftools.github.io/gperftools/TCMalloc.html">官方介绍</a>作出的个人理解，难免有纰漏之处，且难以覆盖TCMalloc的方方面面，不足之处还请各位看官留言指正。</li><li>除非特别说明，以下讨论均以32位系统、TCMalloc默认page大小（8KB）为基础，不同架构或不同page大小，有些相关数值可能不一样，但基本原理是相似的。</li><li>为了控制篇幅，我会尽量少贴大段代码，只给出关键代码的位置或函数名，各位看官可自行参阅TCMalloc相关代码。</li></ul>



<span id="more-69"></span>



<h1 id="ftoc-heading-2" class="ftwp-heading">TCMalloc是什么</h1>



<p>TCMalloc全称Thread-Caching Malloc，即线程缓存的malloc，实现了高效的多线程内存管理，用于替代系统的内存分配相关的函数（malloc、free，new，new[]等）。</p>



<p>TCMalloc是gperftools的一部分，除TCMalloc外，gperftools还包括heap-checker、heap-profiler和cpu-profiler。本文只讨论gperftools的TCMalloc部分。</p>



<p>git仓库：<a href="https://github.com/gperftools/gperftools.git">https://github.com/gperftools/gperftools.git</a></p>



<p>官方介绍：<a href="https://gperftools.github.io/gperftools/TCMalloc.html">https://gperftools.github.io/gperftools/TCMalloc.html</a>（里面有些内容已经过时了）</p>



<h1 id="ftoc-heading-3" class="ftwp-heading">如何使用TCMalloc</h1>



<h2 id="ftoc-heading-4" class="ftwp-heading">安装</h2>



<p>以下是比较常规的安装步骤，详细可参考gperftools中的<a href="https://github.com/gperftools/gperftools/blob/master/INSTALL">INSTALL</a>。</p>



<p>0. 从git仓库clone版本的gperftools的安装依赖autoconf、automake、libtool，以Debian为例： </p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># apt install autoconf automake libtool</span></div></div></div><div class="enlighter-raw"># apt install autoconf automake libtool</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># apt install autoconf automake libtool</pre>



<p>1. 生成configure等一系列文件</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-g0">$</span><span class="enlighter-text"> ./autogen.</span><span class="enlighter-m3">sh</span></div></div></div><div class="enlighter-raw">   $ ./autogen.sh</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">   $ ./autogen.sh</pre>



<p>2. 生成Makefile</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-g0">$</span><span class="enlighter-text"> ./configure</span></div></div></div><div class="enlighter-raw">   $ ./configure</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">   $ ./configure</pre>



<p>3. 编译</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-g0">$</span><span class="enlighter-text"> make</span></div></div></div><div class="enlighter-raw">   $ make</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">   $ make</pre>



<p>4. 安装</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-c0"> # make install</span></div></div></div><div class="enlighter-raw">   # make install</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">   # make install</pre>



<p>默认安装在<code>/usr/local/</code>下的相关路径（bin、lib、share），可在configure时以<code>--prefix=PATH</code>指定其他路径。</p>



<h3 id="ftoc-heading-5" class="ftwp-heading">64位Linux系统需要注意</h3>



<p>在64位Linux环境下，gperftools使用glibc内置的stack-unwinder可能会引发死锁，因此官方推荐在配置和安装gperftools之前，先安装<a href="http://download.savannah.gnu.org/releases/libunwind/libunwind-0.99-beta.tar.gz">libunwind-0.99-beta</a>，最好就用这个版本，版本太新或太旧都可能会有问题。</p>



<p>即便使用libunwind，在64位系统上还是会有问题，但只影响heap-checker、heap-profiler和cpu-profiler，TCMalloc不受影响，因此不再赘述，感兴趣的读者可参阅gperftools的<a href="https://github.com/gperftools/gperftools/blob/master/INSTALL">INSTALL</a>。</p>



<p>如果不希望安装libunwind，也可以用gperftools内置的stack unwinder，但需要应用程序、TCMalloc库、系统库（比如libc）在编译时开启帧指针（frame pointer）选项。</p>



<p>在x86-64下，编译时开启帧指针选项并不是默认行为。因此需要指定<code>-fno-omit-frame-pointer</code>编译所有应用程序，然后在configure时通过<code>--enable-frame-pointers</code>选项使用内置的gperftools stack unwinder。</p>



<h2 id="ftoc-heading-6" class="ftwp-heading">使用</h2>



<h3 id="ftoc-heading-7" class="ftwp-heading">以动态库的方式</h3>



<p>安装之后，通过<code>-ltcmalloc</code>或<code>-ltcmalloc_minimal</code>将TCMalloc链接到应用程序即可。</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k4">#include &lt;stdlib.h&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">int</span><span class="enlighter-text"> </span><span class="enlighter-m0">main</span><span class="enlighter-g1">(</span><span class="enlighter-text"> </span><span class="enlighter-k5">int</span><span class="enlighter-text"> argc, </span><span class="enlighter-k5">char</span><span class="enlighter-text"> *argv</span><span class="enlighter-g1">[]</span><span class="enlighter-text"> </span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">{</span><span class="enlighter-text">   </span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">malloc</span><span class="enlighter-g1">(</span><span class="enlighter-text">1</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">#include &lt;stdlib.h&gt;

int main( int argc, char *argv[] )
{   
    malloc(1);
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">#include &lt;stdlib.h&gt;

int main( int argc, char *argv[] )
{   
    malloc(1);
}</pre>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">$ g++ -O0 -g -ltcmalloc test.</span><span class="enlighter-m3">cc</span><span class="enlighter-text"> </span><span class="enlighter-g0">&amp;&amp;</span><span class="enlighter-text"> gdb a.</span><span class="enlighter-m3">out</span></div></div></div><div class="enlighter-raw">$ g++ -O0 -g -ltcmalloc test.cc &amp;&amp; gdb a.out</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">$ g++ -O0 -g -ltcmalloc test.cc &amp;&amp; gdb a.out</pre>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-g1">(</span><span class="enlighter-text">gdb</span><span class="enlighter-g1">)</span><span class="enlighter-text"> b test.</span><span class="enlighter-m3">cc</span><span class="enlighter-text">:</span><span class="enlighter-n1">5</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">Breakpoint </span><span class="enlighter-n1">1</span><span class="enlighter-text"> at </span><span class="enlighter-n2">0x7af</span><span class="enlighter-text">: file test.</span><span class="enlighter-m3">cc</span><span class="enlighter-text">, line </span><span class="enlighter-n0">5.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">(</span><span class="enlighter-text">gdb</span><span class="enlighter-g1">)</span><span class="enlighter-text"> r</span></div></div><div class=""><div><span class="enlighter-text">Starting program: /home/wanglong/test/tcmalloc/a.</span><span class="enlighter-m3">out</span><span class="enlighter-text"> </span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">[</span><span class="enlighter-text">Thread debugging using libthread_db enabled</span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">Using host libthread_db library </span><span class="enlighter-s0">"/lib/x86_64-linux-gnu/libthread_db.so.1"</span><span class="enlighter-text">.</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">Breakpoint </span><span class="enlighter-n1">1</span><span class="enlighter-text">, </span><span class="enlighter-m0">main</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">argc=</span><span class="enlighter-n1">1</span><span class="enlighter-text">, argv=</span><span class="enlighter-n2">0x7fffffffddd8</span><span class="enlighter-g1">)</span><span class="enlighter-text"> at test.</span><span class="enlighter-m3">cc</span><span class="enlighter-text">:</span><span class="enlighter-n1">5</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-n1">5</span><span class="enlighter-text">           </span><span class="enlighter-m0">malloc</span><span class="enlighter-g1">(</span><span class="enlighter-n1">1</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">(</span><span class="enlighter-text">gdb</span><span class="enlighter-g1">)</span><span class="enlighter-text"> s</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-m0">tc_malloc</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">size=</span><span class="enlighter-n1">1</span><span class="enlighter-g1">)</span><span class="enlighter-text"> at src/tcmalloc.</span><span class="enlighter-m3">cc</span><span class="enlighter-text">:</span><span class="enlighter-n1">1892</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-n1">1892</span><span class="enlighter-text">      </span><span class="enlighter-k1">return</span><span class="enlighter-text"> malloc_fast_path</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">tcmalloc::malloc_oom</span><span class="enlighter-g1">&gt;(</span><span class="enlighter-text">size</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">(</span><span class="enlighter-text">gdb</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span></div></div></div><div class="enlighter-raw">(gdb) b test.cc:5
Breakpoint 1 at 0x7af: file test.cc, line 5.
(gdb) r
Starting program: /home/wanglong/test/tcmalloc/a.out 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".

Breakpoint 1, main (argc=1, argv=0x7fffffffddd8) at test.cc:5
5           malloc(1);
(gdb) s
tc_malloc (size=1) at src/tcmalloc.cc:1892
1892      return malloc_fast_path&lt;tcmalloc::malloc_oom&gt;(size);
(gdb) </div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">(gdb) b test.cc:5
Breakpoint 1 at 0x7af: file test.cc, line 5.
(gdb) r
Starting program: /home/wanglong/test/tcmalloc/a.out 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".

Breakpoint 1, main (argc=1, argv=0x7fffffffddd8) at test.cc:5
5           malloc(1);
(gdb) s
tc_malloc (size=1) at src/tcmalloc.cc:1892
1892      return malloc_fast_path&lt;tcmalloc::malloc_oom&gt;(size);
(gdb) </pre>



<p>通过gdb断点可以看到对<code>malloc()</code>的调用已经替换为TCMalloc的实现。</p>



<h3 id="ftoc-heading-8" class="ftwp-heading">以静态库的方式</h3>



<p>gperftools的<a href="https://github.com/gperftools/gperftools/blob/master/README">README</a>中说静态库应该使用<code>libtcmalloc_and_profiler.a</code>库而不是<code>libprofiler.a</code>和libtcmalloc.a，但简单测试后者也是OK的，而且在实际项目中也是用的后者，不知道是不是文档太过老旧了。</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">$ g++ -O0 -g -pthread test.</span><span class="enlighter-m3">cc</span><span class="enlighter-text"> /usr/local/lib/libtcmalloc_and_profiler.</span><span class="enlighter-m3">a</span></div></div></div><div class="enlighter-raw">$ g++ -O0 -g -pthread test.cc /usr/local/lib/libtcmalloc_and_profiler.a</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">$ g++ -O0 -g -pthread test.cc /usr/local/lib/libtcmalloc_and_profiler.a</pre>



<p>如果使用了libunwind，需要指定<code>-Wl,--eh-frame-hdr</code>选项，以确保libunwind可以找到编译器生成的信息来进行栈回溯。</p>



<p>eh-frame（exception handling frame）参考资料：</p>



<ul><li><a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0803d/pge1446568291678.html">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0803d/pge1446568291678.html</a></li><li><a href="http://zhaohongjian000.is-programmer.com/posts/29660.html">http://zhaohongjian000.is-programmer.com/posts/29660.html</a></li><li><a href="https://www.cnblogs.com/catch/p/3619379.html">https://www.cnblogs.com/catch/p/3619379.html</a></li></ul>



<h1 id="ftoc-heading-9" class="ftwp-heading">TCMalloc是如何生效的</h1>



<p>为什么指定<code>-ltcmalloc</code>或者与<code>libtcmalloc_and_profiler.a</code>连接之后，对malloc、free、new、delete等的调用就由默认的libc中的函数调用变为TCMalloc中相应的函数调用了呢？答案在<code>libc_override.h</code>中，下面只讨论常见的两种情况：使用了glibc，或者使用了GCC编译器。其余情况可自行查看相应的libc_override头文件。</p>



<h2 id="ftoc-heading-10" class="ftwp-heading">使用glibc（但没有使用GCC编译器）</h2>



<p>在glibc中，内存分配相关的函数都是<a href="https://en.wikipedia.org/wiki/Weak_symbol">弱符号（weak symbol）</a>，因此TCMalloc只需要定义自己的函数将其覆盖即可，以malloc和free为例：</p>



<p>libc_override_redefine.h</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k0">extern</span><span class="enlighter-text"> </span><span class="enlighter-s0">"C"</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k5">void</span><span class="enlighter-text">* </span><span class="enlighter-m0">malloc</span><span class="enlighter-g1">(</span><span class="enlighter-text">size_t s</span><span class="enlighter-g1">)</span><span class="enlighter-text">                         </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">tc_malloc</span><span class="enlighter-g1">(</span><span class="enlighter-text">s</span><span class="enlighter-g1">)</span><span class="enlighter-text">; </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k5">void</span><span class="enlighter-text">  </span><span class="enlighter-m0">free</span><span class="enlighter-g1">(</span><span class="enlighter-k5">void</span><span class="enlighter-text">* p</span><span class="enlighter-g1">)</span><span class="enlighter-text">                            </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-m0">tc_free</span><span class="enlighter-g1">(</span><span class="enlighter-text">p</span><span class="enlighter-g1">)</span><span class="enlighter-text">;          </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span><span class="enlighter-c0"> // extern "C"</span></div></div></div><div class="enlighter-raw">extern "C" { 
  void* malloc(size_t s)                         { return tc_malloc(s); }
  void  free(void* p)                            { tc_free(p);          }
}  // extern "C"</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">extern "C" { 
  void* malloc(size_t s)                         { return tc_malloc(s); }
  void  free(void* p)                            { tc_free(p);          }
}  // extern "C"</pre>



<p>可以看到，TCMalloc将<code>malloc()</code>和<code>free()</code>分别定义为对<code>tc_malloc()</code>和<code>tc_free()</code>的调用，并在<code>tc_malloc()</code>和<code>tc_free()</code>中实现具体的内存分配和回收逻辑。</p>



<p>new和delete也类似：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k5">void</span><span class="enlighter-text">* </span><span class="enlighter-k0">operator</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-g1">(</span><span class="enlighter-text">size_t size</span><span class="enlighter-g1">)</span><span class="enlighter-text">                  </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">tc_new</span><span class="enlighter-g1">(</span><span class="enlighter-text">size</span><span class="enlighter-g1">)</span><span class="enlighter-text">; </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-k0">operator</span><span class="enlighter-text"> </span><span class="enlighter-k3">delete</span><span class="enlighter-g1">(</span><span class="enlighter-k5">void</span><span class="enlighter-text">* p</span><span class="enlighter-g1">)</span><span class="enlighter-text"> CPP_NOTHROW        </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-m0">tc_delete</span><span class="enlighter-g1">(</span><span class="enlighter-text">p</span><span class="enlighter-g1">)</span><span class="enlighter-text">;        </span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">void* operator new(size_t size)                  { return tc_new(size); }
void operator delete(void* p) CPP_NOTHROW        { tc_delete(p);        }</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">void* operator new(size_t size)                  { return tc_new(size); }
void operator delete(void* p) CPP_NOTHROW        { tc_delete(p);        }</pre>



<h2 id="ftoc-heading-11" class="ftwp-heading">使用GCC编译器</h2>



<p>如果使用了GCC编译器，则使用其支持的<a href="https://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Function-Attributes.html">函数属性：alias</a>。</p>



<p>libc_override_gcc_and_weak.h：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k4">#define ALIAS(tc_fn)   __attribute__ ((alias (#tc_fn), used))</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">extern</span><span class="enlighter-text"> </span><span class="enlighter-s0">"C"</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k5">void</span><span class="enlighter-text">* </span><span class="enlighter-m0">malloc</span><span class="enlighter-g1">(</span><span class="enlighter-text">size_t size</span><span class="enlighter-g1">)</span><span class="enlighter-text"> __THROW               </span><span class="enlighter-m0">ALIAS</span><span class="enlighter-g1">(</span><span class="enlighter-text">tc_malloc</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">free</span><span class="enlighter-g1">(</span><span class="enlighter-k5">void</span><span class="enlighter-text">* ptr</span><span class="enlighter-g1">)</span><span class="enlighter-text"> __THROW                    </span><span class="enlighter-m0">ALIAS</span><span class="enlighter-g1">(</span><span class="enlighter-text">tc_free</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text">  </span><span class="enlighter-c0"> // extern "C"</span></div></div></div><div class="enlighter-raw">#define ALIAS(tc_fn)   __attribute__ ((alias (#tc_fn), used))

extern "C" { 
  void* malloc(size_t size) __THROW               ALIAS(tc_malloc);
  void free(void* ptr) __THROW                    ALIAS(tc_free);
}   // extern "C"</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">#define ALIAS(tc_fn)   __attribute__ ((alias (#tc_fn), used))

extern "C" { 
  void* malloc(size_t size) __THROW               ALIAS(tc_malloc);
  void free(void* ptr) __THROW                    ALIAS(tc_free);
}   // extern "C"</pre>



<p>将宏展开，<code>__attribute__ ((alias ("tc_malloc"), used))</code>表明tc_malloc是malloc的别名。</p>



<p>具体可参阅GCC相关文档：</p>



<blockquote class="wp-block-quote"><p><strong>alias (“target”)</strong><br>   ​    The alias attribute causes the declaration to be emitted as an alias for another symbol, which must be specified. For instance,<br>   ​          <code>void __f () { /* Do something. */; }</code><br>   ​          <code>void f () __attribute__ ((weak, alias ("__f")));</code><br>   ​    defines <code>f</code> to be a weak alias for <code>__f</code>. In C++, the mangled name for the target must be used. It is an error if <code>__f</code> is not defined in the same translation unit.<br>   ​    Not all target machines support this attribute. 

</p><p><strong>used</strong><br>   ​    This attribute, attached to a function, means that code must be emitted for the function even if it appears that the function is not referenced. This is useful, for example, when the function is referenced only in inline assembly.<br>   ​    When applied to a member function of a C++ class template, the attribute also means that the function will be instantiated if the class itself is instantiated.</p></blockquote>



<h1 id="ftoc-heading-12" class="ftwp-heading">TCMalloc的初始化</h1>



<h2 id="ftoc-heading-13" class="ftwp-heading">何时初始化</h2>



<p>TCMalloc定义了一个类<code>TCMallocGuard</code>，并在文件tcmalloc.cc中定义了该类型的静态变量<code>module_enter_exit_hook</code>，在其构造函数中执行TCMalloc的初始化逻辑，以确保TCMalloc在<code>main()</code>函数之前完成初始化，防止在初始化之前就有多个线程。</p>



<p>tcmalloc.cc：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k0">static</span><span class="enlighter-text"> TCMallocGuard module_enter_exit_hook;</span></div></div></div><div class="enlighter-raw">static TCMallocGuard module_enter_exit_hook;</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">static TCMallocGuard module_enter_exit_hook;</pre>



<p>如果需要确保TCMalloc在某些全局构造函数运行之前就初始化完成，则需要在文件顶部创建一个静态TCMallocGuard实例。</p>



<h2 id="ftoc-heading-14" class="ftwp-heading">如何初始化</h2>



<p>TCMallocGuard的构造函数实现：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k0">static</span><span class="enlighter-text"> </span><span class="enlighter-k5">int</span><span class="enlighter-text"> tcmallocguard_refcount = 0; </span><span class="enlighter-c0"> // no lock needed: runs before main()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">TCMallocGuard::</span><span class="enlighter-m0">TCMallocGuard</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">tcmallocguard_refcount++ == 0</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">ReplaceSystemAlloc</span><span class="enlighter-g1">()</span><span class="enlighter-text">;   </span><span class="enlighter-c0"> // defined in libc_override_*.h</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">tc_free</span><span class="enlighter-g1">(</span><span class="enlighter-m0">tc_malloc</span><span class="enlighter-g1">(</span><span class="enlighter-text">1</span><span class="enlighter-g1">))</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    ThreadCache::</span><span class="enlighter-m0">InitTSD</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">tc_free</span><span class="enlighter-g1">(</span><span class="enlighter-m0">tc_malloc</span><span class="enlighter-g1">(</span><span class="enlighter-text">1</span><span class="enlighter-g1">))</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // Either we, or debugallocation.cc, or valgrind will control memory</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // management.  We register our extension if we're the winner.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#ifdef TCMALLOC_USING_DEBUGALLOCATION</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // Let debugallocation register its extension.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#else</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-m0">RunningOnValgrind</span><span class="enlighter-g1">())</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">     </span><span class="enlighter-c0"> // Let Valgrind uses its own malloc (so don't register our extension).</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span><span class="enlighter-k1">else</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">      MallocExtension::</span><span class="enlighter-m0">Register</span><span class="enlighter-g1">(</span><span class="enlighter-k3">new</span><span class="enlighter-text"> TCMallocImplementation</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#endif</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span></div></div></div><div class="enlighter-raw">static int tcmallocguard_refcount = 0;  // no lock needed: runs before main()
TCMallocGuard::TCMallocGuard() {
  if (tcmallocguard_refcount++ == 0) {
    ReplaceSystemAlloc();    // defined in libc_override_*.h
    tc_free(tc_malloc(1));
    ThreadCache::InitTSD();
    tc_free(tc_malloc(1));
    // Either we, or debugallocation.cc, or valgrind will control memory
    // management.  We register our extension if we're the winner.
#ifdef TCMALLOC_USING_DEBUGALLOCATION
    // Let debugallocation register its extension.
#else
    if (RunningOnValgrind()) {
      // Let Valgrind uses its own malloc (so don't register our extension).
    } else {
      MallocExtension::Register(new TCMallocImplementation);
    }
#endif
  }
} </div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">static int tcmallocguard_refcount = 0;  // no lock needed: runs before main()
TCMallocGuard::TCMallocGuard() {
  if (tcmallocguard_refcount++ == 0) {
    ReplaceSystemAlloc();    // defined in libc_override_*.h
    tc_free(tc_malloc(1));
    ThreadCache::InitTSD();
    tc_free(tc_malloc(1));
    // Either we, or debugallocation.cc, or valgrind will control memory
    // management.  We register our extension if we're the winner.
#ifdef TCMALLOC_USING_DEBUGALLOCATION
    // Let debugallocation register its extension.
#else
    if (RunningOnValgrind()) {
      // Let Valgrind uses its own malloc (so don't register our extension).
    } else {
      MallocExtension::Register(new TCMallocImplementation);
    }
#endif
  }
} </pre>



<p>可以看到，TCMalloc初始化的方式是调用<code>tc_malloc()</code>申请一字节内存并随后调用<code>tc_free()</code>将其释放。至于为什么在InitTSD前后各申请释放一次，不太清楚，猜测是为了测试在TSD（Thread Specific Data，详见后文）初始化之前也能正常工作。</p>



<h2 id="ftoc-heading-15" class="ftwp-heading">初始化内容</h2>



<p>那么TCMalloc在初始化时都执行了哪些操作呢？这里先简单列一下，后续讨论TCMalloc的实现细节时再逐一详细讨论：</p>



<ul><li>初始化SizeMap（Size Class）</li><li>初始化各种Allocator</li><li>初始化CentralCache</li><li>创建PageHeap</li></ul>



<p>总之一句话，创建TCMalloc自身的一些元数据，比如划分小对象的大小等等。</p>



<h1 id="ftoc-heading-16" class="ftwp-heading">TCMalloc的内存分配算法概览</h1>



<p>TCMalloc的<a href="https://gperftools.github.io/gperftools/tcmalloc.html">官方介绍</a>中将内存分配称为<em>Object Allocation</em>，本文也沿用这种叫法，并将object翻译为<strong>对象</strong>，可以将其理解为具有一定大小的内存。</p>



<p>按照所分配内存的大小，TCMalloc将内存分配分为三类：</p>



<ul><li>小对象分配，(0, 256KB]</li><li>中对象分配，(256KB, 1MB]</li><li>大对象分配，(1MB, +∞)</li></ul>



<p>简要介绍几个概念，Page，Span，PageHeap：</p>



<p>与操作系统管理内存的方式类似，TCMalloc将整个虚拟内存空间划分为n个同等大小的<strong>Page</strong>，每个page默认8KB。又将连续的n个page称为一个<strong>Span</strong>。</p>



<p>TCMalloc定义了<strong>PageHeap</strong>类来处理向OS申请内存相关的操作，并提供了一层缓存。可以认为，PageHeap就是整个可供应用程序动态分配的内存的抽象。</p>



<p>PageHeap以span为单位向系统申请内存，申请到的span可能只有一个page，也可能包含n个page。可能会被划分为一系列的小对象，供小对象分配使用，也可能当做一整块当做中对象或大对象分配。</p>



<h2 id="ftoc-heading-17" class="ftwp-heading">小对象分配</h2>



<h3 id="ftoc-heading-18" class="ftwp-heading">Size Class</h3>



<p>对于256KB以内的小对象分配，TCMalloc按大小划分了85个类别（<a href="https://gperftools.github.io/gperftools/tcmalloc.html">官方介绍</a>中说是88个左右，但我个人实际测试是85个，不包括0字节大小），称为<strong>Size Class</strong>，每个size class都对应一个大小，比如8字节，16字节，32字节。应用程序申请内存时，TCMalloc会首先将所申请的内存大小向上取整到size class的大小，比如1~8字节之间的内存申请都会分配8字节，9~16字节之间都会分配16字节，以此类推。因此这里会产生内部碎片。TCMalloc将这里的内部碎片控制在12.5%以内，具体的做法在讨论size class的实现细节时再详细分析。</p>



<h3 id="ftoc-heading-19" class="ftwp-heading">ThreadCache</h3>



<p>对于每个线程，TCMalloc都为其保存了一份单独的缓存，称之为<strong>ThreadCache</strong>，这也是TCMalloc名字的由来（Thread-Caching Malloc）。每个ThreadCache中对于每个size class都有一个单独的<strong>FreeList</strong>，缓存了n个还未被应用程序使用的空闲对象。</p>



<p>小对象的分配直接从ThreadCache的FreeList中返回一个空闲对象，相应的，小对象的回收也是将其重新放回ThreadCache中对应的FreeList中。</p>



<p>由于每线程一个ThreadCache，因此从ThreadCache中取用或回收内存是<strong>不需要加锁</strong>的，速度很快。</p>



<p>为了方便统计数据，各线程的ThreadCache连接成一个双向链表。ThreadCache的结构示大致如下：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-ThreadCache.svg" alt="" class="wp-image-543"></figure>



<h3 id="ftoc-heading-20" class="ftwp-heading">CentralCache</h3>



<p>那么ThreadCache中的空闲对象从何而来呢？答案是<strong>CentralCache</strong>——一个所有线程公用的缓存。</p>



<p>与ThreadCache类似，CentralCache中对于每个size class也都有一个单独的链表来缓存空闲对象，称之为<strong>CentralFreeList</strong>，供各线程的ThreadCache从中取用空闲对象。</p>



<p>由于是所有线程公用的，因此从CentralCache中取用或回收对象，是<strong>需要加锁</strong>的。为了平摊锁操作的开销，ThreadCache一般从CentralCache中一次性取用或回收多个空闲对象。</p>



<p>CentralCache在TCMalloc中并不是一个类，只是一个逻辑上的概念，其本质是<strong>CentralFreeList</strong>类型的数组。后文会详细讨论CentralCache的内部结构，现在暂且认为CentralCache的<strong>简化结构</strong>如下：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-CentralCache.svg" alt="" class="wp-image-511"></figure>



<h3 id="ftoc-heading-21" class="ftwp-heading">PageHeap</h3>



<p>CentralCache中的空闲对象又是从何而来呢？答案是之前提到的<strong>PageHeap</strong>——TCMalloc对可动态分配的内存的抽象。</p>



<p>当CentralCache中的空闲对象不够用时，CentralCache会向PageHeap申请一块内存（可能来自PageHeap的缓存，也可能向系统申请新的内存），并将其拆分成一系列空闲对象，添加到对应size class的CentralFreeList中。</p>



<p>PageHeap内部根据内存块（span）的大小采取了两种不同的缓存策略。128个page以内的span，每个大小都用一个链表来缓存，超过128个page的span，存储于一个有序set（std::set）。讨论TCMalloc的实现细节时再具体分析，现在可以认为PageHeap的<strong>简化结构</strong>如下：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-PageHeap.svg" alt="" class="wp-image-523"></figure>



<h3 id="ftoc-heading-22" class="ftwp-heading">内存回收</h3>



<p>上面说的都是内存分配，内存回收的情况是怎样的？</p>



<p>应用程序调用free()或delete一个小对象时，仅仅是将其插入到ThreadCache中其size class对应的FreeList中而已，不需要加锁，因此速度也是非常快的。</p>



<p>只有当满足一定的条件时，ThreadCache中的空闲对象才会重新放回CentralCache中，以供其他线程取用。同样的，当满足一定条件时，CentralCache中的空闲对象也会还给PageHeap，PageHeap再还给系统。</p>



<p>内存在这些组件之间的移动会在后文详细讨论，现在先忽略这些细节。</p>



<h3 id="ftoc-heading-23" class="ftwp-heading">小结</h3>



<p>总结一下，小对象分配流程大致如下：</p>



<ul><li>将要分配的内存大小映射到对应的size class。</li><li>查看ThreadCache中该size class对应的FreeList。</li><li>如果FreeList非空，则移除FreeList的第一个空闲对象并将其返回，分配结束。</li><li>如果FreeList是空的：<ul><li>从CentralCache中size class对应的CentralFreeList获取一堆空闲对象。 <ul><li>如果CentralFreeList也是空的，则：<ul><li>向PageHeap申请一个span。</li><li>拆分成size class对应大小的空闲对象，放入CentralFreeList中。</li></ul></li></ul></li></ul><ul><li>将这堆对象放置到ThreadCache中size class对应的FreeList中（第一个对象除外）。</li><li>返回从CentralCache获取的第一个对象，分配结束。</li></ul></li></ul>



<h2 id="ftoc-heading-24" class="ftwp-heading">中对象分配</h2>



<p>超过256KB但不超过1MB（128个page）的内存分配被认为是中对象分配，采取了与小对象不同的分配策略。</p>



<p>首先，TCMalloc会将应用程序所要申请的内存大小向上取整到<strong>整数个page</strong>（因此，这里会产生1B~8KB的内部碎片）。之后的操作表面上非常简单，向PageHeap申请一个指定page数量的span并返回其起始地址即可：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">Span* span = Static::</span><span class="enlighter-m0">pageheap</span><span class="enlighter-g1">()</span><span class="enlighter-text">-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">New</span><span class="enlighter-g1">(</span><span class="enlighter-text">num_pages</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">result = </span><span class="enlighter-g1">(</span><span class="enlighter-m0">PREDICT_FALSE</span><span class="enlighter-g1">(</span><span class="enlighter-text">span == </span><span class="enlighter-e1">NULL</span><span class="enlighter-g1">)</span><span class="enlighter-text"> ? </span><span class="enlighter-e1">NULL</span><span class="enlighter-text"> : </span><span class="enlighter-m0">SpanToMallocResult</span><span class="enlighter-g1">(</span><span class="enlighter-text">span</span><span class="enlighter-g1">))</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">return</span><span class="enlighter-text"> result;</span></div></div></div><div class="enlighter-raw">Span* span = Static::pageheap()-&gt;New(num_pages);
result = (PREDICT_FALSE(span == NULL) ? NULL : SpanToMallocResult(span));
return result;</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">Span* span = Static::pageheap()-&gt;New(num_pages);
result = (PREDICT_FALSE(span == NULL) ? NULL : SpanToMallocResult(span));
return result;</pre>



<p>问题在于，PageHeap是如何管理这些span的？即<code>PageHeap::New()</code>是如何实现的。</p>



<p>前文说到，PageHeap提供了一层缓存，因此<code>PageHeap::New()</code>并非每次都向系统申请内存，也可能直接从缓存中分配。</p>



<p>对128个page以内的span和超过128个page的span，PageHeap采取的缓存策略不一样。为了描述方便，以下将128个page以内的span称为小span，大于128个page的span称为大span。</p>



<p>先来看小span是如何管理的，大span的管理放在大对象分配一节介绍。</p>



<p>PageHeap中有128个小span的链表，分别对应1~128个page的span：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-SpanList.svg" alt="" class="wp-image-535"></figure>



<p>假设要分配一块内存，其大小经过向上取整之后对应k个page，因此需要从PageHeap取一个大小为k个page的span，过程如下：</p>



<ul><li>从k个page的span链表开始，到128个page的span链表，按顺序找到第一个非空链表。</li><li>取出这个非空链表中的一个span，假设有n个page，将这个span拆分成两个span：<ul><li>一个span大小为k个page，作为分配结果返回。</li><li>另一个span大小为n – k个page，重新插入到n – k个page的span链表中。</li></ul></li><li>如果找不到非空链表，则将这次分配看做是大对象分配，分配过程详见下文。</li></ul>



<h2 id="ftoc-heading-25" class="ftwp-heading">大对象分配</h2>



<p>超过1MB（128个page）的内存分配被认为是大对象分配，与中对象分配类似，也是先将所要分配的内存大小向上取整到整数个page，假设是k个page，然后向PageHeap申请一个k个page大小的span。</p>



<p>对于中对象的分配，如果上述的span链表无法满足，也会被当做是大对象来处理。也就是说，TCMalloc在源码层面其实并没有区分中对象和大对象，只是对于不同大小的span的缓存方式不一样罢了。</p>



<p>大对象分配用到的span都是超过128个page的span，其缓存方式不是链表，而是一个按span大小排序的<strong>有序set</strong>（std::set），以便按大小进行搜索。</p>



<p>假设要分配一块超过1MB的内存，其大小经过向上取整之后对应k个page（k&gt;128），或者是要分配一块1MB以内的内存，但无法由中对象分配逻辑来满足，此时k &lt;= 128。不管哪种情况，都是要从PageHeap的span set中取一个大小为k个page的span，其过程如下：</p>



<ul><li>搜索set，找到不小于k个page的最小的span（<strong>best-fit</strong>），假设该span有n个page。</li><li>将这个span拆分为两个span：<ul><li>一个span大小为k个page，作为结果返回。</li><li>另一个span大小为n – k个page，如果n – k &gt; 128，则将其插入到大span的set中，否则，将其插入到对应的小span链表中。</li></ul></li><li>如果找不到合适的span，则使用sbrk或mmap向系统申请新的内存以生成新的span，并重新执行中对象或大对象的分配算法。</li></ul>



<h2 id="ftoc-heading-26" class="ftwp-heading">小结</h2>



<p>以上讨论忽略了很多实现上的细节，比如PageHeap对span的管理还区分了normal状态的span和returned状态的span，接下来会详细分析这些细节。</p>



<p>在此之前，画张图概括下TCMalloc的管理内存的策略：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-Overview.svg" alt="" class="wp-image-519"></figure>



<p>可以看到，不超过256KB的小对象分配，在应用程序和内存之间其实有三层缓存：PageHeap、CentralCache、ThreadCache。而中对象和大对象分配，则只有PageHeap一层缓存。</p>



<h1 id="ftoc-heading-27" class="ftwp-heading">TCMalloc的实现细节</h1>



<p>算法概览一节涉及到了很多概念，比如Page，Span，Size Class，PageHeap，ThreadCache等，但只是粗略的一提，本节将详细讨论这些概念所涉及的实现细节。</p>



<h2 id="ftoc-heading-28" class="ftwp-heading">Page</h2>



<p><strong>Page是TCMalloc管理内存的基本单位</strong>（这里的page要区分于操作系统管理虚拟内存的page），page的默认大小为8KB，可在configure时通过选项调整为32KB或64KB。</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">./configure </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">other flags</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> --with-tcmalloc-pagesize=</span><span class="enlighter-m0">32</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">or </span><span class="enlighter-n1">64</span><span class="enlighter-g1">)</span></div></div></div><div class="enlighter-raw">./configure &lt;other flags&gt; --with-tcmalloc-pagesize=32 (or 64)</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="no-highlight" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">./configure &lt;other flags&gt; --with-tcmalloc-pagesize=32 (or 64)</pre>



<p>page越大，TCMalloc的速度相对越快，但其占用的内存也会越高。简单说，就是空间换时间的道理。默认的page大小通过减少内存碎片来最小化内存使用，但跟踪这些page会花费更多的时间。使用更大的page则会带来更多的内存碎片，但速度上会有所提升。官方文档给出的数据是在某些google应用上有3%~5%的速度提升。</p>



<h3 id="ftoc-heading-29" class="ftwp-heading">PageID</h3>



<p>TCMalloc并非只将堆内存看做是一个个的page，而是将整个虚拟内存空间都看做是page的集合。从内存地址0x0开始，每个page对应一个递增的PageID，如下图（以32位系统为例）：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-Page.svg" alt="" class="wp-image-521"></figure>



<p>对于任意内存地址<code>ptr</code>，都可通过简单的移位操作来计算其所在page的PageID：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k0">static</span><span class="enlighter-text"> </span><span class="enlighter-k8">const</span><span class="enlighter-text"> size_t kPageShift  = 13;</span><span class="enlighter-c0"> // page大小：1 &lt;&lt; 13 = 8KB</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k8">const</span><span class="enlighter-text"> PageID p = </span><span class="enlighter-k3">reinterpret_cast</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">uintptr_t</span><span class="enlighter-g1">&gt;(</span><span class="enlighter-text">ptr</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">&gt;&gt;</span><span class="enlighter-text"> kPageShift;</span></div></div></div><div class="enlighter-raw">static const size_t kPageShift  = 13; // page大小：1 &lt;&lt; 13 = 8KB
const PageID p = reinterpret_cast&lt;uintptr_t&gt;(ptr) &gt;&gt; kPageShift;</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">static const size_t kPageShift  = 13; // page大小：1 &lt;&lt; 13 = 8KB
const PageID p = reinterpret_cast&lt;uintptr_t&gt;(ptr) &gt;&gt; kPageShift;</pre>



<p>即，<code>ptr</code>所属page的PageID为<code>ptr / page_size</code>。</p>



<h2 id="ftoc-heading-30" class="ftwp-heading">Span</h2>



<p>一个或多个连续的Page组成一个Span（a contiguous run of pages）。<strong>TCMalloc以Span为单位向系统申请内存。</strong></p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-Span.svg" alt="" class="wp-image-533"></figure>



<p>如图，第一个span包含2个page，第二个和第四个span包含3个page，第三个span包含5个page。</p>



<p>一个span记录了起始page的PageID（<code>start</code>），以及所包含page的数量（<code>length</code>）。</p>



<p>一个span要么被拆分成多个相同size class的小对象用于小对象分配，要么作为一个整体用于中对象或大对象分配。当作用作小对象分配时，span的<code>sizeclass</code>成员变量记录了其对应的size class。</p>



<p>span中还包含两个Span类型的指针（<code>prev</code>, <code>next</code>），用于将多个span以链表的形式存储。</p>



<h3 id="ftoc-heading-31" class="ftwp-heading">span的三种状态</h3>



<p>一个span处于以下三种状态中的一种：</p>



<ul><li>IN_USE</li><li>ON_NORMAL_FREELIST</li><li>ON_RETURNED_FREELIST</li></ul>



<p><code>IN_USE</code>比较好理解，正在使用中的意思，要么被拆分成小对象分配给CentralCache或者ThreadCache了，要么已经分配给应用程序了。因为span是由PageHeap来管理的，因此即使只是分配给了CentralCache，还没有被应用程序所申请，在PageHeap看来，也是IN_USE了。</p>



<p><code>ON_NORMAL_FREELIST</code>和<code>ON_RETURNED_FREELIST</code>都可以认为是空闲状态，区别在于，ON_RETURNED_FREELIST是指span对应的内存已经被PageHeap释放给系统了（在Linux中，对于MAP_PRIVATE|MAP_ANONYMOUS的内存使用madvise来实现）。需要注意的是，即使归还给系统，其虚拟内存地址依然是可访问的，只是对这些内存的修改丢失了而已，在下一次访问时会导致page fault以用0来重新初始化。</p>



<h3 id="ftoc-heading-32" class="ftwp-heading">空闲对象链表</h3>



<p>被拆分成多个小对象的span还包含了一个记录空闲对象的链表<code>objects</code>，由CentralFreeList来维护。</p>



<p>对于新创建的span，将其对应的内存按size class的大小均分成若干小对象，在每一个小对象的起始位置处存储下一个小对象的地址，首首相连：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-FreshSpan.svg" alt="" class="wp-image-515"></figure>



<p>但当span中的小对象经过一系列申请和回收之后，其顺序就不确定了：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-UsedSpan.svg" alt="" class="wp-image-545"></figure>



<p>可以看到，有些小对象已经不再空闲对象链表objects中了，链表中的元素顺序也已经被打乱。</p>



<p>空闲对象链表中的元素乱序没什么影响，因为只有当一个span的所有小对象都被释放之后，CentralFreeList才会将其还给PageHeap。</p>



<h2 id="ftoc-heading-33" class="ftwp-heading">PageMap</h2>



<p>PageMap之前没有提到过，它主要用于解决这么一个问题：<strong>给定一个page，如何确定这个page属于哪个span？</strong></p>



<p>即，PageMap缓存了PageID到Span的对应关系。</p>



<p>32位系统、x86-64、arm64使用两级PageMap，以32位系统为例：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-PageMap.svg" alt="" class="wp-image-527"></figure>



<p>在root_数组中包含512个指向Leaf的指针，每个Leaf又是1024个void*的数组，数组索引为PageID，数组元素为page所属Span的指针。一共$2^{19}$个数组元素，对应32位系统的$2^{19}$个page。</p>



<p>使用两级map可以减少TCMalloc元数据的内存占用，因为初始只会给第一层（即root_数组）分配内存（2KB），第二层只有在实际用到时才会实际分配内存。而如果初始就给$2^{19}$个page都分配内存的话，则会占用$2^{19} * 4 bytes = 2MB$的内存。</p>



<h2 id="ftoc-heading-34" class="ftwp-heading">Size Class</h2>



<p>TCMalloc将每个小对象的大小（1B~256KB）分为85个类别（<a href="https://gperftools.github.io/gperftools/tcmalloc.html">官方介绍</a>中说是88个左右，但我个人实际测试是85个，不包括0字节大小），称之为Size Class，每个size class一个编号，从0开始递增（实际编号为0的size class是对应0字节，是没有实际意义的）。</p>



<p>举个例子，896字节对应编号为30的size class，下一个size class 31大小为1024字节，那么897字节到1024字节之间所有的分配都会向上舍入到1024字节。</p>



<p><code>SizeMap::Init()</code>实现了对size class的划分，规则如下：</p>



<h3 id="ftoc-heading-35" class="ftwp-heading">划分跨度</h3>



<ul><li>16字节以内，每8字节划分一个size class。<ul><li>满足这种情况的size class只有两个：8字节、16字节。</li></ul></li><li>16~128字节，每16字节划分一个size class。<ul><li>满足这种情况的size class有7个：32, 48, 64, 80, 96, 112, 128字节。</li></ul></li><li>128B~256KB，按照每次步进<code>(size / 8)</code>字节的长度划分，并且步长需要向下对齐到2的整数次幂，比如：<ul><li>144字节：128 + 128 / 8 = 128 + 16 = 144</li><li>160字节：144 + 144 / 8 = 144 + 18 = 144 + 16 = 160</li><li>176字节：160 + 160 / 8 = 160 + 20 = 160 + 16 = 176</li><li>以此类推</li></ul></li></ul>



<h3 id="ftoc-heading-36" class="ftwp-heading">一次移动多个空闲对象</h3>



<p>ThreadCache会从CentralCache中获取空闲对象，也会将超出限制的空闲对象放回CentralCache。ThreadCache和CentralCache之间的对象移动是<strong>批量</strong>进行的，即一次移动多个空闲对象。CentralCache由于是所有线程公用，因此对其进行操作时需要加锁，一次移动多个对象可以<strong>均摊锁操作的开销</strong>，提升效率。</p>



<p>那么一次批量移动多少呢？每次移动64KB大小的内存，即因size class而异，但至少2个，至多32个（可通过环境变量<code>TCMALLOC_TRANSFER_NUM_OBJ</code>调整）。</p>



<p>移动数量的计算也是在size class初始化的过程中计算得出的。</p>



<h3 id="ftoc-heading-37" class="ftwp-heading">一次申请多个page</h3>



<p>对于每个size class，TCMalloc向系统申请内存时一次性申请n个page（一个span），然后均分成多个小对象进行缓存，以此来<strong>均摊系统调用的开销</strong>。</p>



<p>不同的size class对应的page数量是不同的，如何决定n的大小呢？从1个page开始递增，一直到均分成若干小对象后所剩的空间小于span总大小的1/8为止，因此，浪费的内存被控制在12.5%以内。这是TCMalloc<strong>减少内部碎片</strong>的一种措施。</p>



<p>另外，所分配的page数量还需满足一次移动多个空闲对象的数量要求（源码中的注释是这样说的，不过实际代码是满足1/4即可，原因不明）。</p>



<h3 id="ftoc-heading-38" class="ftwp-heading">合并操作</h3>



<p>在上述规则之上，还有一个合并操作：TCMalloc会将<strong>相同page数量，相同对象数量</strong>的相邻的size class合并为一个size class。比如：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/size_merge.svg" alt="" class="wp-image-507"></figure>



<p>第30个size class的对象大小是832字节，page数量为1个，因此包含8192 / 832 = 9个小对象。</p>



<p>第31个size class对应的page数量（1个）和对象数量（9个）跟第30个size class完全一样，因此第30个size class和第31个size class合并，所以第30个size class对应的对象大小为896字节。</p>



<p>下一个size class对应的对象大小为1024字节，page数量为1个，因此对象数量是8个，跟第30个size class的对象数量不一样，无法合并。</p>



<p>最终，第30个size class对应的对象大小为896字节。</p>



<h3 id="ftoc-heading-39" class="ftwp-heading">记录映射关系</h3>



<p>由以上划分规则可以看到，一个size class对应：</p>



<ul><li>一个对象大小</li><li>一个申请page的数量</li><li>一个批量移动对象的数量</li></ul>



<p>TCMalloc将size class与这些信息的映射关系分别记录在三个以size class的编号为索引的数组中（<code>class_to_size_</code>，<code>num_objects_to_move_</code>， <code>class_to_pages_</code>）。</p>



<p>还有一项非常重要的映射关系：小对象大小到size class编号的映射。TCMalloc将其记录在一个一维数组<code>class_array_</code>中。</p>



<p>256KB以内都是小对象，而size class的编号用一个字节就可以表示，因此存储小对象大小对应的size class编号需要256K个unsigned char，即256KB的内存。但由于size class之间是有间隔的（1024字节以内间隔至少8字节，1024以上间隔至少128字节），因此可以通过简单的计算对class_array_的索引进行压缩，以减少内存占用。</p>



<p>给定大小s，其对应的class_array_索引计算方式如下：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// s &lt;= 1024</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">static</span><span class="enlighter-text"> </span><span class="enlighter-k0">inline</span><span class="enlighter-text"> size_t </span><span class="enlighter-m0">SmallSizeClass</span><span class="enlighter-g1">(</span><span class="enlighter-text">size_t s</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k3">static_cast</span><span class="enlighter-g1">&lt;</span><span class="enlighter-k5">uint32_t</span><span class="enlighter-g1">&gt;(</span><span class="enlighter-text">s</span><span class="enlighter-g1">)</span><span class="enlighter-text"> + 7</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">&gt;&gt;</span><span class="enlighter-text"> 3;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// s &gt; 1024</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">static</span><span class="enlighter-text"> </span><span class="enlighter-k0">inline</span><span class="enlighter-text"> size_t </span><span class="enlighter-m0">LargeSizeClass</span><span class="enlighter-g1">(</span><span class="enlighter-text">size_t s</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k3">static_cast</span><span class="enlighter-g1">&lt;</span><span class="enlighter-k5">uint32_t</span><span class="enlighter-g1">&gt;(</span><span class="enlighter-text">s</span><span class="enlighter-g1">)</span><span class="enlighter-text"> + 127 + </span><span class="enlighter-g1">(</span><span class="enlighter-text">120 </span><span class="enlighter-g1">&lt;&lt;</span><span class="enlighter-text"> 7</span><span class="enlighter-g1">))</span><span class="enlighter-text"> </span><span class="enlighter-g1">&gt;&gt;</span><span class="enlighter-text"> 7;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">// s &lt;= 1024
static inline size_t SmallSizeClass(size_t s) {
  return (static_cast&lt;uint32_t&gt;(s) + 7) &gt;&gt; 3;
}

// s &gt; 1024
static inline size_t LargeSizeClass(size_t s) {
  return (static_cast&lt;uint32_t&gt;(s) + 127 + (120 &lt;&lt; 7)) &gt;&gt; 7;
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// s &lt;= 1024
static inline size_t SmallSizeClass(size_t s) {
  return (static_cast&lt;uint32_t&gt;(s) + 7) &gt;&gt; 3;
}

// s &gt; 1024
static inline size_t LargeSizeClass(size_t s) {
  return (static_cast&lt;uint32_t&gt;(s) + 127 + (120 &lt;&lt; 7)) &gt;&gt; 7;
}</pre>



<p>当s = 256KB时，计算结果即为<code>class_array_</code>的最大索引2169，因此数组的大小为2170字节。</p>



<h3 id="ftoc-heading-40" class="ftwp-heading">计算任意内存地址对应的对象大小</h3>



<p>当应用程序调用<code>free()</code>或<code>delete</code>释放内存时，需要有一种方式获取所要释放的内存地址对应的内存大小。结合前文所述的各种映射关系，在TCMalloc中按照以下顺序计算任意内存地址对应的对象大小：</p>



<ul><li>计算给定地址计所在的PageID（ptr &gt;&gt; 13）</li><li>从PageMap中查询该page所在的span</li><li>span中记录了size class编号</li><li>根据size class编号从<code>class_to_size_</code>数组中查询对应的对象大小</li></ul>



<p>这样做的好处是：<strong>不需要在内存块的头部记录内存大小，减少内存的浪费</strong>。</p>



<h3 id="ftoc-heading-41" class="ftwp-heading">小结</h3>



<p>size class的实现中有很多省空间省时间的做法：</p>



<ul><li>省空间</li><li>控制划分跨度的最大值（8KB），减少内部碎片</li><li>控制一次申请page的数量，减少内部碎片</li><li>通过计算和一系列元数据记录内存地址到内存大小的映射关系，避免在实际分配的内存块中记录内存大小，减少内存浪费</li><li>两级PageMap或三级PageMap</li><li>压缩class_array_</li><li>省时间</li><li>一次申请多个page</li><li>一次移动多个空闲对象</li></ul>



<h2 id="ftoc-heading-42" class="ftwp-heading">PageHeap</h2>



<p>前面介绍的都是TCMalloc如何对内存进行划分，接下来看TCMalloc如何管理如此划分后的内存，这是PageHeap的主要职责。</p>



<p>TCMalloc源码中对PageHeap的注释：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// -------------------------------------------------------------------------</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Page-level allocator</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">//  * Eager coalescing</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">//</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Heap for page-level allocation.  We allow allocating and freeing a</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// contiguous runs of pages (called a "span").</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// -------------------------------------------------------------------------</span></div></div></div><div class="enlighter-raw">// -------------------------------------------------------------------------
// Page-level allocator
//  * Eager coalescing
//
// Heap for page-level allocation.  We allow allocating and freeing a
// contiguous runs of pages (called a "span").
// -------------------------------------------------------------------------</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// -------------------------------------------------------------------------
// Page-level allocator
//  * Eager coalescing
//
// Heap for page-level allocation.  We allow allocating and freeing a
// contiguous runs of pages (called a "span").
// -------------------------------------------------------------------------</pre>



<h3 id="ftoc-heading-43" class="ftwp-heading">空闲Span管理器</h3>



<p>如前所述，128page以内的span称为小span，128page以上的span称为大span。PageHeap对于这两种span采取了不同的管理策略。小span用链表，而且每个大小的span都用一个单独的链表来管理。大span用std::set。</p>



<p>前文没有提到的是，从另一个维度来看，PageHeap是分开管理<code>ON_NORMAL_FREELIST</code>和<code>ON_RETURNED_FREELIST</code>状态的span的。因此，每个小span对应两个链表，所有大span对应两个set。</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// We segregate spans of a given size into two circular linked</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// lists: one for normal spans, and one for spans whose memory</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// has been returned to the system.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">struct</span><span class="enlighter-text"> SpanList </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  Span        normal;</span></div></div><div class=""><div><span class="enlighter-text">  Span        returned;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Array mapping from span length to a doubly linked list of free spans</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">//</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// NOTE: index 'i' stores spans of length 'i + 1'.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">SpanList free_</span><span class="enlighter-g1">[</span><span class="enlighter-text">kMaxPages</span><span class="enlighter-g1">]</span><span class="enlighter-text">;   </span><span class="enlighter-c0"> // 128</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">typedef</span><span class="enlighter-text"> std::set</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">SpanPtrWithLength, SpanBestFitLess, STLPageHeapAllocator</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">SpanPtrWithLength, </span><span class="enlighter-k5">void</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> SpanSet;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Sets of spans with length &gt; kMaxPages.</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">//</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Rather than using a linked list, we use sets here for efficient</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// best-fit search.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">SpanSet large_normal_;</span></div></div><div class=""><div><span class="enlighter-text">SpanSet large_returned_;</span></div></div></div><div class="enlighter-raw">// We segregate spans of a given size into two circular linked
// lists: one for normal spans, and one for spans whose memory
// has been returned to the system.
struct SpanList {
  Span        normal;
  Span        returned;
};

// Array mapping from span length to a doubly linked list of free spans
//
// NOTE: index 'i' stores spans of length 'i + 1'.
SpanList free_[kMaxPages];    // 128

typedef std::set&lt;SpanPtrWithLength, SpanBestFitLess, STLPageHeapAllocator&lt;SpanPtrWithLength, void&gt; &gt; SpanSet;

// Sets of spans with length &gt; kMaxPages.
//
// Rather than using a linked list, we use sets here for efficient
// best-fit search.
SpanSet large_normal_;
SpanSet large_returned_;</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// We segregate spans of a given size into two circular linked
// lists: one for normal spans, and one for spans whose memory
// has been returned to the system.
struct SpanList {
  Span        normal;
  Span        returned;
};

// Array mapping from span length to a doubly linked list of free spans
//
// NOTE: index 'i' stores spans of length 'i + 1'.
SpanList free_[kMaxPages];    // 128

typedef std::set&lt;SpanPtrWithLength, SpanBestFitLess, STLPageHeapAllocator&lt;SpanPtrWithLength, void&gt; &gt; SpanSet;

// Sets of spans with length &gt; kMaxPages.
//
// Rather than using a linked list, we use sets here for efficient
// best-fit search.
SpanSet large_normal_;
SpanSet large_returned_;</pre>



<p>因此，实际的PageHeap是这样的：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-PageHeap2.svg" alt="" class="wp-image-525"></figure>



<h3 id="ftoc-heading-44" class="ftwp-heading">Heap段的使用限制</h3>



<p>可以通过<code>FLAGS_tcmalloc_heap_limit_mb</code>对进程heap段的内存使用量进行限制，默认值0表示不做限制。如果开启了限制并且对heap段内存的使用量接近这个限制时，TCMalloc会更积极的将空闲内存释放给系统，进而会引发更多的软分页错误（minor page fault）。</p>



<p>为了简化讨论，<strong>后文均假设没有对heap段的内存使用做任何限制</strong>。</p>



<h3 id="ftoc-heading-45" class="ftwp-heading">创建Span</h3>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// Allocate a run of "n" pages.  Returns zero if out of memory.</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Caller should not pass "n == 0" -- instead, n should have</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// been rounded up already.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">Span* </span><span class="enlighter-m0">New</span><span class="enlighter-g1">(</span><span class="enlighter-text">Length n</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">// Allocate a run of "n" pages.  Returns zero if out of memory.
// Caller should not pass "n == 0" -- instead, n should have
// been rounded up already.
Span* New(Length n);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// Allocate a run of "n" pages.  Returns zero if out of memory.
// Caller should not pass "n == 0" -- instead, n should have
// been rounded up already.
Span* New(Length n);</pre>



<p>创建span的过程其实就是分配中对象和大对象的过程，假设要创建k个page大小的span（以下简称大小为k的span），过程如下：</p>



<h4 id="ftoc-heading-46" class="ftwp-heading">搜索空闲span</h4>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">Span* </span><span class="enlighter-m0">SearchFreeAndLargeLists</span><span class="enlighter-g1">(</span><span class="enlighter-text">Length n</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">Span* SearchFreeAndLargeLists(Length n);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">Span* SearchFreeAndLargeLists(Length n);</pre>



<p>1. 搜索空闲span链表，按照以下顺序，找出第一个不小于k的span：</p>



<ul><li>从大小为k的span的链表开始依次搜索</li><li>对于某个大小的span，先搜normal链表，再搜returned链表</li></ul>



<p>2. 如果span链表中没找到合适的span，则搜索存储大span的set：</p>



<ul><li>从大小为k的span开始搜索</li><li>同样先搜normal再搜returned</li><li>优先使用长度最小并且起始地址最小的span（<strong>best-fit</strong>）</li></ul>



<p>3. 如果通过以上两步找到了一个大小为m的span，则将其拆成两个span：</p>



<ul><li>大小为m – k的span重新根据大小和状态放回链表或set中</li><li>大小为k的span作为结果返回，创建span结束</li></ul>



<p>4. 如果没搜到合适的span，则继续后面的步骤：向系统申请内存。</p>



<h4 id="ftoc-heading-47" class="ftwp-heading">小插曲：释放所有空闲内存</h4>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-m0">ReleaseAtLeastNPages</span><span class="enlighter-g1">(</span><span class="enlighter-k3">static_cast</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Length</span><span class="enlighter-g1">&gt;(</span><span class="enlighter-n2">0x7fffffff</span><span class="enlighter-g1">))</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">ReleaseAtLeastNPages(static_cast&lt;Length&gt;(0x7fffffff));</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">ReleaseAtLeastNPages(static_cast&lt;Length&gt;(0x7fffffff));</pre>



<p>当没有可用的空闲span时，需要向系统申请新的内存，但在此之前，还有一次避免向系统申请新内存的机会：释放所有空闲内存。向系统申请的内存每达到128MB，且空闲内存超过从系统申请的总内存的1/4，就需要将所有的空闲内存释放。</p>



<p>因为TCMalloc将normal和returned的内存分开管理，而这两种内存不会合并在一起。因此，可能有一段连续的空闲内存符合要求（k个page大小），但因为它既有normal的部分，又有returned的部分，因此前面的搜索规则搜不到它。而释放所有内存可以将normal的内存也变为returned的，然后就可以合并了（合并规则详细后文合并span）。</p>



<p>之所以控制在每128MB一次的频率，是为了避免高频小量申请内存的程序遭受太多的minor page fault。</p>



<p>释放完毕后，会按照前面的搜索规则再次尝试搜索空闲span，如果还搜不到，才继续后续的步骤。</p>



<h4 id="ftoc-heading-48" class="ftwp-heading">向系统申请内存</h4>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k5">bool</span><span class="enlighter-text"> </span><span class="enlighter-m0">GrowHeap</span><span class="enlighter-g1">(</span><span class="enlighter-text">Length n</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">bool GrowHeap(Length n);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">bool GrowHeap(Length n);</pre>



<p>找不到合适的空闲span，就只能向系统申请新的内存了。</p>



<p>TCMalloc以<code>sbrk()</code>和<code>mmap()</code>两种方式向系统申请内存，所申请内存的大小和位置均按page对齐，优先使用<code>sbrk()</code>，申请失败则会尝试使用<code>mmap()</code>（64位系统Debug模式优先使用mmap，原因详见<code>InitSystemAllocators()</code>注释）。</p>



<p>TCMalloc向系统申请应用程序所使用的内存时，<strong>每次至少尝试申请1MB</strong>（<code>kMinSystemAlloc</code>），申请TCMalloc自身元数据所使用的内存时，每次至少申请8MB（<code>kMetadataAllocChunkSize</code>）。这样做有两点好处：</p>



<ul><li>减少外部内存碎片（减少所申请内存与TCMalloc元数据所占内存的交替）</li><li>均摊系统调用的开销，提升性能</li></ul>



<p>另外，当<strong>从系统申请的总内存超过128MB时就为PageMap一次性申请一大块内存</strong>，保证可以存储所有page和span的对应关系。这一举措可以减少TCMalloc的元数据将内存分块而导致的外部碎片。从源码中可以发现，仅在32位系统下才会这样做，可能是因为64位系统内存的理论上限太大，不太现实。</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// bool PageHeap::GrowHeap(Length n);</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">old_system_bytes </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> kPageMapBigAllocationThreshold</span></div></div><div class=""><div><span class="enlighter-text">    &amp;&amp; stats_.</span><span class="enlighter-m3">system_bytes</span><span class="enlighter-text"> </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">= kPageMapBigAllocationThreshold</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  pagemap_.</span><span class="enlighter-m3">PreallocateMoreMemory</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">// bool PageHeap::GrowHeap(Length n);
if (old_system_bytes &lt; kPageMapBigAllocationThreshold
    &amp;&amp; stats_.system_bytes &gt;= kPageMapBigAllocationThreshold) {
  pagemap_.PreallocateMoreMemory();
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// bool PageHeap::GrowHeap(Length n);
if (old_system_bytes &lt; kPageMapBigAllocationThreshold
    &amp;&amp; stats_.system_bytes &gt;= kPageMapBigAllocationThreshold) {
  pagemap_.PreallocateMoreMemory();
}</pre>



<h5 id="ftoc-heading-49" class="ftwp-heading">sbrk</h5>



<p>先来看如何使用<code>sbrk()</code>从Heap段申请内存，下图展示了<code>SbrkSysAllocator::Alloc()</code>的执行流程，为了说明外部碎片的产生，并覆盖到<code>SbrkSysAllocator::Alloc()</code>的大部分流程，假设page大小为8KB，所申请的内存大小为16KB：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-SbrkAlloc.svg" alt="" class="wp-image-529"></figure>



<ol><li>假设在申请内存之前，pb（program break，可以认为是堆内存的上边界）指向红色箭头所示位置，即没有在page的边界处。</li><li>第一次sbrk申请16KB内存，因此pb移至绿色箭头所示位置。</li><li>由于需要对申请的内存按page对齐，因此需要第二次sbrk，pb指向蓝色箭头所示位置，page的边界处。</li><li>最终，返回的内存地址为黑色箭头所示位置，黑色和蓝色箭头之间刚好16KB。</li></ol>



<p>可以看出，红色箭头和黑色箭头之间的内存就无法被使用了，产生了<strong>外部碎片</strong>。</p>



<h5 id="ftoc-heading-50" class="ftwp-heading">mmap</h5>



<p>如果使用sbrk申请内存失败，TCMalloc会尝试使用mmap来分配。同样，为了覆盖<code>MmapSysAllocator::Alloc()</code>的大部分情况，下图假设系统的page为4KB，TCMalloc的page为16KB，申请的内存大小为32KB：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-MmapAlloc.svg" alt="" class="wp-image-517"></figure>



<ol><li>假设在申请内存之前，mmap段的边界位于红色箭头所示位置。</li><li>第一次mmap，会在32KB的基础上，多申请(对齐大小 – 系统page大小) = 16 -4 = 12KB的内存。此时mmap的边界位于绿色箭头所示位置。</li><li>然后通过两次munmap将所申请内存的两侧边界分别对齐到TCMalloc的page边界。</li><li>最终申请到的内存为两个蓝色箭头之间的部分，返回左侧蓝色箭头所指示的内存地址。</li></ol>



<p>如果申请内存成功，则创建一个新的span并立即删除，可将其放入空闲span的链表或set中，然后继续后面的步骤。</p>



<h4 id="ftoc-heading-51" class="ftwp-heading">最后的搜索</h4>



<p>最后，重新搜索一次空闲span，如果还找不到合适的空闲span，那就认为是创建失败了。</p>



<p>至此，创建span的操作结束。</p>



<h3 id="ftoc-heading-52" class="ftwp-heading">删除Span</h3>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// Delete the span "[p, p+n-1]".</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// REQUIRES: span was returned by earlier call to New() and</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">//           has not yet been deleted.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Delete</span><span class="enlighter-g1">(</span><span class="enlighter-text">Span* span</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">// Delete the span "[p, p+n-1]".
// REQUIRES: span was returned by earlier call to New() and
//           has not yet been deleted.
void Delete(Span* span);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// Delete the span "[p, p+n-1]".
// REQUIRES: span was returned by earlier call to New() and
//           has not yet been deleted.
void Delete(Span* span);</pre>



<p>当span所拆分成的小对象全部被应用程序释放变为空闲对象，或者作为中对象或大对象使用的span被应用程序释放时，需要将span删除。不过并不是真正的删除，而是放到空闲span的链表或set中。</p>



<p>删除的操作非常简单，但可能会触发合并span的操作，以及释放内存到系统的操作。</p>



<h4 id="ftoc-heading-53" class="ftwp-heading">合并Span</h4>



<p>当span被delete时，会尝试向前向后合并一个span。</p>



<p>合并规则如下：</p>



<ul><li>只有在虚拟内存空间上连续的span才可以被合并。</li><li>只有同是normal状态的span或同是returned状态的span才可以被合并。</li></ul>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-SpanMerge1.svg" alt="" class="wp-image-537"></figure>



<p>上图中，被删除的span的前一个span是normal状态，因此可以与之合并，而后一个span是returned状态，无法与之合并。合并操作之后如下图：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-SpanMerge2.svg" alt="" class="wp-image-539"></figure>



<p>还有一个值得注意的开关：<code>aggressive_decommit_</code>，开启后TCMalloc会积极的释放内存给系统，默认是关闭状态，可通过以下方式更改：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">MallocExtension::</span><span class="enlighter-m0">instance</span><span class="enlighter-g1">()</span><span class="enlighter-text">-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">SetNumericProperty</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"tcmalloc.aggressive_memory_decommit"</span><span class="enlighter-text">, value</span><span class="enlighter-g1">)</span></div></div></div><div class="enlighter-raw">MallocExtension::instance()-&gt;SetNumericProperty("tcmalloc.aggressive_memory_decommit", value)</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">MallocExtension::instance()-&gt;SetNumericProperty("tcmalloc.aggressive_memory_decommit", value)</pre>



<p>当开启了<code>aggressive_decommit_</code>后，删除normal状态的span时会尝试将其释放给系统，释放成功则状态变为returned。</p>



<p>在合并时，如果被删除的span此时是returned状态，则会将与其相邻的normal状态的span也释放给系统，然后再尝试合并。</p>



<p>因此，上面的例子中，被删除的span和其前一个span都会被更改为returned状态，合并之后如下，即三个span被合并成为一个span：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-SpanMerge3.svg" alt="" class="wp-image-541"></figure>



<h4 id="ftoc-heading-54" class="ftwp-heading">释放span</h4>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">Length </span><span class="enlighter-m0">ReleaseAtLeastNPages</span><span class="enlighter-g1">(</span><span class="enlighter-text">Length num_pages</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">Length ReleaseAtLeastNPages(Length num_pages);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">Length ReleaseAtLeastNPages(Length num_pages);</pre>



<p>在delete一个span时还会以一定的频率触发释放span的内存给系统的操作（<code>ReleaseAtLeastNPages()</code>）。释放的频率可以通过环境变量<code>TCMALLOC_RELEASE_RATE</code>来修改。<strong>默认值为1，表示每删除1000个page就尝试释放至少1个page</strong>，2表示每删除500个page尝试释放至少1个page，依次类推，10表示每删除100个page尝试释放至少1个page。0表示永远不释放，值越大表示释放的越快，合理的取值区间为[0, 10]。</p>



<p>释放规则：</p>



<ul><li>从小到大循环，按顺序释放空闲span，直到释放的page数量满足需求。</li><li>多次调用会从上一次循环结束的位置继续循环，而不会重新从头（1 page）开始。</li><li>释放的过程中能合并span就合并span</li><li>可能释放少于num_pages，没那么多free的span了。</li><li>可能释放多于num_pages，还差一点就够num_pages了，但刚好碰到一个很大的span。</li></ul>



<p>释放方式：</p>



<p>如果系统支持，通过<code>madvise(MADV_DONTNEED)</code>释放span对应的内存。因此，即使释放成功，对应的虚拟内存地址空间仍然可访问，但内存的内容会丢失，在下次访问时会导致minor page fault以用0来重新初始化。</p>



<h2 id="ftoc-heading-55" class="ftwp-heading">ThreadCache</h2>



<p>TCMalloc分配小对象的速度是非常快的，这得益于其对每个线程都有一份单独的cache，即ThreadCache。</p>



<p>ThreadCache其实就是一组FreeList而已。对于每个size class，在ThreadCache中都有一个FreeList，缓存了一组空闲对象，应用程序申请256KB以内的小内存时，优先返回FreeList中的一个空闲对象。因为每个线程每个size class都有单独的FreeList，因此这个过程是<strong>不需要加锁</strong>的，速度非常快。</p>



<p>如果FreeList为空，TCMalloc才会从size class对应的CentralFreeList中获取一组空闲对象放入ThreadCache的FreeList中，并将其中一个对象返回。从CentralFreeList中获取空闲对象<strong>需要加锁</strong>的。</p>



<p>回顾下ThreadCache的结构：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-ThreadCache.svg" alt="" class="wp-image-543"></figure>



<p>各个线程的ThreadCache互相连接成为一个双向链表，主要目的是为了方便统计信息。</p>



<h3 id="ftoc-heading-56" class="ftwp-heading">每线程Cache</h3>



<p>那么每个线程一个ThreadCache是如何实现的呢？</p>



<p>这依赖于两种技术：Thread Local Storage（TLS)，和Thread Specific Data（TSD）。两者的功能基本是一样的，都是提供每线程存储。TLS用起来更方便，读取数据更快，但在线程销毁时TLS无法执行清理操作，而TSD可以，因此TCMalloc使用TSD为每个线程提供一个ThreadCache，如果TLS可用，则同时使用TLS保存一份拷贝以加速数据的访问。</p>



<p>TLS和TSD的具体细节可参考<a href="http://man7.org/tlpi/">《The Linux Programming Interface》</a>相关章节（31.3，31.4），本文不再展开讨论。</p>



<p>详细可参考源码中<code>ThreadCache::CreateCacheIfNecessary()</code>函数和<code>threadlocal_data_</code>变量相关代码。</p>



<h3 id="ftoc-heading-57" class="ftwp-heading">何时创建ThreadCache</h3>



<p>当某线程第一次申请分配内存时，TCMalloc为该线程创建其专属的ThreadCache（<code>ThreadCache::GetCache()</code> -&gt; <code>ThreadCache::CreateCacheIfNecessary()</code>）。</p>



<h3 id="ftoc-heading-58" class="ftwp-heading">何时销毁ThreadCache</h3>



<p>在TCMalloc初始化TSD时，会调用Pthreads API中的<code>pthread_key_create()</code>创建ThreadCache对应的key，并且指定了销毁ThreadCache的函数<code>ThreadCache::DestroyThreadCache()</code>。因此，当一个线程销毁时，其对应的ThreadCache会由该函数销毁。</p>



<h3 id="ftoc-heading-59" class="ftwp-heading">ThreadCache的大小</h3>



<p>TCMalloc定义了一些变量来<strong>建议</strong>ThreadCache的大小。注意，是建议，而非强制。也就是说，实际的大小可能会超过这些值。</p>



<p>所有线程的ThreadCache的总大小限制（<code>overall_thread_cache_size_</code>）默认为32MB（<code>kDefaultOverallThreadCacheSize</code>），取值范围512KB~1GB，可以通过环境变量<code>TCMalloc_MAX_TOTAL_THREAD_CACHE_BYTES</code>或以下方式来进行调整：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">MallocExtension::</span><span class="enlighter-m0">instance</span><span class="enlighter-g1">()</span><span class="enlighter-text">-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">SetNumericProperty</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"TCMalloc.max_total_thread_cache_bytes"</span><span class="enlighter-text">, value</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">MallocExtension::instance()-&gt;SetNumericProperty("TCMalloc.max_total_thread_cache_bytes", value);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">MallocExtension::instance()-&gt;SetNumericProperty("TCMalloc.max_total_thread_cache_bytes", value);</pre>



<p>每个线程的ThreadCache的大小限制默认为4MB（<code>kMaxThreadCacheSize</code>）。调整ThreadCache总大小时，会修改每个ThreadCache的大小限制到512KB~4MB之间的相应值。</p>



<h3 id="ftoc-heading-60" class="ftwp-heading">慢启动算法：FreeList的长度控制</h3>



<p>控制ThreadCache中各个FreeList中元素的数量是很重要的：</p>



<ul><li>太小：不够用，需要经常去CentralCache获取空闲对象，带锁操作</li><li>太大：太多对象在空闲列表中闲置，浪费内存</li></ul>



<p>不仅是内存分配，对于内存释放来说控制FreeList的长度也很重要：</p>



<ul><li>太小：需要经常将空闲对象移至CentralCache，带锁操作</li><li>太大：太多对象在空闲列表中闲置，浪费内存</li></ul>



<p>并且，有些线程的分配和释放是不对称的，比如生产者线程和消费者线程，这也是需要考虑的一个点。</p>



<p>类似TCP的拥塞控制算法，TCMalloc采用了慢启动（slow start）的方式来控制FreeList的长度，其效果如下：</p>



<ul><li>FreeList被使用的越频繁，最大长度就越大。</li><li>如果FreeList更多的用于释放而不是分配，则其最大长度将仅会增长到某一个点，以有效的将整个空闲对象链表一次性移动到CentralCache中。</li></ul>



<p>分配内存时的慢启动代码如下（<code>FetchFromCentralCache</code>）：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k8">const</span><span class="enlighter-text"> </span><span class="enlighter-k5">int</span><span class="enlighter-text"> batch_size = Static::</span><span class="enlighter-m0">sizemap</span><span class="enlighter-g1">()</span><span class="enlighter-text">-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">num_objects_to_move</span><span class="enlighter-g1">(</span><span class="enlighter-text">cl</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Increase max length slowly up to batch_size.  After that,</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// increase by batch_size in one shot so that the length is a</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// multiple of batch_size.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> batch_size</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">set_max_length</span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text"> + 1</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span><span class="enlighter-k1">else</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Don't let the list get too long.  In 32 bit builds, the length</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // is represented by a 16 bit int, so we need to watch out for</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // integer overflow.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k5">int</span><span class="enlighter-text"> new_length = min</span><span class="enlighter-g1">&lt;</span><span class="enlighter-k5">int</span><span class="enlighter-g1">&gt;(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text"> + batch_size,</span></div></div><div class=""><div><span class="enlighter-text">                            kMaxDynamicFreeListLength</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // The list's max_length must always be a multiple of batch_size,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // and kMaxDynamicFreeListLength is not necessarily a multiple</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // of batch_size.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  new_length -= new_length % batch_size;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">ASSERT</span><span class="enlighter-g1">(</span><span class="enlighter-text">new_length % batch_size == 0</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">set_max_length</span><span class="enlighter-g1">(</span><span class="enlighter-text">new_length</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">const int batch_size = Static::sizemap()-&gt;num_objects_to_move(cl);

// Increase max length slowly up to batch_size.  After that,
// increase by batch_size in one shot so that the length is a
// multiple of batch_size.
if (list-&gt;max_length() &lt; batch_size) {
  list-&gt;set_max_length(list-&gt;max_length() + 1);
} else { 
  // Don't let the list get too long.  In 32 bit builds, the length
  // is represented by a 16 bit int, so we need to watch out for
  // integer overflow.
  int new_length = min&lt;int&gt;(list-&gt;max_length() + batch_size,
                            kMaxDynamicFreeListLength);
  // The list's max_length must always be a multiple of batch_size,
  // and kMaxDynamicFreeListLength is not necessarily a multiple
  // of batch_size.
  new_length -= new_length % batch_size;
  ASSERT(new_length % batch_size == 0);
  list-&gt;set_max_length(new_length);
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">const int batch_size = Static::sizemap()-&gt;num_objects_to_move(cl);

// Increase max length slowly up to batch_size.  After that,
// increase by batch_size in one shot so that the length is a
// multiple of batch_size.
if (list-&gt;max_length() &lt; batch_size) {
  list-&gt;set_max_length(list-&gt;max_length() + 1);
} else { 
  // Don't let the list get too long.  In 32 bit builds, the length
  // is represented by a 16 bit int, so we need to watch out for
  // integer overflow.
  int new_length = min&lt;int&gt;(list-&gt;max_length() + batch_size,
                            kMaxDynamicFreeListLength);
  // The list's max_length must always be a multiple of batch_size,
  // and kMaxDynamicFreeListLength is not necessarily a multiple
  // of batch_size.
  new_length -= new_length % batch_size;
  ASSERT(new_length % batch_size == 0);
  list-&gt;set_max_length(new_length);
}</pre>



<p>max_length即为FreeList的最大长度，初始值为1。batch_size是size class一节提到的一次性移动空闲对象的数量，其值因size class而异。</p>



<p>可以看到，只要max_length没有超过batch_size，每当FreeList中没有元素需要从CentralCache获取空闲对象时（即<code>FetchFromCentralCache</code>），max_length就加1。</p>



<p>一旦max_length达到batch_size，接下来每次<code>FetchFromCentralCache</code>就会导致max_length增加batch_size。</p>



<p>但并不会无限制的增加，最大到<code>kMaxDynamicFreeListLength</code>（8192），以避免从FreeList向CentralCache移动对象时，因为对象过多而过长的占用锁。</p>



<p>再来看内存回收时的情况，每次释放小对象，都会检查FreeList的当前长度是否超过max_length：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-m0">PREDICT_FALSE</span><span class="enlighter-g1">(</span><span class="enlighter-text">length </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()))</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">ListTooLong</span><span class="enlighter-g1">(</span><span class="enlighter-text">list, cl</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k0">return</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span></div></div></div><div class="enlighter-raw">if (PREDICT_FALSE(length &gt; list-&gt;max_length())) {
  ListTooLong(list, cl);
  return;
} </div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">if (PREDICT_FALSE(length &gt; list-&gt;max_length())) {
  ListTooLong(list, cl);
  return;
} </pre>



<p>如果超长，则执行以下逻辑：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k5">void</span><span class="enlighter-text"> ThreadCache::</span><span class="enlighter-m0">ListTooLong</span><span class="enlighter-g1">(</span><span class="enlighter-text">FreeList* list, uint32 cl</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  size_ += list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">object_size</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k8">const</span><span class="enlighter-text"> </span><span class="enlighter-k5">int</span><span class="enlighter-text"> batch_size = Static::</span><span class="enlighter-m0">sizemap</span><span class="enlighter-g1">()</span><span class="enlighter-text">-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">num_objects_to_move</span><span class="enlighter-g1">(</span><span class="enlighter-text">cl</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">ReleaseToCentralCache</span><span class="enlighter-g1">(</span><span class="enlighter-text">list, cl, batch_size</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // If the list is too long, we need to transfer some number of</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // objects to the central cache.  Ideally, we would transfer</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // num_objects_to_move, so the code below tries to make max_length</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // converge on num_objects_to_move.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> batch_size</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // Slow start the max_length so we don't overreserve.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">set_max_length</span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text"> + 1</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span><span class="enlighter-k1">else</span><span class="enlighter-text"> </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> batch_size</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // If we consistently go over max_length, shrink max_length.  If we don't</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // shrink it, some amount of memory will always stay in this freelist.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">set_length_overages</span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">length_overages</span><span class="enlighter-g1">()</span><span class="enlighter-text"> + 1</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">length_overages</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> kMaxOverages</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">      </span><span class="enlighter-m0">ASSERT</span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> batch_size</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">      list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">set_max_length</span><span class="enlighter-g1">(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text"> - batch_size</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">      list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">set_length_overages</span><span class="enlighter-g1">(</span><span class="enlighter-text">0</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-m0">PREDICT_FALSE</span><span class="enlighter-g1">(</span><span class="enlighter-text">size_ </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> max_size_</span><span class="enlighter-g1">))</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">Scavenge</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">void ThreadCache::ListTooLong(FreeList* list, uint32 cl) {
  size_ += list-&gt;object_size();

  const int batch_size = Static::sizemap()-&gt;num_objects_to_move(cl);
  ReleaseToCentralCache(list, cl, batch_size);

  // If the list is too long, we need to transfer some number of
  // objects to the central cache.  Ideally, we would transfer
  // num_objects_to_move, so the code below tries to make max_length
  // converge on num_objects_to_move.

  if (list-&gt;max_length() &lt; batch_size) {
    // Slow start the max_length so we don't overreserve.
    list-&gt;set_max_length(list-&gt;max_length() + 1);
  } else if (list-&gt;max_length() &gt; batch_size) {
    // If we consistently go over max_length, shrink max_length.  If we don't
    // shrink it, some amount of memory will always stay in this freelist.
    list-&gt;set_length_overages(list-&gt;length_overages() + 1);
    if (list-&gt;length_overages() &gt; kMaxOverages) {
      ASSERT(list-&gt;max_length() &gt; batch_size);
      list-&gt;set_max_length(list-&gt;max_length() - batch_size);
      list-&gt;set_length_overages(0);
    }
  }

  if (PREDICT_FALSE(size_ &gt; max_size_)) {
    Scavenge();
  }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">void ThreadCache::ListTooLong(FreeList* list, uint32 cl) {
  size_ += list-&gt;object_size();

  const int batch_size = Static::sizemap()-&gt;num_objects_to_move(cl);
  ReleaseToCentralCache(list, cl, batch_size);

  // If the list is too long, we need to transfer some number of
  // objects to the central cache.  Ideally, we would transfer
  // num_objects_to_move, so the code below tries to make max_length
  // converge on num_objects_to_move.

  if (list-&gt;max_length() &lt; batch_size) {
    // Slow start the max_length so we don't overreserve.
    list-&gt;set_max_length(list-&gt;max_length() + 1);
  } else if (list-&gt;max_length() &gt; batch_size) {
    // If we consistently go over max_length, shrink max_length.  If we don't
    // shrink it, some amount of memory will always stay in this freelist.
    list-&gt;set_length_overages(list-&gt;length_overages() + 1);
    if (list-&gt;length_overages() &gt; kMaxOverages) {
      ASSERT(list-&gt;max_length() &gt; batch_size);
      list-&gt;set_max_length(list-&gt;max_length() - batch_size);
      list-&gt;set_length_overages(0);
    }
  }

  if (PREDICT_FALSE(size_ &gt; max_size_)) {
    Scavenge();
  }
}</pre>



<p>与内存分配的情况类似，只要max_length还没有达到batch_size，每当FreeList的长度超过max_length，max_length的值就加1。</p>



<p>当max_length达到或超过batch_size后，并不会立即调整max_length，而是累计超过3次（<code>kMaxOverages</code>）后，才会将max_length减少batch_size。</p>



<h3 id="ftoc-heading-61" class="ftwp-heading">垃圾回收</h3>



<p>TODO：本节还没写完，请先参阅<a href="https://gperftools.github.io/gperftools/tcmalloc.htm">官方介绍</a>Garbage Collection of Thread Caches一节。。</p>



<p>从ThreadCache中回收垃圾对象，将未使用的对象返回到CentralFreeList，可以控制缓存的大小。</p>



<p>不同线程对缓存大小的需求是不一样的，因此不能统一对待：有些线程需要大的缓存，有些线程需要小的缓存即可，甚至有些线程不需要缓存。</p>



<p>当一个ThreadCache大小超过其max_size_时，触发垃圾回收：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-m0">PREDICT_FALSE</span><span class="enlighter-g1">(</span><span class="enlighter-text">size_ </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> max_size_</span><span class="enlighter-g1">)){</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">Scavenge</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">if (PREDICT_FALSE(size_ &gt; max_size_)){
  Scavenge();
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">if (PREDICT_FALSE(size_ &gt; max_size_)){
  Scavenge();
}</pre>



<p>只有当应用程序释放内存时（<code>ThreadCache::Deallocate()</code>）才会触发垃圾回收，遍历ThreadCache中所有的FreeList，将FreeList中的一些对象移至对应的CentralFreeList中。</p>



<p>具体移动多少对象由低水位标记L（<code>lowater_</code>，每个FreeList一个）来决定。L记录自上次垃圾收集以来，FreeList的最小长度。</p>



<h2 id="ftoc-heading-62" class="ftwp-heading">CentralCache</h2>



<p>CentralCache是逻辑上的概念，其本质是CentralFreeListPadded类型（CentralFreeList的子类，用于64字节对齐）的数组，每个size class对应数组中的一个元素。</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">ATTRIBUTE_HIDDEN </span><span class="enlighter-k0">static</span><span class="enlighter-text"> CentralFreeListPadded central_cache_</span><span class="enlighter-g1">[</span><span class="enlighter-text">kClassSizesMax</span><span class="enlighter-g1">]</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">ATTRIBUTE_HIDDEN static CentralFreeListPadded central_cache_[kClassSizesMax];</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">ATTRIBUTE_HIDDEN static CentralFreeListPadded central_cache_[kClassSizesMax];</pre>



<p>由于各线程公用一个CentralCache，因此，使用CentralCache时需要加锁。</p>



<p>以下讨论都是针对某一个size class的。</p>



<p>CentralFreeList中缓存了一系列小对象，供各线程的ThreadCache取用，各线程也会将多余的空闲小对象还给CentralFreeList，另外CentralFreeList还负责从PageHeap申请span以分割成小对象，以及将不再使用的span还给PageHeap。</p>



<h3 id="ftoc-heading-63" class="ftwp-heading">管理span</h3>



<p>CentralFreeList真正管理的是span，而小对象是包含在span中的空闲对象链表中的。CentralFreeList的<code>empty_</code>链表保存了已经没有空闲对象可用的span，<code>nonempty_</code>链表保存了还有空闲对象可用的span：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-CentralFreeList.svg" alt="" class="wp-image-513"></figure>



<h3 id="ftoc-heading-64" class="ftwp-heading">CentralFreeList↔ PageHeap</h3>



<h4 id="ftoc-heading-65" class="ftwp-heading">从PageHeap获取span</h4>



<p>当ThreadCache从CentralFreeList取用空闲对象（<code>RemoveRange</code>），但CentralFreeList的空闲对象数量不够时，CentralFreeList调用<code>Populate()</code>从PageHeap申请一个span拆分成若干小对象，首首连接记录在span的<code>objects</code>指针中，即每个小对象的起始位置处，记录了下一个小对象的地址。此时的span如下图：</p>



<figure class="wp-block-image"><img src="./TCMalloc_files/tcmalloc-FreshSpan.svg" alt="" class="wp-image-515"></figure>



<p>可以看到，此时span包含的对象按顺序连接在一起。</p>



<p>新申请的span被放入CentralFreeList的<code>nonempty_</code>链表头部。</p>



<h4 id="ftoc-heading-66" class="ftwp-heading">将span还给PageHeap</h4>



<p>CentralFreeList维护span的成员变量<code>refcount</code>，用来记录ThreadCache从中获取了多少对象。</p>



<p>当ThreadCache将不再使用的对象归还给CentralCache以致refcount减为0，即span中所有对象都空闲时，则CentralCache将这个span还给PageHeap。截取<code>CentralFreeList::ReleaseToSpans()</code>部分代码如下：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">span-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">refcount--;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">span-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">refcount == 0</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">Event</span><span class="enlighter-g1">(</span><span class="enlighter-text">span, </span><span class="enlighter-s1">'#'</span><span class="enlighter-text">, 0</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  counter_ -= </span><span class="enlighter-g1">((</span><span class="enlighter-text">span-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">length</span><span class="enlighter-g1">&lt;&lt;</span><span class="enlighter-text">kPageShift</span><span class="enlighter-g1">)</span><span class="enlighter-text"> /</span></div></div><div class=""><div><span class="enlighter-text">               Static::</span><span class="enlighter-m0">sizemap</span><span class="enlighter-g1">()</span><span class="enlighter-text">-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">ByteSizeForClass</span><span class="enlighter-g1">(</span><span class="enlighter-text">span-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">sizeclass</span><span class="enlighter-g1">))</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  tcmalloc::</span><span class="enlighter-m0">DLL_Remove</span><span class="enlighter-g1">(</span><span class="enlighter-text">span</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  --num_spans_;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Release central list lock while operating on pageheap</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  lock_.</span><span class="enlighter-m3">Unlock</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    SpinLockHolder </span><span class="enlighter-m0">h</span><span class="enlighter-g1">(</span><span class="enlighter-text">Static::</span><span class="enlighter-m0">pageheap_lock</span><span class="enlighter-g1">())</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    Static::</span><span class="enlighter-m0">pageheap</span><span class="enlighter-g1">()</span><span class="enlighter-text">-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">Delete</span><span class="enlighter-g1">(</span><span class="enlighter-text">span</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  lock_.</span><span class="enlighter-m3">Lock</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">span-&gt;refcount--;
if (span-&gt;refcount == 0) {
  Event(span, '#', 0);
  counter_ -= ((span-&gt;length&lt;&lt;kPageShift) /
               Static::sizemap()-&gt;ByteSizeForClass(span-&gt;sizeclass));
  tcmalloc::DLL_Remove(span);
  --num_spans_;

  // Release central list lock while operating on pageheap
  lock_.Unlock();
  {
    SpinLockHolder h(Static::pageheap_lock());
    Static::pageheap()-&gt;Delete(span);
  }
  lock_.Lock();
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">span-&gt;refcount--;
if (span-&gt;refcount == 0) {
  Event(span, '#', 0);
  counter_ -= ((span-&gt;length&lt;&lt;kPageShift) /
               Static::sizemap()-&gt;ByteSizeForClass(span-&gt;sizeclass));
  tcmalloc::DLL_Remove(span);
  --num_spans_;

  // Release central list lock while operating on pageheap
  lock_.Unlock();
  {
    SpinLockHolder h(Static::pageheap_lock());
    Static::pageheap()-&gt;Delete(span);
  }
  lock_.Lock();
}</pre>



<h3 id="ftoc-heading-67" class="ftwp-heading">CentralFreeList↔ThreadCache</h3>



<p>CentralFreeList和ThreadCache之间的对象移动是批量进行的：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// Insert the specified range into the central freelist.  N is the number of</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// elements in the range.  RemoveRange() is the opposite operation.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">InsertRange</span><span class="enlighter-g1">(</span><span class="enlighter-k5">void</span><span class="enlighter-text"> *start, </span><span class="enlighter-k5">void</span><span class="enlighter-text"> *end, </span><span class="enlighter-k5">int</span><span class="enlighter-text"> N</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Returns the actual number of fetched elements and sets *start and *end.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">int</span><span class="enlighter-text"> </span><span class="enlighter-m0">RemoveRange</span><span class="enlighter-g1">(</span><span class="enlighter-k5">void</span><span class="enlighter-text"> **start, </span><span class="enlighter-k5">void</span><span class="enlighter-text"> **end, </span><span class="enlighter-k5">int</span><span class="enlighter-text"> N</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">// Insert the specified range into the central freelist.  N is the number of
// elements in the range.  RemoveRange() is the opposite operation.
void InsertRange(void *start, void *end, int N);

// Returns the actual number of fetched elements and sets *start and *end.
int RemoveRange(void **start, void **end, int N);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// Insert the specified range into the central freelist.  N is the number of
// elements in the range.  RemoveRange() is the opposite operation.
void InsertRange(void *start, void *end, int N);

// Returns the actual number of fetched elements and sets *start and *end.
int RemoveRange(void **start, void **end, int N);</pre>



<p>start和end指定小对象链表的范围，N指定小对象的数量。批量移动小对象可以<strong>均摊锁操作的开销</strong>。</p>



<h4 id="ftoc-heading-68" class="ftwp-heading">ThreadCache取用小对象</h4>



<p>当ThreadCache中某个size class没有空闲对象可用时，需要从CentralFreeList获取N个对象，那么N的值是多少呢？从<code>ThreadCache::FetchFromCentralCache()</code>中可以找到答案：</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k8">const</span><span class="enlighter-text"> </span><span class="enlighter-k5">int</span><span class="enlighter-text"> batch_size = Static::</span><span class="enlighter-m0">sizemap</span><span class="enlighter-g1">()</span><span class="enlighter-text">-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">num_objects_to_move</span><span class="enlighter-g1">(</span><span class="enlighter-text">cl</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k8">const</span><span class="enlighter-text"> </span><span class="enlighter-k5">int</span><span class="enlighter-text"> num_to_move = min</span><span class="enlighter-g1">&lt;</span><span class="enlighter-k5">int</span><span class="enlighter-g1">&gt;(</span><span class="enlighter-text">list-</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">max_length</span><span class="enlighter-g1">()</span><span class="enlighter-text">, batch_size</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> *start, *end;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">int</span><span class="enlighter-text"> fetch_count = Static::</span><span class="enlighter-m0">central_cache</span><span class="enlighter-g1">()[</span><span class="enlighter-text">cl</span><span class="enlighter-g1">]</span><span class="enlighter-text">.</span><span class="enlighter-m3">RemoveRange</span><span class="enlighter-g1">(</span><span class="enlighter-text">&amp;start, &amp;end, num_to_move</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">const int batch_size = Static::sizemap()-&gt;num_objects_to_move(cl);
const int num_to_move = min&lt;int&gt;(list-&gt;max_length(), batch_size);
void *start, *end;
int fetch_count = Static::central_cache()[cl].RemoveRange(&amp;start, &amp;end, num_to_move);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">const int batch_size = Static::sizemap()-&gt;num_objects_to_move(cl);
const int num_to_move = min&lt;int&gt;(list-&gt;max_length(), batch_size);
void *start, *end;
int fetch_count = Static::central_cache()[cl].RemoveRange(&amp;start, &amp;end, num_to_move);</pre>



<p>移动数量N为max_length和batch_size的最小值（两者的具体涵义参见ThreadCache慢启动一节）。</p>



<p>假设只考虑内存分配的情况，一开始移动1个，然后是2个、3个，以此类推，同时max_length每次也加1，直到达到batch_size后，每次移动batch_size个对象。</p>



<p>CentralFreeList和ThreadCache之间的对象移动有个优化措施，因为大部分情况都是每次移动batch_size个对象，为了减少链表操作，提升效率，CentralFreeList将移动的batch_size个对象的链表的首尾指针缓存在了TCEntry中。因此后续只要需要移动batch_size个对象，只需要操作链表的首尾即可。</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers enlighter-overflow-scroll "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// Here we reserve space for TCEntry cache slots.  Space is preallocated</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// for the largest possible number of entries than any one size class may</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// accumulate.  Not all size classes are allowed to accumulate</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// kMaxNumTransferEntries, so there is some wasted space for those size</span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// classes.</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">TCEntry tc_slots_</span><span class="enlighter-g1">[</span><span class="enlighter-text">kMaxNumTransferEntries</span><span class="enlighter-g1">]</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">// Here we reserve space for TCEntry cache slots.  Space is preallocated
// for the largest possible number of entries than any one size class may
// accumulate.  Not all size classes are allowed to accumulate
// kMaxNumTransferEntries, so there is some wasted space for those size
// classes.
TCEntry tc_slots_[kMaxNumTransferEntries];</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// Here we reserve space for TCEntry cache slots.  Space is preallocated
// for the largest possible number of entries than any one size class may
// accumulate.  Not all size classes are allowed to accumulate
// kMaxNumTransferEntries, so there is some wasted space for those size
// classes.
TCEntry tc_slots_[kMaxNumTransferEntries];</pre>



<h4 id="ftoc-heading-69" class="ftwp-heading">ThreadCache归还小对象</h4>



<p>当ThreadCache中的空闲对象过多时（<code>ThreadCache::ListTooLong()</code>），会将一部分空闲对象放回CentralFreeList（<code>ThreadCache::ReleaseToCentralCache()</code>）。如何判断空闲对象过多请参考ThreadCache慢启动一节。</p>



<p>线程销毁也会将其ThreadCache中所有的空闲对象都放回CentralFreeList。</p>



<p>如果ThreadCache缓存的内存大小超过其允许的最大值，会触发GC操作（<code>ThreadCache::Scavenge()</code>），在其中也会将部分小对象归还给CentralFreeList，具体请参考ThreadCache垃圾回收一节。</p>



<p>全文完。</p>
</div>
			<div class="wbp-cbm" style="--dwqrColor: #c62641;" wb-share-url="https://wallenwang.com/?p=69"><div class="dwqr-inner"><a class="wb-btn-dwqr wb-btn-donate j-dwqr-donate-btn" rel="nofollow"><svg class="wb-icon wbsico-donate"><use xlink:href="#wbsico-dwqr-donate"></use></svg><span>打赏</span></a><a class="wb-btn-dwqr wb-btn-like j-dwqr-like-btn" data-count="15" rel="nofollow"><svg class="wb-icon wbsico-like"><use xlink:href="#wbsico-dwqr-like"></use></svg><span class="like-count">赞(15)</span></a><a class="wb-btn-dwqr wb-btn-share j-dwqr-social-btn" rel="nofollow"><svg class="wb-icon wbsico-share"><use xlink:href="#wbsico-dwqr-share"></use></svg><span>分享</span></a></div></div>
                        
                            <div class="entry-tags"><a href="https://wallenwang.com/tag/tcmalloc/" rel="tag">TCMalloc</a> <a href="https://wallenwang.com/tag/%e5%86%85%e5%ad%98%e7%ae%a1%e7%90%86/" rel="tag">内存管理</a></div>
            
        </div>
        
                             
    </article>
</div>
				
				    <div class="wpdiscuz_top_clearing"></div>
    <div id="comments" class="comments-area" style="padding-bottom: 0px;"><div id="respond" style="width: 0;height: 0;clear: both;margin: 0;padding: 0;"></div><div id="wpd-post-rating" class="wpd-not-rated">
            <div class="wpd-rating-wrap">
            <div class="wpd-rating-left"></div>
            <div class="wpd-rating-data">
                <div class="wpd-rating-value">
                    <span class="wpdrv">5</span>
                    <span class="wpdrc">5</span>
                    <span class="wpdrt">投票数</span></div>
                <div class="wpd-rating-title">文章评分</div>
                <div class="wpd-rating-stars"><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star wpd-active" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star wpd-active" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star wpd-active" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star wpd-active" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star wpd-active" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></div><div class="wpd-rate-starts"><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path class="wpd-star" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></div></div>
            <div class="wpd-rating-right"></div></div></div>    <div id="wpdcom" class="wpdiscuz_unauth wpd-default wpd-layout-2 wpd-comments-open">
                    <div class="wc_social_plugin_wrapper">
                            </div>
            <div class="wpd-form-wrap">
                <div class="wpd-form-head">
                                            <div class="wpd-sbs-toggle">
                            <i class="far fa-envelope" aria-hidden="true"></i> <span class="wpd-sbs-title">订阅评论</span> <i class="fas fa-caret-down" aria-hidden="true"></i>
                        </div>
                                            <div class="wpd-auth">
                                                <div class="wpd-login">
                            <a href="https://wallenwang.com/wp-login.php?redirect_to=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F"><i class="fas fa-sign-in-alt" aria-hidden="true"></i> 登录</a>                        </div>
                    </div>
                </div>
                                                    <div class="wpdiscuz-subscribe-bar wpdiscuz-hidden">
                                                    <form action="https://wallenwang.com/wp-admin/admin-ajax.php?action=wpdAddSubscription" method="post" id="wpdiscuz-subscribe-form">
                                <div class="wpdiscuz-subscribe-form-intro">提醒 </div>
                                <div class="wpdiscuz-subscribe-form-option" style="width:40%;">
                                    <select class="wpdiscuz_select" name="wpdiscuzSubscriptionType">
                                                                                    <option value="post">此页的新评论</option>
                                                                                                                                <option value="all_comment">别人回复我的评论</option>
                                                                                </select>
                                </div>
                                                                    <div class="wpdiscuz-item wpdiscuz-subscribe-form-email">
                                        <input class="email" type="email" name="wpdiscuzSubscriptionEmail" required="required" value="" placeholder="邮箱">
                                    </div>
                                                                    <div class="wpdiscuz-subscribe-form-button">
                                    <input id="wpdiscuz_subscription_button" class="wpd-prim-button" type="submit" value="›" name="wpdiscuz_subscription_button">
                                </div> 
                                <input type="hidden" id="wpdiscuz_subscribe_form_nonce" name="wpdiscuz_subscribe_form_nonce" value="42de695ba2"><input type="hidden" name="_wp_http_referer" value="/2018/11/tcmalloc/">                            </form>
                                                </div>
                            <div class="wpd-form wpd-form-wrapper wpd-main-form-wrapper" id="wpd-main-form-wrapper-0_0">
                                        <form class="wpd_comm_form wpd_main_comm_form" method="post" enctype="multipart/form-data">
                    <div class="wpd-field-comment">
                        <div class="wpdiscuz-item wc-field-textarea">
                            <div class="wpdiscuz-textarea-wrap ">
                                                                                                        <div class="wpd-avatar">
                                        <img alt="guest" src="./TCMalloc_files/saved_resource" srcset="https://cravatar.cn/avatar/?s=112&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-56 photo avatar-default" height="56" width="56" loading="lazy">                                    </div>
                                                <div id="wpd-editor-wraper-0_0" style="">
                
                <label style="display: none;" for="wc-textarea-0_0">Label</label>
                
                <div id="wpd-editor-0_0" class="ql-container ql-snow"><div class="ql-editor ql-blank" data-gramm="false" contenteditable="true" data-placeholder="欢迎分享您的想法！"><p><br></p></div><div class="ql-clipboard" contenteditable="true" tabindex="-1"></div><div class="ql-tooltip ql-hidden"><a class="ql-preview" target="_blank" href="about:blank"></a><input type="text" data-formula="e=mc^2" data-link="https://example.com" data-video="Embed URL"><a class="ql-action"></a><a class="ql-remove"></a></div><div class="ql-texteditor"><textarea id="wc-textarea-0_0" required="" name="wc_comment" class="wc_comment wpd-field" style="display: none;"></textarea></div></div>
                        <div id="wpd-editor-toolbar-0_0" class="ql-toolbar ql-snow">
                            <button title="粗体" class="ql-bold" type="button"><svg viewBox="0 0 18 18"> <path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"></path> <path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"></path> </svg></button>
                                <button title="斜体" class="ql-italic" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"></line> <line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"></line> <line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"></line> </svg></button>
                                <button title="下划线" class="ql-underline" type="button"><svg viewBox="0 0 18 18"> <path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"></path> <rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"></rect> </svg></button>
                                <button title="罢工" class="ql-strike" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"></line> <path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"></path> <path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"></path> </svg></button>
                                <button title="有序列表" class="ql-list" value="ordered" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"></line> <line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"></line> <line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"></line> <line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"></line> <path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"></path> <path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"></path> <path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"></path> </svg></button>
                                <button title="无序列表" class="ql-list" value="bullet" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"></line> <line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"></line> <line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"></line> <line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"></line> <line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"></line> <line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"></line> </svg></button>
                                <button title="引用" class="ql-blockquote" type="button"><svg viewBox="0 0 18 18"> <rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"></rect> <rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"></rect> <path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"></path> <path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"></path> </svg></button>
                                <button title="代码块" class="ql-code-block" type="button"><svg viewBox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"></line> </svg></button>
                                <button title="链接" class="ql-link" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"></line> <path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"></path> <path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"></path> </svg></button>
                                <button title="源代码" class="ql-sourcecode" data-wpde_button_name="sourcecode" type="button">{}</button>
                                <button title="隐藏" class="ql-spoiler" data-wpde_button_name="spoiler" type="button">[+]</button>
                            <div class="wpd-editor-buttons-right">
                <span class="wmu-upload-wrap" wpd-tooltip="将图像附加到此评论" wpd-tooltip-position="left"><label class="wmu-add"><i class="far fa-image" aria-hidden="true"></i><input style="display:none;" class="wmu-add-files" type="file" name="wmu_files[]" accept="image/*"></label></span>            </div>
        </div>
                    </div>
                                        </div>
                        </div>
                    </div>
                    <div class="wpd-form-foot" style="display:none;">
                        <div class="wpdiscuz-textarea-foot">
                                                        <div class="wpdiscuz-button-actions"><div class="wmu-action-wrap"><div class="wmu-tabs wmu-images-tab wmu-hide"></div></div></div>
                        </div>
                                <div class="wpd-form-row">
                    <div class="wpd-form-col-left">
                        <div class="wpdiscuz-item wc_name-wrapper wpd-has-icon">
                                    <div class="wpd-field-icon"><i class="fas fa-user" aria-hidden="true"></i></div>
                                    <input id="wc_name-0_0" value="" required="required" aria-required="true" class="wc_name wpd-field" type="text" name="wc_name" placeholder="名字*" maxlength="50" pattern=".{3,50}" title="">
                <label for="wc_name-0_0" class="wpdlb">名字*</label>
                            </div>
                        <div class="wpdiscuz-item wc_email-wrapper wpd-has-icon">
                                    <div class="wpd-field-icon"><i class="fas fa-at" aria-hidden="true"></i></div>
                                    <input id="wc_email-0_0" value="" required="required" aria-required="true" class="wc_email wpd-field" type="email" name="wc_email" placeholder="邮箱*">
                <label for="wc_email-0_0" class="wpdlb">邮箱*</label>
                            </div>
                            <div class="wpdiscuz-item wc_website-wrapper wpd-has-icon">
                                            <div class="wpd-field-icon"><i class="fas fa-link" aria-hidden="true"></i></div>
                                        <input id="wc_website-0_0" value="" class="wc_website wpd-field" type="text" name="wc_website" placeholder="网站">
                    <label for="wc_website-0_0" class="wpdlb">网站</label>
                                    </div>
                        </div>
                <div class="wpd-form-col-right">
                    <div class="wc-field-submit">
                                            
                                            <label class="wpd_label" wpd-tooltip="通知对此评论的新回复">
                            <input id="wc_notification_new_comment-0_0" class="wc_notification_new_comment-0_0 wpd_label__checkbox" value="comment" type="checkbox" name="wpdiscuz_notification_type">
                            <span class="wpd_label__text">
                                <span class="wpd_label__check">
                                    <i class="fas fa-bell wpdicon wpdicon-on" aria-hidden="true"></i>
                                    <i class="fas fa-bell-slash wpdicon wpdicon-off" aria-hidden="true"></i>
                                </span>
                            </span>
                        </label>
                                                                <input id="wpd-field-submit-0_0" class="wc_comm_submit wpd_not_clicked wpd-prim-button" type="submit" name="submit" value="发表评论">
        </div>
                </div>
                    <div class="clearfix"></div>
        </div>
                            </div>
                                        <input type="hidden" class="wpdiscuz_unique_id" value="0_0" name="wpdiscuz_unique_id">
                </form>
                        </div>
                <div id="wpdiscuz_hidden_secondary_form" style="display: none;">
                    <div class="wpd-form wpd-form-wrapper wpd-secondary-form-wrapper" id="wpd-secondary-form-wrapper-wpdiscuzuniqueid" style="display: none;">
                            <div class="wpd-secondary-forms-social-content"></div><div class="clearfix"></div>
                                        <form class="wpd_comm_form wpd-secondary-form-wrapper" method="post" enctype="multipart/form-data">
                    <div class="wpd-field-comment">
                        <div class="wpdiscuz-item wc-field-textarea">
                            <div class="wpdiscuz-textarea-wrap ">
                                                                                                        <div class="wpd-avatar">
                                        <img alt="guest" src="./TCMalloc_files/saved_resource" srcset="https://cravatar.cn/avatar/?s=112&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-56 photo avatar-default" height="56" width="56" loading="lazy">                                    </div>
                                                <div id="wpd-editor-wraper-wpdiscuzuniqueid" style="display: none;">
                <div id="wpd-editor-char-counter-wpdiscuzuniqueid" class="wpd-editor-char-counter"></div>
                <label style="display: none;" for="wc-textarea-wpdiscuzuniqueid">Label</label>
                <textarea id="wc-textarea-wpdiscuzuniqueid" required="" name="wc_comment" class="wc_comment wpd-field"></textarea>
                <div id="wpd-editor-wpdiscuzuniqueid"></div>
                        <div id="wpd-editor-toolbar-wpdiscuzuniqueid">
                            <button title="粗体" class="ql-bold"></button>
                                <button title="斜体" class="ql-italic"></button>
                                <button title="下划线" class="ql-underline"></button>
                                <button title="罢工" class="ql-strike"></button>
                                <button title="有序列表" class="ql-list" value="ordered"></button>
                                <button title="无序列表" class="ql-list" value="bullet"></button>
                                <button title="引用" class="ql-blockquote"></button>
                                <button title="代码块" class="ql-code-block"></button>
                                <button title="链接" class="ql-link"></button>
                                <button title="源代码" class="ql-sourcecode" data-wpde_button_name="sourcecode">{}</button>
                                <button title="隐藏" class="ql-spoiler" data-wpde_button_name="spoiler">[+]</button>
                            <div class="wpd-editor-buttons-right">
                <span class="wmu-upload-wrap" wpd-tooltip="将图像附加到此评论" wpd-tooltip-position="left"><label class="wmu-add"><i class="far fa-image" aria-hidden="true"></i><input style="display:none;" class="wmu-add-files" type="file" name="wmu_files[]" accept="image/*"></label></span>            </div>
        </div>
                    </div>
                                        </div>
                        </div>
                    </div>
                    <div class="wpd-form-foot" style="display:none;">
                        <div class="wpdiscuz-textarea-foot">
                                                        <div class="wpdiscuz-button-actions"><div class="wmu-action-wrap"><div class="wmu-tabs wmu-images-tab wmu-hide"></div></div></div>
                        </div>
                                <div class="wpd-form-row">
                    <div class="wpd-form-col-left">
                        <div class="wpdiscuz-item wc_name-wrapper wpd-has-icon">
                                    <div class="wpd-field-icon"><i class="fas fa-user" aria-hidden="true"></i></div>
                                    <input id="wc_name-wpdiscuzuniqueid" value="" required="required" aria-required="true" class="wc_name wpd-field" type="text" name="wc_name" placeholder="名字*" maxlength="50" pattern=".{3,50}" title="">
                <label for="wc_name-wpdiscuzuniqueid" class="wpdlb">名字*</label>
                            </div>
                        <div class="wpdiscuz-item wc_email-wrapper wpd-has-icon">
                                    <div class="wpd-field-icon"><i class="fas fa-at" aria-hidden="true"></i></div>
                                    <input id="wc_email-wpdiscuzuniqueid" value="" required="required" aria-required="true" class="wc_email wpd-field" type="email" name="wc_email" placeholder="邮箱*">
                <label for="wc_email-wpdiscuzuniqueid" class="wpdlb">邮箱*</label>
                            </div>
                            <div class="wpdiscuz-item wc_website-wrapper wpd-has-icon">
                                            <div class="wpd-field-icon"><i class="fas fa-link" aria-hidden="true"></i></div>
                                        <input id="wc_website-wpdiscuzuniqueid" value="" class="wc_website wpd-field" type="text" name="wc_website" placeholder="网站">
                    <label for="wc_website-wpdiscuzuniqueid" class="wpdlb">网站</label>
                                    </div>
                        </div>
                <div class="wpd-form-col-right">
                    <div class="wc-field-submit">
                                            
                                            <label class="wpd_label" wpd-tooltip="通知对此评论的新回复">
                            <input id="wc_notification_new_comment-wpdiscuzuniqueid" class="wc_notification_new_comment-wpdiscuzuniqueid wpd_label__checkbox" value="comment" type="checkbox" name="wpdiscuz_notification_type">
                            <span class="wpd_label__text">
                                <span class="wpd_label__check">
                                    <i class="fas fa-bell wpdicon wpdicon-on" aria-hidden="true"></i>
                                    <i class="fas fa-bell-slash wpdicon wpdicon-off" aria-hidden="true"></i>
                                </span>
                            </span>
                        </label>
                                                                <input id="wpd-field-submit-wpdiscuzuniqueid" class="wc_comm_submit wpd_not_clicked wpd-prim-button" type="submit" name="submit" value="发表评论">
        </div>
                </div>
                    <div class="clearfix"></div>
        </div>
                            </div>
                                        <input type="hidden" class="wpdiscuz_unique_id" value="wpdiscuzuniqueid" name="wpdiscuz_unique_id">
                </form>
                        </div>
                </div>
                    </div>
                        <div id="wpd-threads" class="wpd-thread-wrapper">
                <div class="wpd-thread-head">
                    <div class="wpd-thread-info " data-comments-count="32">
                        <span class="wpdtc" title="32">32</span> 评论                    </div>
                                        <div class="wpd-space"></div>
                    <div class="wpd-thread-filter">
                                                    <div class="wpd-filter wpdf-reacted wpd_not_clicked" wpd-tooltip="最具反应的评论"><i class="fas fa-bolt" aria-hidden="true"></i></div>
                                                        <div class="wpd-filter wpdf-hottest wpd_not_clicked" wpd-tooltip="最热门评论贴子"><i class="fas fa-fire" aria-hidden="true"></i></div>
                                                        <div class="wpd-filter wpdf-sorting">
                                                                        <span class="wpdiscuz-sort-button wpdiscuz-date-sort-asc wpdiscuz-sort-button-active" data-sorting="oldest">最久</span>
                                                                        <i class="fas fa-sort-down" aria-hidden="true"></i>
                                <div class="wpdiscuz-sort-buttons" style="display: none;">
                                                                            <span class="wpdiscuz-sort-button wpdiscuz-date-sort-desc" data-sorting="newest">最新</span>
                                                                                <span class="wpdiscuz-sort-button wpdiscuz-vote-sort-up" data-sorting="by_vote">最赞</span>
                                                                        </div>
                            </div>
                                                </div>
                </div>
                <div class="wpd-comment-info-bar">
                    <div class="wpd-current-view"><i class="fas fa-quote-left" aria-hidden="true"></i> 内联反馈</div>
                    <div class="wpd-filter-view-all">查看所有评论</div>
                </div>
                                <div class="wpd-thread-list">
                    <div id="wpd-comm-3_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-3" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Anonymous" src="./TCMalloc_files/saved_resource(1)" srcset="https://cravatar.cn/avatar/?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo avatar-default" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Anonymous
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E9%9D%9E%E5%B8%B8%E5%A5%BD%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%8C%E6%84%9F%E8%B0%A2%E5%88%86%E4%BA%AB%EF%BC%81&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-3" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2018年12月15日 08:46">
    <i class="far fa-clock" aria-hidden="true"></i>
    3 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-3"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>非常好的文章，感谢分享！</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-3_0"></div></div><div id="wpd-comm-4_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-4" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Anonymous" src="./TCMalloc_files/saved_resource(1)" srcset="https://cravatar.cn/avatar/?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo avatar-default" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Anonymous
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=good&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-4" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2018年12月28日 07:28">
    <i class="far fa-clock" aria-hidden="true"></i>
    3 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-4"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>good</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-4_0"></div></div><div id="wpd-comm-5_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-5" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Anonymous" src="./TCMalloc_files/saved_resource(1)" srcset="https://cravatar.cn/avatar/?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo avatar-default" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Anonymous
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E7%9C%8B%E5%88%B0%E8%BF%87%E7%9A%84%E5%86%99%E7%9A%84%E6%9C%80%E5%A5%BD%E7%9A%84%E6%9C%80%E8%AF%A6%E5%B0%BD%E7%9A%84%E5%85%B3%E4%BA%8Etcmalloc%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%8C%E6%B2%A1%E6%9C%89%E4%B9%8B%E4%B8%80%E3%80%82%E8%86%9C%E6%8B%9C%E5%A4%A7%E7%A5%9E%F0%9F%91%8D&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-5" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2019年4月9日 01:53">
    <i class="far fa-clock" aria-hidden="true"></i>
    3 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-5"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>看到过的写的最好的最详尽的关于tcmalloc的文章，没有之一。膜拜大神👍</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result wpd-up" title="1">1</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-5_0"></div></div><div id="wpd-comm-25_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-25" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="jack" src="./TCMalloc_files/ece6d917fdea4ff2c7f788d6a6e8a0d4" srcset="https://cravatar.cn/avatar/ece6d917fdea4ff2c7f788d6a6e8a0d4?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    jack
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%86%99%E5%BE%97%E5%BE%88%E6%A3%92%E3%80%82tcmalloc%E8%BF%98%E6%9C%89%E4%B8%80%E4%B8%AA%E5%86%85%E5%AD%98%E7%A2%8E%E7%89%87%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%8C%E4%B8%8D%E7%9F%A5%E9%81%93%E6%9C%89%E6%B2%A1%E6%9C%89%E6%89%93%E7%AE%97%E5%86%99%E8%BF%99%E4%B8%AA%E6%96%B9%E9%9D%A2%E7%9B%B8%E5%85%B3%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%9F&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-25" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2019年6月17日 18:01">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-25"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>写得很棒。tcmalloc还有一个内存碎片的问题，不知道有没有打算写这个方面相关的文章？</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-25_0"></div><div id="wpd-comm-26_25" class="wpd-comment wpd-reply wpd_comment_level-2"><div class="wpd-comment-wrap wpd-blog-user wpd-blog-post_author">
    <div id="comment-26" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <a href="https://wallenwang.com/author/wallen/" target="_blank" rel="noreferrer ugc"><img alt="wallen" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy"></a>
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://wallenwang.com/" rel="noreferrer ugc" target="_blank">wallen</a><span class="wpd-user-nicename" data-wpd-clipboard="@wallen">(@wallen)</span>
</div>
    <div class="wpd-comment-label" wpd-tooltip="作者" wpd-tooltip-position="top">
    <span>作者</span>
</div>
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%98%AF%E8%AF%B4tcmalloc%E6%9C%89%E9%97%AE%E9%A2%98%E4%BC%9A%E5%AF%BC%E8%87%B4%E5%BE%88%E5%A4%9A%E5%86%85%E5%AD%98%E7%A2%8E%E7%89%87%EF%BC%8C%E8%BF%98%E6%98%AF%E6%8C%87tcmalloc%E5%9C%A8%E5%A4%84%E7%90%86%E5%86%85%E5%AD%98%E7%A2%8E%E7%89%87%E9%97%AE%E9%A2%98%E4%B8%8A%E7%9A%84%E5%81%9A%E6%B3%95%EF%BC%9F%E5%A6%82%E6%9E%9C%E6%98%AF%E5%89%8D%E8%80%85%EF%BC%8C%E4%B8%8D%E5%A4%AA%E4%BA%86%E8%A7%A3%EF%BC%8C%E8%BF%98%E8%AF%B7%E6%8C%87%E6%95%99%E3%80%82%E5%A6%82%E6%9E%9C%E6%98%AF%E5%90%8E%E8%80%85%EF%BC%8C%E6%96%87%E4%B8%AD%E5%85%B6%E5%AE%9E%E6%9C%89%E5%87%A0%E5%A4%84%E9%9B%B6%E6%95%A3%E5%9C%B0%E6%8F%90%E5%88%B0%E4%BA%86t...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-26" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-25">
        jack
    </a>
</div>
    <div class="wpd-comment-date" title="2019年6月17日 22:37">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-26"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>是说tcmalloc有问题会导致很多内存碎片，还是指tcmalloc在处理内存碎片问题上的做法？如果是前者，不太了解，还请指教。如果是后者，文中其实有几处零散地提到了tcmalloc为了减少内存碎片的做法，不过单把内存碎片拿出来写一篇应该也很有必要，有时间可以考虑总结一下输出文章。</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-26_25"></div><div id="wpd-comm-27_26" class="wpd-comment wpd-reply wpd_comment_level-3"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-27" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="jack" src="./TCMalloc_files/ece6d917fdea4ff2c7f788d6a6e8a0d4" srcset="https://cravatar.cn/avatar/ece6d917fdea4ff2c7f788d6a6e8a0d4?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    jack
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=https://github.com/gperftools/gperftools/issues/756https://dinghailong.wordpress.co...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-27" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-26">
        wallen
    </a>
</div>
    <div class="wpd-comment-date" title="2019年6月18日 17:47">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-27"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p><a href="https://github.com/gperftools/gperftools/issues/756" rel="nofollow ugc">https://github.com/gperftools/gperftools/issues/756</a><br>
<a href="https://dinghailong.wordpress.com/2016/08/01/fix-the-memory-fragmentation-of-embedded-systems-with-tcmalloc/" rel="nofollow ugc">https://dinghailong.wordpress.com/2016/08/01/fix-the-memory-fragmentation-of-embedded-systems-with-tcmalloc/</a><br>
可以参考这2个链接哈，特别是第一个链接，描述了一个极端情况下的case。<br>
翻了几天资料，好像没有很好的办法来解决内存碎片问题。</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-27_26"></div><div id="wpd-comm-29_27" class="wpd-comment wpd-reply wpd_comment_level-4"><div class="wpd-comment-wrap wpd-blog-user wpd-blog-post_author">
    <div id="comment-29" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <a href="https://wallenwang.com/author/wallen/" target="_blank" rel="noreferrer ugc"><img alt="wallen" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy"></a>
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://wallenwang.com/" rel="noreferrer ugc" target="_blank">wallen</a><span class="wpd-user-nicename" data-wpd-clipboard="@wallen">(@wallen)</span>
</div>
    <div class="wpd-comment-label" wpd-tooltip="作者" wpd-tooltip-position="top">
    <span>作者</span>
</div>
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%9C%89%E7%A9%BA%E7%A0%94%E7%A9%B6%E7%A0%94%E7%A9%B6&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-29" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-27">
        jack
    </a>
</div>
    <div class="wpd-comment-date" title="2019年6月18日 19:34">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-29"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>有空研究研究</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-29_27"></div></div></div><div id="wpd-comm-28_26" class="wpd-comment wpd-reply wpd_comment_level-3"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-28" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="jack" src="./TCMalloc_files/ece6d917fdea4ff2c7f788d6a6e8a0d4" srcset="https://cravatar.cn/avatar/ece6d917fdea4ff2c7f788d6a6e8a0d4?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    jack
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%98%AF%E6%8C%87tcmalloc%E6%9C%AC%E8%BA%AB%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%E4%BC%9A%E4%BA%A7%E7%94%9F%E5%86%85%E5%AD%98%E7%A2%8E%E7%89%87&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-28" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-26">
        wallen
    </a>
</div>
    <div class="wpd-comment-date" title="2019年6月18日 17:48">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-28"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>是指tcmalloc本身运行过程中会产生内存碎片</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-28_26"></div></div></div></div><div id="wpd-comm-30_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-30" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Max" src="./TCMalloc_files/e7231f84f23571937f5d5a4e8ea2f8d5" srcset="https://cravatar.cn/avatar/e7231f84f23571937f5d5a4e8ea2f8d5?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Max
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%86%99%E7%9A%84%E5%A4%AA%E7%B2%BE%E5%BD%A9%E4%BA%86%EF%BC%8C%E5%8D%9A%E4%B8%BB%F0%9F%91%8D%EF%BC%81&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-30" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2019年9月12日 18:30">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-30"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>写的太精彩了，博主👍！</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-30_0"></div></div><div id="wpd-comm-31_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-31" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="MrZhu" src="./TCMalloc_files/b4a46c24c680132eda00e0552d47faa8" srcset="https://cravatar.cn/avatar/b4a46c24c680132eda00e0552d47faa8?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    MrZhu
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=tcmalloc%E5%88%86%E9%85%8D%E5%90%8E%E5%86%85%E5%AD%98delete%E5%90%8E%E6%9C%AA%E5%BD%92%E8%BF%98%E7%BB%99%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E8%B6%8A%E6%9D%A5%E8%B6%8A%E5%A4%A7&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-31" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2019年11月27日 15:16">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-31"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>tcmalloc分配后内存delete后未归还给操作系统，程序内存越来越大</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-31_0"></div></div><div id="wpd-comm-32_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-32" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="MrZhu" src="./TCMalloc_files/b4a46c24c680132eda00e0552d47faa8" srcset="https://cravatar.cn/avatar/b4a46c24c680132eda00e0552d47faa8?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    MrZhu
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E4%BD%BF%E7%94%A8tcmalloc%E5%90%8E%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98%E8%B6%8A%E6%9D%A5%E8%B6%8A%E5%A4%A7%EF%BC%8C%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E5%91%A2&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-32" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2019年11月27日 15:17">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-32"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>使用tcmalloc后程序内存越来越大，应该怎么解决呢</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-32_0"></div></div><div id="wpd-comm-8459_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-8459" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="kun" src="./TCMalloc_files/27579b2740139c7f02f0322ed855aa2c" srcset="https://cravatar.cn/avatar/27579b2740139c7f02f0322ed855aa2c?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    kun
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%A4%AA%E7%B2%BE%E5%BD%A9%E4%BA%86%EF%BC%8C%E5%A5%BD%E6%96%87%E7%AB%A0&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-8459" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2020年3月10日 11:41">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-8459"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>太精彩了，好文章</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-8459_0"></div></div><div id="wpd-comm-12254_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-12254" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="zhang" src="./TCMalloc_files/86cced3d65f899222d0374f39dde4731" srcset="https://cravatar.cn/avatar/86cced3d65f899222d0374f39dde4731?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    zhang
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%86%99%E5%BE%97%E5%A4%AA%E5%A5%BD%E4%BA%86%EF%BC%8C%E5%A4%A7%E7%A5%9E%E5%8F%AF%E5%90%A6%E6%8A%8Ajemalloc%E5%92%8Cptmalloc%E9%83%BD%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%EF%BC%8C%E7%84%B6%E5%90%8E%E5%81%9A%E4%B8%AA%E5%AF%B9%E6%AF%94&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-12254" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2020年4月1日 16:46">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-12254"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>写得太好了，大神可否把jemalloc和ptmalloc都总结一下，然后做个对比</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-12254_0"></div><div id="wpd-comm-47842_12254" class="wpd-comment wpd-reply wpd_comment_level-2"><div class="wpd-comment-wrap wpd-blog-user wpd-blog-post_author">
    <div id="comment-47842" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <a href="https://wallenwang.com/author/wallen/" target="_blank" rel="noreferrer ugc"><img alt="wallen" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy"></a>
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://wallenwang.com/" rel="noreferrer ugc" target="_blank">wallen</a><span class="wpd-user-nicename" data-wpd-clipboard="@wallen">(@wallen)</span>
</div>
    <div class="wpd-comment-label" wpd-tooltip="作者" wpd-tooltip-position="top">
    <span>作者</span>
</div>
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%9C%80%E8%BF%91%E5%9C%A8%E7%9C%8Bglibc%E2%80%99s%20malloc%EF%BC%8Cjemalloc%E6%9C%89%E7%A9%BA%E5%86%8D%E7%9C%8B%E3%80%82&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47842" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-12254">
        zhang
    </a>
</div>
    <div class="wpd-comment-date" title="2021年4月2日 02:51">
    <i class="far fa-clock" aria-hidden="true"></i>
    1 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47842"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>最近在看glibc’s malloc，jemalloc有空再看。</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47842_12254"></div></div></div><div id="wpd-comm-21315_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-21315" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Robert Liu" src="./TCMalloc_files/0ac580960bc3f340ea0c7484a7e72feb" srcset="https://cravatar.cn/avatar/0ac580960bc3f340ea0c7484a7e72feb?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Robert Liu
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E9%9D%9E%E5%B8%B8%E5%A5%BD&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-21315" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2020年5月11日 10:09">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-21315"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>非常好</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-21315_0"></div></div><div id="wpd-comm-23044_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-23044" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="lee" src="./TCMalloc_files/f9714d884c20951398d9c4b1c4ad7369" srcset="https://cravatar.cn/avatar/f9714d884c20951398d9c4b1c4ad7369?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    lee
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%3E%20%E2%80%9C896%E5%AD%97%E8%8A%82%E5%AF%B9%E5%BA%94%E7%BC%96%E5%8F%B7%E4%B8%BA30%E7%9A%84size%20class%EF%BC%8C%E4%B8%8B%E4%B8%80%E4%B8%AAsize%20class%2031%E5%A4%A7%E5%B0%8F%E4%B8%BA1024%E5%AD%97%E8%8A%82%E2%80%9D%E5%8D%9A%E4%B8%BB%E4%BD%A0%E5%A5%BD%EF%BC%8C896%20%E5%92%8C%201024%E4%B8%AD%E9%97%B4%E6%98%AF%E4%B8%8D%E6%98%AF%E8%BF%98%E6%9C%89%E4%B8%80%E4%B8%AA...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-23044" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2020年5月19日 15:23">
    <i class="far fa-clock" aria-hidden="true"></i>
    2 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-23044"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>&gt; “896字节对应编号为30的size class，下一个size class 31大小为1024字节”<br>
博主你好，896 和 1024中间是不是还有一个960才对。<br>
960 = 896 + 896 / 8 = 896 + 112 = 896 + 64 = 960<br>
1024 = 960 + 960 / 8 = 960 + 120 = 960 + 64 = 1024</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-23044_0"></div><div id="wpd-comm-47845_23044" class="wpd-comment wpd-reply wpd_comment_level-2"><div class="wpd-comment-wrap wpd-blog-user wpd-blog-post_author">
    <div id="comment-47845" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <a href="https://wallenwang.com/author/wallen/" target="_blank" rel="noreferrer ugc"><img alt="wallen" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy"></a>
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://wallenwang.com/" rel="noreferrer ugc" target="_blank">wallen</a><span class="wpd-user-nicename" data-wpd-clipboard="@wallen">(@wallen)</span>
</div>
    <div class="wpd-comment-label" wpd-tooltip="作者" wpd-tooltip-position="top">
    <span>作者</span>
</div>
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%8F%AF%E4%BB%A5%E7%9C%8B%E4%B8%8B%E2%80%9C7.4.4%E5%90%88%E5%B9%B6%E6%93%8D%E4%BD%9C%E2%80%9D%E4%B8%80%E8%8A%82%EF%BC%8Csize%20class%2031%E8%B5%B7%E5%88%9D%E6%98%AF960%E5%AD%97%E8%8A%82%EF%BC%8Csize%20class%2032%E6%98%AF1024%E5%AD%97%E8%8A%82%EF%BC%8C%E4%BD%86%E8%BF%99%E4%B8%A4%E4%B8%AAclass%E9%83%BD%E6%98%AF1%E4%B8%AApage8%E4%B8%AA%E5%AF%B9...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47845" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-23044">
        lee
    </a>
</div>
    <div class="wpd-comment-date" title="2021年4月2日 03:06">
    <i class="far fa-clock" aria-hidden="true"></i>
    1 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47845"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>可以看下“7.4.4合并操作”一节，size class 31起初是960字节，size class 32是1024字节，但这两个class都是1个page8个对象（8192 / 960 == 8192 / 1024 == 8），所以size class 31向size class 32合并，最终跟size class一样，同为1024字节。</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47845_23044"></div></div></div><div id="wpd-comm-31704_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-31704" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Anonymous" src="./TCMalloc_files/e0d89c5b6096456d6b1a2ce56ffbe27e" srcset="https://cravatar.cn/avatar/e0d89c5b6096456d6b1a2ce56ffbe27e?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Anonymous
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E9%9D%9E%E5%B8%B8%E5%A5%BD%EF%BC%8C%E5%8E%89%E5%AE%B3%EF%BC%81&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-31704" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2020年6月28日 15:49">
    <i class="far fa-clock" aria-hidden="true"></i>
    1 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-31704"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>非常好，厉害！</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-31704_0"></div></div><div id="wpd-comm-45726_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-45726" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="qhsong" src="./TCMalloc_files/f876c5f1daa51dd2a16a02eb25b4280b" srcset="https://cravatar.cn/avatar/f876c5f1daa51dd2a16a02eb25b4280b?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    qhsong
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%9C%AC%E6%96%87%E8%AE%A9%E6%88%91%E5%AF%B9tcmalloc%E7%90%86%E8%A7%A3%E6%9B%B4%E5%8A%A0%E9%80%8F%E5%BD%BB%E4%BA%86%EF%BC%8C%E6%94%AF%E6%8C%81&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-45726" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2020年10月10日 22:31">
    <i class="far fa-clock" aria-hidden="true"></i>
    1 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-45726"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>本文让我对tcmalloc理解更加透彻了，支持</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-45726_0"></div><div id="wpd-comm-47843_45726" class="wpd-comment wpd-reply wpd_comment_level-2"><div class="wpd-comment-wrap wpd-blog-user wpd-blog-post_author">
    <div id="comment-47843" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <a href="https://wallenwang.com/author/wallen/" target="_blank" rel="noreferrer ugc"><img alt="wallen" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy"></a>
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://wallenwang.com/" rel="noreferrer ugc" target="_blank">wallen</a><span class="wpd-user-nicename" data-wpd-clipboard="@wallen">(@wallen)</span>
</div>
    <div class="wpd-comment-label" wpd-tooltip="作者" wpd-tooltip-position="top">
    <span>作者</span>
</div>
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%84%9F%E8%B0%A2%E6%94%AF%E6%8C%81%EF%BB%BF%20%F0%9F%99%8F%20%EF%BB%BF&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47843" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-45726">
        qhsong
    </a>
</div>
    <div class="wpd-comment-date" title="2021年4月2日 02:52">
    <i class="far fa-clock" aria-hidden="true"></i>
    1 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47843"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>感谢支持<span class="ql-emojiblot" data-name="pray">﻿<span contenteditable="false"><span class="wpd-content-em wpdem-pray"> 🙏 </span></span>﻿</span></p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47843_45726"></div></div></div><div id="wpd-comm-46904_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-46904" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Jemmy" src="./TCMalloc_files/b1842197c8c80402396a99ed08bbd8ae" srcset="https://cravatar.cn/avatar/b1842197c8c80402396a99ed08bbd8ae?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Jemmy
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E7%9C%8B%E4%BA%86%E5%A5%BD%E5%A4%9A%E6%96%87%E7%AB%A0%20%E8%BF%99%E7%AF%87%E6%9C%80%E5%85%B7%E7%BB%86%E8%8A%82%20%E6%B7%B1%E5%BA%A6%20%E5%B9%BF%E5%BA%A6%20%E6%9C%9F%E5%BE%85%E6%9B%B4%E5%A4%9A%E5%B9%B2%E8%B4%A7&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-46904" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2020年12月14日 01:21">
    <i class="far fa-clock" aria-hidden="true"></i>
    1 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-46904"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>看了好多文章 这篇最具细节 深度 广度 期待更多干货</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-46904_0"></div><div id="wpd-comm-47844_46904" class="wpd-comment wpd-reply wpd_comment_level-2"><div class="wpd-comment-wrap wpd-blog-user wpd-blog-post_author">
    <div id="comment-47844" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <a href="https://wallenwang.com/author/wallen/" target="_blank" rel="noreferrer ugc"><img alt="wallen" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy"></a>
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://wallenwang.com/" rel="noreferrer ugc" target="_blank">wallen</a><span class="wpd-user-nicename" data-wpd-clipboard="@wallen">(@wallen)</span>
</div>
    <div class="wpd-comment-label" wpd-tooltip="作者" wpd-tooltip-position="top">
    <span>作者</span>
</div>
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%84%9F%E8%B0%A2%E8%AE%A4%E5%8F%AF%EF%BC%8C%E6%9C%80%E8%BF%91%E6%AD%A3%E5%9C%A8%E7%9C%8Bglibc%E7%9A%84malloc%E5%AE%9E%E7%8E%B0%EF%BC%8C%E7%9C%8B%E5%AE%8C%E8%BE%93%E5%87%BA%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E3%80%82&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47844" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-46904">
        Jemmy
    </a>
</div>
    <div class="wpd-comment-date" title="2021年4月2日 02:52">
    <i class="far fa-clock" aria-hidden="true"></i>
    1 年 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47844"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>感谢认可，最近正在看glibc的malloc实现，看完输出一篇文章。</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47844_46904"></div></div></div><div id="wpd-comm-47874_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-47874" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Richarfeng" src="./TCMalloc_files/8a8f3e4be8a4908cee385b1524102960" srcset="https://cravatar.cn/avatar/8a8f3e4be8a4908cee385b1524102960?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Richarfeng
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%A4%A7%E4%BD%AC%E4%BD%A0%E5%A5%BD%EF%BC%8C%E7%9C%8B%E5%AE%8C%E6%96%87%E7%AB%A0%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%96%91%E9%97%AE%EF%BC%8C%E6%9C%89%E7%A9%BA%E9%BA%BB%E7%83%A6%E8%A7%A3%E7%AD%94%E4%B8%80%E4%B8%8B%E5%93%88%EF%BC%9A%E2%80%9C%E4%B8%80%E6%AC%A1%E7%A7%BB%E5%8A%A8%E5%A4%9A%E4%B8%AA%E7%A9%BA%E9%97%B2%E5%AF%B9%E8%B1%A1%E2%80%9D%E8%BF%99%E4%B8%80%E8%8A%82%E4%B8%AD%EF%BC%8C%E8%AF%B4%E7%9A%84%E2%80%9D%E5%8F%AF%E9%80%9A%E8%BF%87%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8FTCMALLOC_TRANSFER_NUM_OBJ%E8%B0%83%E6%95%B4...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47874" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2021年6月2日 18:23">
    <i class="far fa-clock" aria-hidden="true"></i>
    11 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47874"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p><span>大佬你好，看完文章有两个疑问，有空麻烦解答一下哈：</span></p>
<ol>
<li><span>“一次移动多个空闲对象”这一节中，说的”可通过环境变量TCMALLOC_TRANSFER_NUM_OBJ调整“ 是指调整batch_size的上线？64KB这个值可以调得嘛？</span></li>
<li><span>不太懂ThreadCache的GC逻辑，max_length和ThreadCache占用内存上限overall_thread_cache_size_，具体是怎么起作用的？</span></li>
</ol>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47874_0"></div><div id="wpd-comm-47875_47874" class="wpd-comment wpd-reply wpd_comment_level-2"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-47875" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="Richarfeng" src="./TCMalloc_files/8a8f3e4be8a4908cee385b1524102960" srcset="https://cravatar.cn/avatar/8a8f3e4be8a4908cee385b1524102960?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    Richarfeng
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%A4%A7%E4%BD%AC%E4%BD%A0%E5%A5%BD%EF%BC%8C%E7%9C%8B%E5%AE%8C%E6%96%87%E7%AB%A0%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%96%91%E9%97%AE%EF%BC%8C%E6%9C%89%E7%A9%BA%E9%BA%BB%E7%83%A6%E8%A7%A3%E7%AD%94%E4%B8%80%E4%B8%8B%E5%93%88%EF%BC%9A1%E3%80%81%E2%80%9C%E4%B8%80%E6%AC%A1%E7%A7%BB%E5%8A%A8%E5%A4%9A%E4%B8%AA%E7%A9%BA%E9%97%B2%E5%AF%B9%E8%B1%A1%E2%80%9D%E8%BF%99%E4%B8%80%E8%8A%82%E4%B8%AD%EF%BC%8C%E8%AF%B4%E7%9A%84%E2%80%9D%E5%8F%AF%E9%80%9A%E8%BF%87%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8FTCMALLOC_TRANSFER_NUM_OBJ%E8%B0%83...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47875" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-47874">
        Richarfeng
    </a>
</div>
    <div class="wpd-comment-date" title="2021年6月2日 18:24">
    <i class="far fa-clock" aria-hidden="true"></i>
    11 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47875"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p><span>大佬你好，看完文章有两个疑问，有空麻烦解答一下哈：</span><br>
<span>1、“一次移动多个空闲对象”这一节中，说的”可通过环境变量TCMALLOC_TRANSFER_NUM_OBJ调整“ 是指调整batch_size的上线？64KB这个值可以调得嘛？</span><br>
<span>2、不太懂ThreadCache的GC逻辑，max_length和ThreadCache占用内存上限overall_thread_cache_size_，具体是怎么起作用的？</span></p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47875_47874"></div></div></div><div id="wpd-comm-47876_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-47876" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="lewis" src="./TCMalloc_files/61f543de9fc7d81e140aaac8acd4d990" srcset="https://cravatar.cn/avatar/61f543de9fc7d81e140aaac8acd4d990?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    lewis
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=6.4%E5%B0%8F%E7%BB%93%E7%9A%84%E5%9B%BE%E9%87%8C%E9%9D%A2%EF%BC%8Cpage%E5%92%8Cspan%E6%98%AF%E4%B8%8D%E6%98%AF%E5%86%99%E5%8F%8D%E4%BA%86&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47876" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2021年7月5日 15:35">
    <i class="far fa-clock" aria-hidden="true"></i>
    10 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47876"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>6.4小结的图里面，page和span是不是写反了</p>
<div class="wmu-comment-attachments"><div class="wmu-attached-images wmu-count-single"><div class="wmu-attachment wmu-attachment-1240"><a href="https://wallenwang.com/wp-content/uploads/Image_20210705153437-1625470493.1926.png" class="wmu-attached-image-link wmu-lightbox cboxElement"><img style="max-height:200px;height:200px;width:auto;" alt="Image_20210705153437.png" title="Image_20210705153437.png" id="wmu-attachemnt-1240" class="attachment-medium size-medium wmu-attached-image" src="./TCMalloc_files/Image_20210705153437-1625470493.1926-300x117.png" wmu-data-src="" width="auto"></a><div class="wmu-separator"></div></div></div></div>
</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47876_0"></div><div id="wpd-comm-47877_47876" class="wpd-comment wpd-reply wpd_comment_level-2"><div class="wpd-comment-wrap wpd-blog-user wpd-blog-post_author">
    <div id="comment-47877" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <a href="https://wallenwang.com/author/wallen/" target="_blank" rel="noreferrer ugc"><img alt="wallen" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy"></a>
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://wallenwang.com/" rel="noreferrer ugc" target="_blank">wallen</a><span class="wpd-user-nicename" data-wpd-clipboard="@wallen">(@wallen)</span>
</div>
    <div class="wpd-comment-label" wpd-tooltip="作者" wpd-tooltip-position="top">
    <span>作者</span>
</div>
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%B2%A1%E6%9C%89%E5%86%99%E5%8F%8D%E3%80%82%E5%B0%86%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E5%88%92%E5%88%86%E4%B8%BA%E5%BE%88%E5%A4%9A%E4%B8%AApage%EF%BC%8CPageHeap%E4%BB%8E%E8%99%9A%E5%AD%98%E4%B8%AD%E6%AF%8F%E6%AC%A1%E7%94%B3%E8%AF%B7%E6%88%96%E9%87%8A%E6%94%BEn%E4%B8%AApage%EF%BC%8C%E5%B9%B6%E4%BB%A5span%E7%9A%84%E5%BD%A2%E5%BC%8F%E7%AE%A1%E7%90%86%E8%B5%B7%E6%9D%A5%E3%80%82CentralCache%E6%AF%8F%E6%AC%A1%E4%BB%8EPageH...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47877" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-47876">
        lewis
    </a>
</div>
    <div class="wpd-comment-date" title="2021年7月5日 15:58">
    <i class="far fa-clock" aria-hidden="true"></i>
    10 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47877"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p><span style="color: rgb(119, 119, 119);">没有写反。将虚拟内存划分为很多个page，PageHeap从虚存中每次申请或释放n个page，并以span的形式管理起来。CentralCache每次从PageHeap中申请一个span，并拆分成某个size class大小的内存块管理起来。</span></p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47877_47876"></div></div></div><div id="wpd-comm-47878_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-47878" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="hong" src="./TCMalloc_files/b80904142b3699673e1750f2300c607c" srcset="https://cravatar.cn/avatar/b80904142b3699673e1750f2300c607c?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    hong
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%A4%A7%E4%BD%AC%EF%BC%8C%E8%83%BD%E5%88%86%E4%BA%AB%E4%B8%80%E7%AF%87jemalloc%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B9%88&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47878" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2021年7月9日 11:34">
    <i class="far fa-clock" aria-hidden="true"></i>
    10 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47878"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>大佬，能分享一篇jemalloc相关的么</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result wpd-up" title="1">1</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    <div class="wpd-toggle wpd-hidden wpd_not_clicked" wpd-tooltip="隐藏回复">
    <i class="fas fa-chevron-up" aria-hidden="true"></i>
</div>
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47878_0"></div><div id="wpd-comm-47879_47878" class="wpd-comment wpd-reply wpd_comment_level-2"><div class="wpd-comment-wrap wpd-blog-user wpd-blog-post_author">
    <div id="comment-47879" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <a href="https://wallenwang.com/author/wallen/" target="_blank" rel="noreferrer ugc"><img alt="wallen" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy"></a>
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://wallenwang.com/" rel="noreferrer ugc" target="_blank">wallen</a><span class="wpd-user-nicename" data-wpd-clipboard="@wallen">(@wallen)</span>
</div>
    <div class="wpd-comment-label" wpd-tooltip="作者" wpd-tooltip-position="top">
    <span>作者</span>
</div>
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=jemalloc%E8%BF%98%E6%B2%A1%E7%9C%8B%E8%BF%87%EF%BC%8C%E6%8E%92%E6%9C%9F%E7%9C%8B%E4%B8%8B&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47879" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    <div class="wpd-reply-to">
    <i class="far fa-comments" aria-hidden="true"></i>
    回复给&nbsp;
    <a href="https://wallenwang.com/2018/11/tcmalloc/#comment-47878">
        hong
    </a>
</div>
    <div class="wpd-comment-date" title="2021年7月9日 11:36">
    <i class="far fa-clock" aria-hidden="true"></i>
    10 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47879"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>jemalloc还没看过，排期看下</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result wpd-up" title="1">1</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47879_47878"></div></div></div><div id="wpd-comm-47880_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-47880" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img class="avatar avatar-64 photo" width="64" height="64" src="./TCMalloc_files/trackback.png" alt="trackback">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://python.iitter.com/go/6521.html" rel="noreferrer ugc nofollow" target="_blank">Python成神之路 - Go内存分配那些事，就这么简单！</a>
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=[%E2%80%A6]%20Page%EF%BC%9A%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AF%B9%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E4%BB%A5%E9%A1%B5%E4%B8%BA%E5%8D%95%E4%BD%8D%EF%BC%8CTCMalloc%E4%B9%9F%E6%98%AF%E8%BF%99%E6%A0%B7%EF%BC%8C%E5%8F%AA%E4%B8%8D%E8%BF%87TCMalloc%E9%87%8C%E7%9A%84Page%E5%A4%A7%E5%B0%8F%E4%B8%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%87%8C%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%B9%B6%E4%B8%8D%E4%B8%80%E5%AE%9A%E7%9B%B8%E7%AD%89%EF%BC%8C%E8%80%8C%E6%98%AF%E5%80%8D...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47880" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2021年7月25日 15:35">
    <i class="far fa-clock" aria-hidden="true"></i>
    10 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47880"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>[…] Page：操作系统对内存管理以页为单位，TCMalloc也是这样，只不过TCMalloc里的Page大小与操作系统里的大小并不一定相等，而是倍数关系。《TCMalloc解密》里称x64下Page大小是8KB。 […]</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47880_0"></div></div><div id="wpd-comm-47881_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-47881" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="wuxz" src="./TCMalloc_files/1dc3bf87614f01d3d1a26b90f3a0d63c" srcset="https://cravatar.cn/avatar/1dc3bf87614f01d3d1a26b90f3a0d63c?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    wuxz
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%86%99%E5%BE%97%E5%A4%AA%E5%A5%BD%EF%BC%8C%E5%A4%AA%E4%BB%94%E7%BB%86%E4%BA%86%E3%80%82%E8%AE%A9%E6%88%91%E9%9D%9E%E5%B8%B8%E6%B7%B1%E5%88%BB%E7%9A%84%E7%90%86%E8%A7%A3%E4%BA%86tcmalloc%EF%BC%8C%E6%84%9F%E8%B0%A2%E4%BD%9C%E8%80%85%EF%BC%81%EF%BC%81%EF%BC%81&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47881" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2021年8月12日 16:37">
    <i class="far fa-clock" aria-hidden="true"></i>
    9 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47881"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>写得太好，太仔细了。让我非常深刻的理解了tcmalloc，感谢作者！！！</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47881_0"></div></div><div id="wpd-comm-47912_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-47912" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img alt="LJC" src="./TCMalloc_files/caea3dbfaace4f61a6c1753d0bf40859" srcset="https://cravatar.cn/avatar/caea3dbfaace4f61a6c1753d0bf40859?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64" loading="lazy">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    LJC
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=%E5%8F%97%E7%9B%8A%E8%89%AF%E5%A4%9A%EF%BC%8C%E6%84%9F%E8%B0%A2%E5%8D%9A%E4%B8%BB%EF%BC%81&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47912" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2021年11月18日 06:15">
    <i class="far fa-clock" aria-hidden="true"></i>
    6 月 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47912"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>受益良多，感谢博主！</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result wpd-up" title="1">1</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47912_0"></div></div><div id="wpd-comm-47916_0" class="wpd-comment wpd_comment_level-1"><div class="wpd-comment-wrap wpd-blog-guest">
    <div id="comment-47916" class="wpd-comment-right">
    <div class="wpd-comment-header">
    <div class="wpd-avatar ">
    <img class="avatar avatar-64 photo" width="64" height="64" src="./TCMalloc_files/trackback.png" alt="trackback">
</div>
    <div class="wpd-user-info">
    <div class="wpd-uinfo-top">
    <div class="wpd-comment-author ">
    <a href="https://jiuyashuijing.com/go-memory-management-article-is-enough/" rel="noreferrer ugc nofollow" target="_blank">Go memory management article is enough – JIUYASHUIJING</a>
</div>
    
    
    <div class="wpd-comment-share wpd-hidden wpd-tooltip wpd-top">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <div class="wpd-tooltip-content">
        <a class="wc_tw" rel="noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=[%E2%80%A6]%20areas%20into%20large%20areas%20when%20memory%20is%20released.%20If%20you%20are%20interested,%20...%20&amp;url=https%3A%2F%2Fwallenwang.com%2F2018%2F11%2Ftcmalloc%2F%23comment-47916" title="分享至推特"><i class="fab fa-twitter wpf-cta" aria-hidden="true"></i></a><a class="wc_vk" rel="noreferrer" target="_blank" href="https://vk.com/share.php?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至VKontakte"><i class="fab fa-vk wpf-cta" aria-hidden="true"></i></a><a class="wc_ok" rel="noreferrer" target="_blank" href="https://connect.ok.ru/offer?url=https://wallenwang.com/2018/11/tcmalloc/" title="分享至Odnoklassniki"><i class="fab fa-odnoklassniki wpf-cta" aria-hidden="true"></i></a>
    </div>
</div>
    <div class="wpd-space"></div>
</div>
    <div class="wpd-uinfo-bottom">
    
    
    <div class="wpd-comment-date" title="2022年5月19日 13:20">
    <i class="far fa-clock" aria-hidden="true"></i>
    13 天 前
</div>
</div>
</div>
    <div class="wpd-comment-link wpd-hidden">
    <span wpd-tooltip="评论列表" wpd-tooltip-position="left"><i class="fas fa-link" aria-hidden="true" data-wpd-clipboard="https://wallenwang.com/2018/11/tcmalloc/#comment-47916"></i></span>
</div>
</div>
    <div class="wpd-comment-text">
    <p>[…] areas into large areas when memory is released. If you are interested, you can read this article:TCMalloc decryption    At the same time, it can be found that the number of traversals here is 100, which may be […]</p>

</div>
    <div class="wpd-comment-footer">
    <div class="wpd-vote">
    <div class="wpd-vote-up wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" class="svg-inline--fa fa-plus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
    <div class="wpd-vote-result" title="0">0</div>
    <div class="wpd-vote-down wpd_not_clicked">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="minus" class="svg-inline--fa fa-minus fa-w-14" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
    </div>
</div>
    <div class="wpd-reply-button">
    <svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
    <span>回复</span>
</div>
    <div class="wpd-space"></div>
    
    
</div>
</div>
</div><div id="wpdiscuz_form_anchor-47916_0"></div></div><!-- // From wpDiscuz's Caches // -->                    <div class="wpdiscuz-comment-pagination">
                                            </div>
                </div>
            </div>
                </div>
        </div>
    <div id="wpdiscuz-loading-bar" class="wpdiscuz-loading-bar-unauth"></div>
    <div id="wpdiscuz-comment-message" class="wpdiscuz-comment-message-unauth"></div>
    				
							</div>

		
	
	
	

	


                            <footer id="typology-footer" class="typology-footer">
                    
                                        
                                            
                        <div class="container">
                                    
                                                                    
                                                                    <div class="col-lg-4 typology-footer-sidebar"><div id="block-14" class="widget clearfix widget_block"><p style="text-align:center"><a href="https://beian.miit.gov.cn/">粤ICP备2021073162号</a><br>© 2016 - 2021 Wallen | All rights reserved</p></div></div>
                                                                    
                                                                    
                        </div>

                                    </footer>
            
            
		</div>

		<div class="typology-sidebar">
	<div class="typology-sidebar-header">
		<div class="typology-sidebar-header-wrapper">
			<div class="typology-site-branding">
	
	<span class="site-title h4"><a href="https://wallenwang.com/" rel="home">Wallen's Blog</a></span>	
</div>
			<span class="typology-sidebar-close"><i class="fa fa-times" aria-hidden="true"></i></span>
		</div>
	</div>

	<div class="widget typology-responsive-menu" style="display: none;">
					<ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95-1" class="typology-nav typology-main-navigation"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-963"><a href="https://wallenwang.com/">首页</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1666"><a href="https://wallenwang.com/2018/11/tcmalloc/#">NMGen Study</a><span class="typology-nav-widget-acordion"><i class="fa fa-angle-down" aria-hidden="true"></i></span>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1665"><a href="https://wallenwang.com/2021/09/nmgen_study-heightfields/">高度场简介</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1664"><a href="https://wallenwang.com/2021/09/nmgen_study-overview/">处理过程概览</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1663"><a href="https://wallenwang.com/2021/09/nmgen_study-config/">配置参数</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1662"><a href="https://wallenwang.com/2021/09/nmgen_study-voxelization/">体素化过程</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1661"><a href="https://wallenwang.com/2021/09/nmgen_study-regiongen/">区域生成</a></li>
	<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1743"><a href="https://wallenwang.com/2021/09/nmgen_study-contourgen/">轮廓生成</a></li>
	<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1770"><a href="https://wallenwang.com/2021/09/nmgen_study-polygen/">凸多边形生成</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1830"><a href="https://wallenwang.com/2021/09/nmgen_study-detailgen/">细节网格生成</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-964"><a href="https://wallenwang.com/about/">关于我</a></li>
</ul>		</div>

					
								<div id="typology_posts_widget-5" class="widget clearfix typology_posts_widget"><h4 class="widget-title h5">近期文章</h4>
			<div class="typology-posts-widget-container style-timeline">
				
									
					<article class="post-1804 post type-post status-publish format-standard has-post-thumbnail hentry category-navmesh tag-navmesh tag-nmgen-study post-ftoc">

						               <div class="post-date">
                            <span class="post-date-day">18</span><span class="post-date-month">9月</span>
                    </div>
	
		                <h6><a href="https://wallenwang.com/2021/09/nmgen_study-detailgen/">【译】NMGen – 细节网格生成</a></h6>		                
		                		                	<div class="entry-meta"><div class="meta-item meta-date"><span class="updated">9月 前</span></div></div>
		            	


					</article>

									
					<article class="post-1744 post type-post status-publish format-standard has-post-thumbnail hentry category-navmesh tag-navmesh tag-nmgen-study post-ftoc">

						               <div class="post-date">
                            <span class="post-date-day">17</span><span class="post-date-month">9月</span>
                    </div>
	
		                <h6><a href="https://wallenwang.com/2021/09/nmgen_study-polygen/">【译】NMGen – 凸多边形生成</a></h6>		                
		                		                	<div class="entry-meta"><div class="meta-item meta-date"><span class="updated">9月 前</span></div></div>
		            	


					</article>

									
					<article class="post-1627 post type-post status-publish format-standard has-post-thumbnail hentry category-navmesh tag-navmesh tag-nmgen-study post-ftoc">

						               <div class="post-date">
                    </div>
	
		                <h6><a href="https://wallenwang.com/2021/09/nmgen_study-contourgen/">【译】NMGen – 轮廓生成</a></h6>		                
		                		                	<div class="entry-meta"><div class="meta-item meta-date"><span class="updated">9月 前</span></div></div>
		            	


					</article>

									
					<article class="post-1585 post type-post status-publish format-standard has-post-thumbnail hentry category-navmesh tag-navmesh tag-nmgen-study post-ftoc">

						               <div class="post-date">
                            <span class="post-date-day">15</span><span class="post-date-month">9月</span>
                    </div>
	
		                <h6><a href="https://wallenwang.com/2021/09/nmgen_study-regiongen/">【译】NMGen – 区域生成</a></h6>		                
		                		                	<div class="entry-meta"><div class="meta-item meta-date"><span class="updated">9月 前</span></div></div>
		            	


					</article>

									
					<article class="post-1573 post type-post status-publish format-standard has-post-thumbnail hentry category-navmesh tag-navmesh tag-nmgen-study post-ftoc">

						               <div class="post-date">
                    </div>
	
		                <h6><a href="https://wallenwang.com/2021/09/nmgen_study-voxelization/">【译】NMGen – 体素化过程</a></h6>		                
		                		                	<div class="entry-meta"><div class="meta-item meta-date"><span class="updated">9月 前</span></div></div>
		            	


					</article>

				
			</div>

		
		
		</div><div id="cwp-widget-2" class="widget clearfix widget_recent_comments comments_widget_plus"><h4 class="widget-title h5">最新评论</h4><ul class="cwp-ul "><li class="recentcomments cwp-li"><a class="comment-link cwp-comment-link" href="https://wallenwang.com/2018/11/tcmalloc/#comment-47916"><span class="comment-avatar cwp-avatar rounded"><img alt="" src="./TCMalloc_files/saved_resource(2)" srcset="https://cravatar.cn/avatar/?s=110&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-55 photo avatar-default" height="55" width="55" loading="lazy"></span></a><span class="cwp-comment-title"><span class="comment-author-link cwp-author-link"><a href="https://jiuyashuijing.com/go-memory-management-article-is-enough/" rel="external nofollow ugc" class="url">Go memory management article is enough – JIUYASHUIJING</a></span> <span class="cwp-on-text">on</span> <a class="comment-link cwp-comment-link" href="https://wallenwang.com/2018/11/tcmalloc/#comment-47916">TCMalloc解密</a></span><span class="comment-excerpt cwp-comment-excerpt">[…] areas into large areas when memory is re…</span></li><li class="recentcomments cwp-li"><a class="comment-link cwp-comment-link" href="https://wallenwang.com/2018/12/fight-exp01-anim/#comment-47914"><span class="comment-avatar cwp-avatar rounded"><img alt="" src="./TCMalloc_files/cad3143e4570dad0a26f3883b932a639" srcset="https://cravatar.cn/avatar/cad3143e4570dad0a26f3883b932a639?s=110&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-55 photo" height="55" width="55" loading="lazy"></span></a><span class="cwp-comment-title"><span class="comment-author-link cwp-author-link"><a href="http://cowlevel/" rel="external nofollow ugc" class="url">TONE</a></span> <span class="cwp-on-text">on</span> <a class="comment-link cwp-comment-link" href="https://wallenwang.com/2018/12/fight-exp01-anim/#comment-47914">战斗制作经验浅谈（一）——关于动作</a></span><span class="comment-excerpt cwp-comment-excerpt">cool</span></li><li class="recentcomments cwp-li"><a class="comment-link cwp-comment-link" href="https://wallenwang.com/2021/09/nmgen_study-voxelization/#comment-47913"><span class="comment-avatar cwp-avatar rounded"><img alt="" src="./TCMalloc_files/2532ebf2bf31ba30a48b13473f14dd9c" srcset="https://cravatar.cn/avatar/2532ebf2bf31ba30a48b13473f14dd9c?s=110&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-55 photo" height="55" width="55" loading="lazy"></span></a><span class="cwp-comment-title"><span class="comment-author-link cwp-author-link">超级无敌宇宙小白熊</span> <span class="cwp-on-text">on</span> <a class="comment-link cwp-comment-link" href="https://wallenwang.com/2021/09/nmgen_study-voxelization/#comment-47913">【译】NMGen – 体素化过程</a></span><span class="comment-excerpt cwp-comment-excerpt">牛哇~</span></li><li class="recentcomments cwp-li"><a class="comment-link cwp-comment-link" href="https://wallenwang.com/2018/11/tcmalloc/#comment-47912"><span class="comment-avatar cwp-avatar rounded"><img alt="" src="./TCMalloc_files/caea3dbfaace4f61a6c1753d0bf40859(1)" srcset="https://cravatar.cn/avatar/caea3dbfaace4f61a6c1753d0bf40859?s=110&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-55 photo" height="55" width="55" loading="lazy"></span></a><span class="cwp-comment-title"><span class="comment-author-link cwp-author-link">LJC</span> <span class="cwp-on-text">on</span> <a class="comment-link cwp-comment-link" href="https://wallenwang.com/2018/11/tcmalloc/#comment-47912">TCMalloc解密</a></span><span class="comment-excerpt cwp-comment-excerpt">受益良多，感谢博主！</span></li><li class="recentcomments cwp-li"><a class="comment-link cwp-comment-link" href="https://wallenwang.com/2019/06/understand-netty-inbound-outbound/#comment-47911"><span class="comment-avatar cwp-avatar rounded"><img alt="" src="./TCMalloc_files/a7060fcead942812d0f6078837b323c6(1)" srcset="https://cravatar.cn/avatar/a7060fcead942812d0f6078837b323c6?s=110&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-55 photo" height="55" width="55" loading="lazy"></span></a><span class="cwp-comment-title"><span class="comment-author-link cwp-author-link">wallen</span> <span class="cwp-on-text">on</span> <a class="comment-link cwp-comment-link" href="https://wallenwang.com/2019/06/understand-netty-inbound-outbound/#comment-47911">如何理解Netty中的Inbound和Outbound</a></span><span class="comment-excerpt cwp-comment-excerpt">不搞java本地没有java开发环境了，自己写个demo测试下吧，打几行日志就看出来了</span></li></ul><!-- Generated by https://wordpress.org/plugins/comments-widget-plus/ --></div><div id="categories-2" class="widget clearfix widget_categories"><h4 class="widget-title h5">分类</h4>
			<ul>
					<li class="cat-item cat-item-18"><a href="https://wallenwang.com/category/c-c/">C/C++</a> (2)
</li>
	<li class="cat-item cat-item-17"><a href="https://wallenwang.com/category/netty/">Netty</a> (1)
</li>
	<li class="cat-item cat-item-23"><a href="https://wallenwang.com/category/%e5%85%b6%e4%bb%96/">其他</a> (4)
</li>
	<li class="cat-item cat-item-20"><a href="https://wallenwang.com/category/%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91/">游戏开发</a> (20)
<ul class="children">
	<li class="cat-item cat-item-40"><a href="https://wallenwang.com/category/%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91/navmesh/">Navmesh</a> (8)
</li>
</ul>
</li>
	<li class="cat-item cat-item-21"><a href="https://wallenwang.com/category/%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b/">网络编程</a> (2)
</li>
			</ul>

			</div><div id="tag_cloud-3" class="widget clearfix widget_tag_cloud"><h4 class="widget-title h5">标签</h4><div class="tagcloud"><a href="https://wallenwang.com/tag/navmesh/" class="tag-cloud-link tag-link-39 tag-link-position-1" style="font-size: 19.666666666667pt;" aria-label="Navmesh (8个项目)">Navmesh<span class="tag-link-count"> (8)</span></a>
<a href="https://wallenwang.com/tag/netty/" class="tag-cloud-link tag-link-16 tag-link-position-2" style="font-size: 8pt;" aria-label="Netty (1个项目)">Netty<span class="tag-link-count"> (1)</span></a>
<a href="https://wallenwang.com/tag/nmgen-study/" class="tag-cloud-link tag-link-56 tag-link-position-3" style="font-size: 19.666666666667pt;" aria-label="NMGen-Study (8个项目)">NMGen-Study<span class="tag-link-count"> (8)</span></a>
<a href="https://wallenwang.com/tag/tcmalloc/" class="tag-cloud-link tag-link-58 tag-link-position-4" style="font-size: 8pt;" aria-label="TCMalloc (1个项目)">TCMalloc<span class="tag-link-count"> (1)</span></a>
<a href="https://wallenwang.com/tag/unity3d/" class="tag-cloud-link tag-link-12 tag-link-position-5" style="font-size: 16.615384615385pt;" aria-label="Unity3D (5个项目)">Unity3D<span class="tag-link-count"> (5)</span></a>
<a href="https://wallenwang.com/tag/websocket/" class="tag-cloud-link tag-link-15 tag-link-position-6" style="font-size: 8pt;" aria-label="WebSocket (1个项目)">WebSocket<span class="tag-link-count"> (1)</span></a>
<a href="https://wallenwang.com/tag/%e4%b8%aa%e4%ba%ba%e6%84%9f%e6%82%9f/" class="tag-cloud-link tag-link-9 tag-link-position-7" style="font-size: 11.230769230769pt;" aria-label="个人感悟 (2个项目)">个人感悟<span class="tag-link-count"> (2)</span></a>
<a href="https://wallenwang.com/tag/%e5%86%85%e5%ad%98%e7%ae%a1%e7%90%86/" class="tag-cloud-link tag-link-8 tag-link-position-8" style="font-size: 8pt;" aria-label="内存管理 (1个项目)">内存管理<span class="tag-link-count"> (1)</span></a>
<a href="https://wallenwang.com/tag/%e5%9b%be%e5%bd%a2%e6%b8%b2%e6%9f%93/" class="tag-cloud-link tag-link-14 tag-link-position-9" style="font-size: 15.179487179487pt;" aria-label="图形渲染 (4个项目)">图形渲染<span class="tag-link-count"> (4)</span></a>
<a href="https://wallenwang.com/tag/%e6%b8%b8%e6%88%8f/" class="tag-cloud-link tag-link-13 tag-link-position-10" style="font-size: 8pt;" aria-label="游戏 (1个项目)">游戏<span class="tag-link-count"> (1)</span></a>
<a href="https://wallenwang.com/tag/%e6%b8%b8%e6%88%8f%e5%bc%80%e5%8f%91/" class="tag-cloud-link tag-link-7 tag-link-position-11" style="font-size: 22pt;" aria-label="游戏开发 (11个项目)">游戏开发<span class="tag-link-count"> (11)</span></a>
<a href="https://wallenwang.com/tag/%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b/" class="tag-cloud-link tag-link-11 tag-link-position-12" style="font-size: 13.384615384615pt;" aria-label="网络编程 (3个项目)">网络编程<span class="tag-link-count"> (3)</span></a></div>
</div><div id="archives-2" class="widget clearfix widget_archive"><h4 class="widget-title h5">归档</h4>
			<ul>
					<li><a href="https://wallenwang.com/2021/09/">2021年9月</a>&nbsp;(8)</li>
	<li><a href="https://wallenwang.com/2019/06/">2019年6月</a>&nbsp;(2)</li>
	<li><a href="https://wallenwang.com/2018/12/">2018年12月</a>&nbsp;(4)</li>
	<li><a href="https://wallenwang.com/2018/11/">2018年11月</a>&nbsp;(6)</li>
	<li><a href="https://wallenwang.com/2017/03/">2017年3月</a>&nbsp;(4)</li>
	<li><a href="https://wallenwang.com/2017/02/">2017年2月</a>&nbsp;(2)</li>
	<li><a href="https://wallenwang.com/2015/08/">2015年8月</a>&nbsp;(2)</li>
			</ul>

			</div>				
</div>

<div class="typology-sidebar-overlay"></div>		
		        <script>
            function _katexRender(rootElement) {
                const eles = rootElement.querySelectorAll(".katex-eq:not(.katex-rendered)");
                for(let idx=0; idx < eles.length; idx++) {
                    const ele = eles[idx];
                    ele.classList.add("katex-rendered");
                    try {
                        katex.render(
                            ele.textContent,
                            ele,
                            {
                                displayMode: ele.getAttribute("data-katex-display") === 'true',
                                throwOnError: false
                            }
                        );
                    } catch(n) {
                        ele.style.color="red";
                        ele.textContent = n.message;
                    }
                }
            }

            function katexRender() {
                _katexRender(document);
            }

            document.addEventListener("DOMContentLoaded", function() {
                katexRender();

                // Perform a KaTeX rendering step when the DOM is mutated.
                const katexObserver = new MutationObserver(function(mutations) {
                    [].forEach.call(mutations, function(mutation) {
                        if (mutation.target && mutation.target instanceof Element) {
                            _katexRender(mutation.target);
                        }
                    });
                });

                const katexObservationConfig = {
                    subtree: true,
                    childList: true,
                    attributes: true,
                    characterData: true
                };

                katexObserver.observe(document.body, katexObservationConfig);
            });

        </script>
        <span aria-hidden="true" id="to_top_scrollup" class="dashicons dashicons-arrow-up-alt2" style="opacity: 0.5; display: inline;"><span class="screen-reader-text">Scroll Up</span></span><a href="javascript:void(0);" id="wpdUserContentInfoAnchor" style="display:none;" rel="#wpdUserContentInfo" data-wpd-lity="">wpDiscuz</a><div id="wpdUserContentInfo" style="overflow:auto;background:#FDFDF6;padding:20px;width:600px;max-width:100%;border-radius:6px;" class="lity-hide"></div><div id="wpd-bubble-wrapper" class="wpd-left-corner" style="left: 25px; display: block;"><span id="wpd-bubble-all-comments-count" title="32">32</span><div id="wpd-bubble-count"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path class="wpd-bubble-count-first" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path><path class="wpd-bubble-count-second" d="M0 0h24v24H0z"></path></svg><span class="wpd-new-comments-count">0</span></div><div id="wpd-bubble"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path class="wpd-bubble-plus-first" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path><path class="wpd-bubble-plus-second" d="M0 0h24v24H0z"></path></svg><div id="wpd-bubble-add-message">希望看到您的想法，请发表评论。<span id="wpd-bubble-add-message-close"><a href="https://wallenwang.com/2018/11/tcmalloc/#">x</a></span></div></div><div id="wpd-bubble-notification"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path class="wpd-bubble-notification-first" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path><path class="wpd-bubble-notification-second" d="M0 0h24v24H0z"></path></svg><div id="wpd-bubble-notification-message"><div id="wpd-bubble-author"><div><span id="wpd-bubble-author-avatar"></span><span id="wpd-bubble-author-name"></span><span id="wpd-bubble-comment-date">(<span class="wpd-bubble-spans"></span>)</span></div><span id="wpd-bubble-comment-close"><a href="https://wallenwang.com/2018/11/tcmalloc/#">x</a></span></div><div id="wpd-bubble-comment"><span id="wpd-bubble-comment-text"></span><span id="wpd-bubble-comment-reply-link">| <a href="https://wallenwang.com/2018/11/tcmalloc/#">Reply</a></span></div></div></div></div><div id="wpd-editor-source-code-wrapper-bg"></div><div id="wpd-editor-source-code-wrapper"><textarea id="wpd-editor-source-code"></textarea><button id="wpd-insert-source-code">Insert</button><input type="hidden" id="wpd-editor-uid"></div>        <!--[if lte IE 9]>
        <script>
            'use strict';
            (function($) {
                $(document).ready(function() {
                    $('#ftwp-container').addClass('ftwp-ie9');
                });
            })(jQuery);
        </script>
        <![endif]-->
		<script type="text/javascript" src="./TCMalloc_files/main.js" id="mks_shortcodes_js-js"></script>
<script type="text/javascript" id="wpdiscuz-combo-js-js-extra">
/* <![CDATA[ */
var wpdiscuzAjaxObj = {"wc_hide_replies_text":"\u9690\u85cf\u56de\u590d","wc_show_replies_text":"\u67e5\u770b\u56de\u590d","wc_msg_required_fields":"\u8bf7\u586b\u5199\u5fc5\u586b\u5b57\u6bb5","wc_invalid_field":"\u4e00\u4e9b\u5b57\u6bb5\u503c\u65e0\u6548","wc_error_empty_text":"\u8bc4\u8bba\u524d\u8bf7\u5148\u586b\u5199\u6b64\u5b57\u6bb5","wc_error_url_text":"URL \u65e0\u6548","wc_error_email_text":"\u65e0\u6548\u7684email\u5730\u5740","wc_invalid_captcha":"\u65e0\u6548\u7684\u9a8c\u8bc1\u7801","wc_login_to_vote":"\u60a8\u987b\u5148\u767b\u5f55\u518d\u6295\u7968","wc_deny_voting_from_same_ip":"\u60a8\u4e0d\u80fd\u7ed9\u6b64\u8bc4\u8bba\u6295\u7968","wc_self_vote":"\u60a8\u4e0d\u80fd\u4e3a\u81ea\u5df1\u7684\u8bc4\u8bba\u6295\u7968","wc_vote_only_one_time":"\u60a8\u5df2\u5bf9\u6b64\u8bc4\u8bba\u6295\u8fc7\u7968\u4e86","wc_voting_error":"\u6295\u7968\u9519\u8bef","wc_comment_edit_not_possible":"\u5bf9\u4e0d\u8d77\uff0c\u6b64\u8bc4\u8bba\u5df2\u4e0d\u80fd\u7f16\u8f91","wc_comment_not_updated":"\u5bf9\u4e0d\u8d77\uff0c\u8bc4\u8bba\u672a\u66f4\u65b0","wc_comment_not_edited":"\u60a8\u6ca1\u6709\u505a\u51fa\u4efb\u4f55\u66f4\u6539","wc_msg_input_min_length":"\u592a\u77ed\u4e86","wc_msg_input_max_length":"\u592a\u957f\u4e86","wc_spoiler_title":"\u6807\u9898\u5267\u900f","wc_cannot_rate_again":"\u60a8\u65e0\u6cd5\u518d\u6b21\u8bc4\u5206","wc_not_allowed_to_rate":"\u60a8\u4e0d\u53ef\u4ee5\u5728\u8fd9\u91cc\u8bc4\u5206","wc_follow_user":"\u5173\u6ce8\u8be5\u7528\u6237","wc_unfollow_user":"\u53d6\u6d88\u5173\u6ce8\u8be5\u7528\u6237","wc_follow_success":"\u4f60\u5f00\u59cb\u5173\u6ce8\u8fd9\u4e2a\u8bc4\u8bba\u4f5c\u8005","wc_follow_canceled":"\u4f60\u4e0d\u518d\u5173\u6ce8\u8fd9\u4e2a\u8bc4\u8bba\u4f5c\u8005\u3002","wc_follow_email_confirm":"\u8bf7\u67e5\u770b\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5e76\u786e\u8ba4\u7528\u6237\u5173\u6ce8\u7684\u8bf7\u6c42\u3002","wc_follow_email_confirm_fail":"\u62b1\u6b49\uff0c\u6211\u4eec\u65e0\u6cd5\u53d1\u9001\u786e\u8ba4\u7535\u5b50\u90ae\u4ef6\u3002","wc_follow_login_to_follow":"\u8bf7\u5148\u767b\u5f55\u518d\u5173\u6ce8\u7528\u6237\u3002","wc_follow_impossible":"\u5f88\u62b1\u6b49\uff0c\u60a8\u65e0\u6cd5\u5173\u6ce8\u6b64\u7528\u6237\u3002","wc_follow_not_added":"\u5173\u6ce8\u5931\u8d25\u3002\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01","is_user_logged_in":"","commentListLoadType":"0","commentListUpdateType":"0","commentListUpdateTimer":"30","liveUpdateGuests":"0","wordpressThreadCommentsDepth":"5","wordpressIsPaginate":"","commentTextMaxLength":"0","replyTextMaxLength":"0","commentTextMinLength":"1","replyTextMinLength":"1","storeCommenterData":"100000","socialLoginAgreementCheckbox":"1","enableFbLogin":"0","fbUseOAuth2":"0","enableFbShare":"0","facebookAppID":"","facebookUseOAuth2":"0","enableGoogleLogin":"0","googleClientID":"","googleClientSecret":"","cookiehash":"a099a5a627e5dfabe43964ab03f0ea41","isLoadOnlyParentComments":"0","scrollToComment":"1","commentFormView":"collapsed","enableDropAnimation":"1","isNativeAjaxEnabled":"1","enableBubble":"1","bubbleLiveUpdate":"0","bubbleHintTimeout":"45","bubbleHintHideTimeout":"10","cookieHideBubbleHint":"wpdiscuz_hide_bubble_hint","bubbleShowNewCommentMessage":"1","bubbleLocation":"left_corner","firstLoadWithAjax":"0","wc_copied_to_clipboard":"\u590d\u5236\u5230\u526a\u8d34\u677f!","inlineFeedbackAttractionType":"blink","loadRichEditor":"1","wpDiscuzReCaptchaSK":"","wpDiscuzReCaptchaTheme":"light","wpDiscuzReCaptchaVersion":"2.0","wc_captcha_show_for_guest":"0","wc_captcha_show_for_members":"0","wpDiscuzIsShowOnSubscribeForm":"0","wmuEnabled":"1","wmuInput":"wmu_files","wmuMaxFileCount":"1","wmuMaxFileSize":"2097152","wmuPostMaxSize":"20971520","wmuIsLightbox":"1","wmuMimeTypes":{"jpg":"image\/jpeg","jpeg":"image\/jpeg","jpe":"image\/jpeg","gif":"image\/gif","png":"image\/png","bmp":"image\/bmp","tiff":"image\/tiff","tif":"image\/tiff","ico":"image\/x-icon"},"wmuPhraseConfirmDelete":"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9644\u4ef6\u5417\uff1f","wmuPhraseNotAllowedFile":"\u4e0d\u5141\u8bb8\u7684\u6587\u4ef6\u7c7b\u578b","wmuPhraseMaxFileCount":"\u4e0a\u4f20\u6587\u4ef6\u7684\u6700\u5927\u6570\u91cf\u4e3a 1","wmuPhraseMaxFileSize":"\u6700\u5927\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f 2MB","wmuPhrasePostMaxSize":"\u6587\u7ae0\u5b57\u6570\u4e0a\u9650 20MB","msgEmptyFile":"File is empty. Please upload something more substantial. This error could also be caused by uploads being disabled in your php.ini or by post_max_size being defined as smaller than upload_max_filesize in php.ini.","msgPostIdNotExists":"Post ID\u4e0d\u5b58\u5728","msgUploadingNotAllowed":"\u5bf9\u4e0d\u8d77\uff0c\u8fd9\u7bc7\u6587\u7ae0\u4e0d\u5141\u8bb8\u4e0a\u4f20","msgPermissionDenied":"\u60a8\u6ca1\u6709\u8db3\u591f\u7684\u6743\u9650\u6267\u884c\u6b64\u64cd\u4f5c","wmuKeyImages":"images","wmuSingleImageWidth":"auto","wmuSingleImageHeight":"200","version":"7.3.10","wc_post_id":"69","isCookiesEnabled":"1","loadLastCommentId":"0","dataFilterCallbacks":[],"phraseFilters":[],"scrollSize":"32","is_email_field_required":"1","url":"https:\/\/wallenwang.com\/wp-admin\/admin-ajax.php","customAjaxUrl":"https:\/\/wallenwang.com\/wp-content\/plugins\/wpdiscuz\/utils\/ajax\/wpdiscuz-ajax.php","bubbleUpdateUrl":"https:\/\/wallenwang.com\/wp-json\/wpdiscuz\/v1\/update","restNonce":"aacd4fcf06","validateNonceForGuests":""};
var wpdiscuzUCObj = {"msgConfirmDeleteComment":"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u8bc4\u8bba\u5417\uff1f","msgConfirmCancelSubscription":"\u4f60\u786e\u5b9a\u8981\u53d6\u6d88\u8fd9\u4e2a\u8ba2\u9605\u5417\uff1f","msgConfirmCancelFollow":"\u4f60\u786e\u5b9a\u8981\u53d6\u6d88\u8be5\u5173\u6ce8\u5417?","additionalTab":"0"};
/* ]]> */
</script>
<script type="text/javascript" id="wpdiscuz-combo-js-js-before">
        var wpdiscuzEditorOptions = {
        modules: {
        toolbar: "",
        counter: {
        uniqueID: "",
        commentmaxcount : 0,
        replymaxcount : 0,
        commentmincount : 1,
        replymincount : 1,
        },
                },
        wc_be_the_first_text: "\u60a8\u5c06\u662f\u7b2c\u4e00\u4f4d\u8bc4\u8bba\u4eba\uff01",
        wc_comment_join_text: "\u6b22\u8fce\u5206\u4eab\u60a8\u7684\u60f3\u6cd5\uff01",
        theme: 'snow',
        debug: 'error'
        };
        
</script>
<script type="text/javascript" src="./TCMalloc_files/wpdiscuz-combo.min.js" id="wpdiscuz-combo-js-js"></script>
<script type="text/javascript" src="./TCMalloc_files/comment-reply.min.js" id="comment-reply-js"></script>
<script type="text/javascript" src="./TCMalloc_files/imagesloaded.min.js" id="imagesloaded-js"></script>
<script type="text/javascript" id="typology-main-js-extra">
/* <![CDATA[ */
var typology_js_settings = {"rtl_mode":"","header_sticky":"1","logo":"","logo_retina":"","use_gallery":"1","slider_autoplay":"4000","cover_video_image_fallback":""};
/* ]]> */
</script>
<script type="text/javascript" src="./TCMalloc_files/min.js" id="typology-main-js"></script>
<script type="text/javascript" src="./TCMalloc_files/katex.min.js" id="katex-js"></script>
<script type="text/javascript" src="./TCMalloc_files/q2w3-fixed-widget.min.js" id="q2w3_fixed_widget-js"></script>
<script type="text/javascript" src="./TCMalloc_files/push.js" id="baidu_zz_push-js"></script>
<script type="text/javascript" id="fixedtoc-js-js-extra">
/* <![CDATA[ */
var fixedtocOption = {"showAdminbar":"","inOutEffect":"fade","isNestedList":"1","isColExpList":"1","showColExpIcon":"","isAccordionList":"1","isQuickMin":"","isEscMin":"1","isEnterMax":"1","fixedMenu":"#typology-header","scrollOffset":"10","fixedOffsetX":"230","fixedOffsetY":"0","fixedPosition":"middle-right","contentsFixedHeight":"0","inPost":"","contentsFloatInPost":"right","contentsWidthInPost":"250","contentsHeightInPost":"","contentsColexpInitMobile":"","inWidget":"","fixedWidget":"","triggerBorder":"thin","contentsBorder":"none","triggerSize":"45","isClickableHeader":"","debug":"0","postContentSelector":"#ftwp-postcontent","mobileMaxWidth":"768","disappearPoint":"content-bottom"};
/* ]]> */
</script>
<script type="text/javascript" src="./TCMalloc_files/ftoc.min.js" id="fixedtoc-js-js"></script>
<script type="text/javascript" src="./TCMalloc_files/wbui.js" id="wbui-js-js"></script>
<script type="text/javascript" src="./TCMalloc_files/qrious.min.js" id="qrious-js-js"></script>
<script type="text/javascript" id="wbs-front-dwqr-js-before">
var dwqr_opt="1.4.5|https%3A%2F%2Fwallenwang.com%2Fwp-content%2Fplugins%2Fdonate-with-qrcode%2F|0|https%3A%2F%2Fwallenwang.com%2Fwp-admin%2Fadmin-ajax.php|69"; var assets_ver=window.assets_ver || "1.4.5";
var wb_dwqr_donate_html='<div class="tab-navs"><div class="tab-nav-item item-weixin current"><span>微信</span></div><div class="tab-nav-item item-alipay"><span>支付宝</span></div></div><div class="tab-conts"><div class="tab-cont current"><div class="pic"><img src="https://wallenwang.com/wp-content/uploads/weixin_dashang.png" alt="微信二维码图片"></div><p>用<span class="hl">微信</span>扫描二维码打赏</p></div><div class="tab-cont"><div class="pic"><img src="https://wallenwang.com/wp-content/uploads/zhifubao_dashang.jpg" alt="支付宝二维码图片"></div><p>用<span class="hl">支付宝</span>扫描二维码打赏</p></div></div>';var wb_dwqr_share_html='<div class="wb-share-list" data-cover="https://wallenwang.com/wp-content/uploads/tcmalloc-ThreadCache.svg"><a class="share-logo icon-weixin" data-cmd="weixin" title="分享到微信" rel="nofollow"><svg class="wb-icon wbsico-dwqr-weixin"><use xlink:href="#wbsico-dwqr-weixin"></use></svg></a><a class="share-logo icon-weibo" data-cmd="weibo" title="分享到微博" rel="nofollow"><svg class="wb-icon wbsico-dwqr-weibo"><use xlink:href="#wbsico-dwqr-weibo"></use></svg></a><a class="share-logo icon-qzone" data-cmd="qzone" title="分享到QQ空间" rel="nofollow"><svg class="wb-icon wbsico-dwqr-qzone"><use xlink:href="#wbsico-dwqr-qzone"></use></svg></a><a class="share-logo icon-qq" data-cmd="qq" title="分享到QQ" rel="nofollow"><svg class="wb-icon wbsico-dwqr-qq"><use xlink:href="#wbsico-dwqr-qq"></use></svg></a>';
</script>
<script type="text/javascript" src="./TCMalloc_files/wbp_front.js" id="wbs-front-dwqr-js"></script>
<script type="text/javascript" src="./TCMalloc_files/enlighterjs.min.js" id="enlighterjs-js"></script>
<script type="text/javascript" id="enlighterjs-js-after">
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"scroll","linenumbers":true,"theme":"bootstrap4","language":"enlighter","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script type="text/javascript" src="./TCMalloc_files/wp-embed.min.js" id="wp-embed-js"></script>

	
<div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button type="button" id="cboxPrevious"></button><button type="button" id="cboxNext"></button><button type="button" id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none; max-width: none;"></div></div><div id="ftwp-container" class="ftwp-wrap ftwp-minimize ftwp-middle-right ftwp-fixed-to-post"><button type="button" id="ftwp-trigger" class="ftwp-shape-round ftwp-border-thin ftwp-transform-left-center ftwp-fade-trigger" title="单击可最大化目录" style="left: 1350px; right: auto;"><span class="ftwp-trigger-icon ftwp-icon-number"></span></button><nav id="ftwp-contents" class="ftwp-shape-round ftwp-border-none ftwp-transform-right-center" style="right: 0px; left: auto; top: 70px; height: 662px;"><header id="ftwp-header"><span id="ftwp-header-control" class="ftwp-icon-number"></span><button type="button" id="ftwp-header-minimize" class="ftwp-icon-minimize" aria-labelledby="ftwp-header-title" aria-label="Expand or collapse"></button><h3 id="ftwp-header-title">目录</h3></header><ol id="ftwp-list" class="ftwp-liststyle-decimal ftwp-effect-fade ftwp-list-nest ftwp-strong-first ftwp-colexp" style="height: 602px;"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-1"><span class="ftwp-text">写在前面</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-2"><span class="ftwp-text">TCMalloc是什么</span></a></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-3"><span class="ftwp-text">如何使用TCMalloc</span></a><ol class="ftwp-sub"><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-4"><span class="ftwp-text">安装</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-5"><span class="ftwp-text">64位Linux系统需要注意</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-6"><span class="ftwp-text">使用</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-7"><span class="ftwp-text">以动态库的方式</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-8"><span class="ftwp-text">以静态库的方式</span></a></li></ol></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-9"><span class="ftwp-text">TCMalloc是如何生效的</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-10"><span class="ftwp-text">使用glibc（但没有使用GCC编译器）</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-11"><span class="ftwp-text">使用GCC编译器</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-12"><span class="ftwp-text">TCMalloc的初始化</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-13"><span class="ftwp-text">何时初始化</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-14"><span class="ftwp-text">如何初始化</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-15"><span class="ftwp-text">初始化内容</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-16"><span class="ftwp-text">TCMalloc的内存分配算法概览</span></a><ol class="ftwp-sub"><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-17"><span class="ftwp-text">小对象分配</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-18"><span class="ftwp-text">Size Class</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-19"><span class="ftwp-text">ThreadCache</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-20"><span class="ftwp-text">CentralCache</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-21"><span class="ftwp-text">PageHeap</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-22"><span class="ftwp-text">内存回收</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-23"><span class="ftwp-text">小结</span></a></li></ol></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-24"><span class="ftwp-text">中对象分配</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-25"><span class="ftwp-text">大对象分配</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-26"><span class="ftwp-text">小结</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-expand"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-27"><span class="ftwp-text">TCMalloc的实现细节</span></a><ol class="ftwp-sub"><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-28"><span class="ftwp-text">Page</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-29"><span class="ftwp-text">PageID</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-30"><span class="ftwp-text">Span</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-31"><span class="ftwp-text">span的三种状态</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-32"><span class="ftwp-text">空闲对象链表</span></a></li></ol></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-33"><span class="ftwp-text">PageMap</span></a></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-34"><span class="ftwp-text">Size Class</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-35"><span class="ftwp-text">划分跨度</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-36"><span class="ftwp-text">一次移动多个空闲对象</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-37"><span class="ftwp-text">一次申请多个page</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-38"><span class="ftwp-text">合并操作</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-39"><span class="ftwp-text">记录映射关系</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-40"><span class="ftwp-text">计算任意内存地址对应的对象大小</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-41"><span class="ftwp-text">小结</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-42"><span class="ftwp-text">PageHeap</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-43"><span class="ftwp-text">空闲Span管理器</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-44"><span class="ftwp-text">Heap段的使用限制</span></a></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-45"><span class="ftwp-text">创建Span</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-46"><span class="ftwp-text">搜索空闲span</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-47"><span class="ftwp-text">小插曲：释放所有空闲内存</span></a></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-48"><span class="ftwp-text">向系统申请内存</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-49"><span class="ftwp-text">sbrk</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-50"><span class="ftwp-text">mmap</span></a></li></ol></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-51"><span class="ftwp-text">最后的搜索</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-52"><span class="ftwp-text">删除Span</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-53"><span class="ftwp-text">合并Span</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-54"><span class="ftwp-text">释放span</span></a></li></ol></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-expand"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-55"><span class="ftwp-text">ThreadCache</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-56"><span class="ftwp-text">每线程Cache</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-57"><span class="ftwp-text">何时创建ThreadCache</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-58"><span class="ftwp-text">何时销毁ThreadCache</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-59"><span class="ftwp-text">ThreadCache的大小</span></a></li><li class="ftwp-item"><a class="ftwp-anchor ftwp-active" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-60"><span class="ftwp-text">慢启动算法：FreeList的长度控制</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-61"><span class="ftwp-text">垃圾回收</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-62"><span class="ftwp-text">CentralCache</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-63"><span class="ftwp-text">管理span</span></a></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-64"><span class="ftwp-text">CentralFreeList↔ PageHeap</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-65"><span class="ftwp-text">从PageHeap获取span</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-66"><span class="ftwp-text">将span还给PageHeap</span></a></li></ol></li><li class="ftwp-item ftwp-has-sub ftwp-collapse"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-67"><span class="ftwp-text">CentralFreeList↔ThreadCache</span></a><ol class="ftwp-sub"><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-68"><span class="ftwp-text">ThreadCache取用小对象</span></a></li><li class="ftwp-item"><a class="ftwp-anchor" href="https://wallenwang.com/2018/11/tcmalloc/#ftoc-heading-69"><span class="ftwp-text">ThreadCache归还小对象</span></a></li></ol></li></ol></li></ol></li></ol></nav></div></body></html>